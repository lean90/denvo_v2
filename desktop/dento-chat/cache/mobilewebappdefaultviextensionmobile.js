
if(typeof(jqcc)==='undefined'){jqcc=jQuery;}
jqcc.cookie=function(a,b,c){if(typeof b!='undefined'){c=c||{};if(b===null){b='';c.expires=-1}var d='';if(c.expires&&(typeof c.expires=='number'||c.expires.toUTCString)){var e;if(typeof c.expires=='number'){e=new Date();e.setTime(e.getTime()+(c.expires*24*60*60*1000))}else{e=c.expires}d='; expires='+e.toUTCString()}var f=c.path?'; path='+(c.path):'';var g=c.domain?'; domain='+(c.domain):'';var h=c.secure?'; secure':'';document.cookie=[a,'=',encodeURIComponent(b),d,f,g,h].join('')}else{var j=null;if(document.cookie&&document.cookie!=''){var k=document.cookie.split(';');for(var i=0;i<k.length;i++){var l=jqcc.trim(k[i]);if(l.substring(0,a.length+1)==(a+'=')){j=decodeURIComponent(l.substring(a.length+1));break}}}return j}};if(typeof deconcept=="undefined"){var deconcept=new Object();}if(typeof deconcept.util=="undefined"){deconcept.util=new Object();}if(typeof deconcept.SWFObjectCCUtil=="undefined"){deconcept.SWFObjectCCUtil=new Object();}deconcept.SWFObjectCC=function(_1,id,w,h,_5,c,_7,_8,_9,_a){if(!document.getElementById){return;}this.DETECT_KEY=_a?_a:"detectflash";this.skipDetect=deconcept.util.getRequestParameter(this.DETECT_KEY);this.params=new Object();this.variables=new Object();this.attributes=new Array();if(_1){this.setAttribute("swf",_1);}if(id){this.setAttribute("id",id);}if(w){this.setAttribute("width",w);}if(h){this.setAttribute("height",h);}if(_5){this.setAttribute("version",new deconcept.PlayerVersion(_5.toString().split(".")));}this.installedVer=deconcept.SWFObjectCCUtil.getPlayerVersion();if(!window.opera&&document.all&&this.installedVer.major>7){deconcept.SWFObjectCC.doPrepUnload=true;}if(c){this.addParam("bgcolor",c);}var q=_7?_7:"high";this.addParam("quality",q);this.setAttribute("useExpressInstall",false);this.setAttribute("doExpressInstall",false);var _c=(_8)?_8:window.location;this.setAttribute("xiRedirectUrl",_c);this.setAttribute("redirectUrl","");if(_9){this.setAttribute("redirectUrl",_9);}};deconcept.SWFObjectCC.prototype={useExpressInstall:function(_d){this.xiSWFPath=!_d?"expressinstall.swf":_d;this.setAttribute("useExpressInstall",true);},setAttribute:function(_e,_f){this.attributes[_e]=_f;},getAttribute:function(_10){return this.attributes[_10];},addParam:function(_11,_12){this.params[_11]=_12;},getParams:function(){return this.params;},addVariable:function(_13,_14){this.variables[_13]=_14;},getVariable:function(_15){return this.variables[_15];},getVariables:function(){return this.variables;},getVariablePairs:function(){var _16=new Array();var key;var _18=this.getVariables();for(key in _18){_16[_16.length]=key+"="+_18[key];}return _16;},getSWFHTML:function(){var _19="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn");this.setAttribute("swf",this.xiSWFPath);}_19="<embed type=\"application/x-shockwave-flash\" src=\""+this.getAttribute("swf")+"\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\" style=\""+this.getAttribute("style")+"\"";_19+=" id=\""+this.getAttribute("id")+"\" name=\""+this.getAttribute("id")+"\" ";var _1a=this.getParams();for(var key in _1a){_19+=[key]+"=\""+_1a[key]+"\" ";}var _1c=this.getVariablePairs().join("&");if(_1c.length>0){_19+="flashvars=\""+_1c+"\"";}_19+="/>";}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX");this.setAttribute("swf",this.xiSWFPath);}_19="<object id=\""+this.getAttribute("id")+"\" classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\" style=\""+this.getAttribute("style")+"\">";_19+="<param name=\"movie\" value=\""+this.getAttribute("swf")+"\" />";var _1d=this.getParams();for(var key in _1d){_19+="<param name=\""+key+"\" value=\""+_1d[key]+"\" />";}var _1f=this.getVariablePairs().join("&");if(_1f.length>0){_19+="<param name=\"flashvars\" value=\""+_1f+"\" />";}_19+="</object>";}return _19;},write:function(_20){if(this.getAttribute("useExpressInstall")){var _21=new deconcept.PlayerVersion([6,0,65]);if(this.installedVer.versionIsValid(_21)&&!this.installedVer.versionIsValid(this.getAttribute("version"))){this.setAttribute("doExpressInstall",true);this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl")));document.title=document.title.slice(0,47)+" - Flash Player Installation";this.addVariable("MMdoctitle",document.title);}}if(this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))){var n=(typeof _20=="string")?document.getElementById(_20):_20;n.innerHTML=this.getSWFHTML();return true;}else{if(this.getAttribute("redirectUrl")!=""){document.location.replace(this.getAttribute("redirectUrl"));}}return false;}};deconcept.SWFObjectCCUtil.getPlayerVersion=function(){var _23=new deconcept.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var x=navigator.plugins["Shockwave Flash"];if(x&&x.description){_23=new deconcept.PlayerVersion(x.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."));}}else{if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){var axo=1;var _26=3;while(axo){try{_26++;axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_26);_23=new deconcept.PlayerVersion([_26,0,0]);}catch(e){axo=null;}}}else{try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");}catch(e){try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");_23=new deconcept.PlayerVersion([6,0,21]);axo.AllowScriptAccess="always";}catch(e){if(_23.major==6){return _23;}}try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}catch(e){}}if(axo!=null){_23=new deconcept.PlayerVersion(axo.GetVariable("$version").split(" ")[1].split(","));}}}return _23;};deconcept.PlayerVersion=function(_29){this.major=_29[0]!=null?parseInt(_29[0]):0;this.minor=_29[1]!=null?parseInt(_29[1]):0;this.rev=_29[2]!=null?parseInt(_29[2]):0;};deconcept.PlayerVersion.prototype.versionIsValid=function(fv){if(this.major<fv.major){return false;}if(this.major>fv.major){return true;}if(this.minor<fv.minor){return false;}if(this.minor>fv.minor){return true;}if(this.rev<fv.rev){return false;}return true;};deconcept.util={getRequestParameter:function(_2b){var q=document.location.search||document.location.hash;if(_2b==null){return q;}if(q){var _2d=q.substring(1).split("&");for(var i=0;i<_2d.length;i++){if(_2d[i].substring(0,_2d[i].indexOf("="))==_2b){return _2d[i].substring((_2d[i].indexOf("=")+1));}}}return"";}};deconcept.SWFObjectCCUtil.cleanupSWFs=function(){var _2f=document.getElementsByTagName("OBJECT");for(var i=_2f.length-1;i>=0;i--){_2f[i].style.display="none";for(var x in _2f[i]){if(typeof _2f[i][x]=="function"){_2f[i][x]=function(){};}}}};if(deconcept.SWFObjectCC.doPrepUnload){if(!deconcept.unloadSet){deconcept.SWFObjectCCUtil.prepUnload=function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};window.attachEvent("onunload",deconcept.SWFObjectCCUtil.cleanupSWFs);};window.attachEvent("onbeforeunload",deconcept.SWFObjectCCUtil.prepUnload);deconcept.unloadSet=true;}}if(!document.getElementById&&document.all){document.getElementById=function(id){return document.all[id];};}var getQueryParamValue=deconcept.util.getRequestParameter;var FlashObject=deconcept.SWFObjectCC;var SWFObjectCC=deconcept.SWFObjectCC;(function($){var h=$.scrollToCC=function(a,b,c){$(window).scrollToCC(a,b,c)};h.defaults={axis:'xy',duration:parseFloat($.fn.jqcc)>=1.3?0:1};h.window=function(a){return $(window)._scrollable()};$.fn._scrollable=function(){return this.map(function(){var a=this,isWin=!a.nodeName||$.inArray(a.nodeName.toLowerCase(),['iframe','#document','html','body'])!=-1;if(!isWin)return a;var b=(a.contentWindow||a).document||a.ownerDocument||a;return $.browser.safari||b.compatMode=='BackCompat'?b.body:b.documentElement})};$.fn.scrollToCC=function(e,f,g){if(typeof f=='object'){g=f;f=0}if(typeof g=='function')g={onAfter:g};if(e=='max')e=9e9;g=$.extend({},h.defaults,g);f=f||g.speed||g.duration;g.queue=g.queue&&g.axis.length>1;if(g.queue)f/=2;g.offset=both(g.offset);g.over=both(g.over);return this._scrollable().each(function(){var d=this,$elem=$(d),targ=e,toff,attr={},win=$elem.is('html,body');switch(typeof targ){case'number':case'string':if((/^([+-]=)?\d+(\.\d+)?(px|%)?$/.test(targ))||(targ.charAt(0)=='-'&&targ.charAt(1)!='=')){targ=both(targ);break}targ=$(targ,this);case'object':if(targ.is||targ.style)toff=(targ=$(targ)).offset()}$.each(g.axis.split(''),function(i,a){var b=a=='x'?'Left':'Top',pos=b.toLowerCase(),key='scroll'+b,old=d[key],max=h.max(d,a);if(toff){attr[key]=toff[pos]+(win?0:old-$elem.offset()[pos]);if(g.margin){attr[key]-=parseInt(targ.css('margin'+b))||0;attr[key]-=parseInt(targ.css('border'+b+'Width'))||0}attr[key]+=g.offset[pos]||0;if(g.over[pos])attr[key]+=targ[a=='x'?'width':'height']()*g.over[pos]}else{var c=targ[pos];attr[key]=c.slice&&c.slice(-1)=='%'?parseFloat(c)/100*max:c}if(/^\d+$/.test(attr[key]))attr[key]=attr[key]<=0?0:Math.min(attr[key],max);if(!i&&g.queue){if(old!=attr[key])animate(g.onAfterFirst);delete attr[key]}});animate(g.onAfter);function animate(a){$elem.animate(attr,f,g.easing,a&&function(){a.call(this,e,g)})}}).end()};h.max=function(a,b){var c=b=='x'?'Width':'Height',scroll='scroll'+c;if(!$(a).is('html,body'))return a[scroll]-$(a)[c.toLowerCase()]();var d='client'+c,html=a.ownerDocument.documentElement,body=a.ownerDocument.body;return Math.max(html[scroll],body[scroll])-Math.min(html[d],body[d])};function both(a){return typeof a=='object'?a:{top:a,left:a}}})(jqcc);var cc_zindex=0;var cc_dragobj=new Object();function loadCCPopup(url,name,properties,width,height,title,force){if(jqcc('#cometchat_container_'+name).length>0){alert('This popup is already open. Please close the existing popup and try again.');setTimeout(function(){cc_zindex+=1;jqcc('#cometchat_container_'+name).css('z-index',100001+cc_zindex);},100);return;}
var top=((jqcc(window).height()-height)/2)+jqcc(window).scrollTop();var left=((jqcc(window).width()-width)/2)+jqcc(window).scrollLeft();if(top<0){top=0;}
if(left<0){left=0;}
var queryStringSeparator='&';if(url.indexOf('?')<0){var queryStringSeparator='?';}
jqcc("body").append('<div id="cometchat_container_'+name+'" class="cometchat_container" style="left:'+left+'px;top:'+top+'px;width:'+width+'px;"><div class="cometchat_container_title"  onmousedown="dragStart(event, \'cometchat_container_'+name+'\')"><span style="float:left">'+title+'</span><div class="cometchat_closebox"></div><div style="clear:both"></div></div><div class="cometchat_container_body" style="height:'+(height)+'px;width:'+(width-2)+'px;"><div class="cometchat_loading"></div><iframe class="cometchat_iframe" width="'+(width-2)+'" height="'+(height)+'" allowtransparency="true" frameborder="0"  scrolling="no" src="'+url+queryStringSeparator+'embed=web"></iframe><div class="cometchat_overlay" style="width:'+(width-2)+'px;height:'+(height)+'px;"></div><div style="clear:both"></div></div></div>');setTimeout(function(){cc_zindex+=1;jqcc('#cometchat_container_'+name).css('z-index',100001+cc_zindex);},100);if(force==true){if(navigator.appVersion.indexOf("MSIE")==-1){window.onbeforeunload=function(){return'Navigating away from this page will close your chat popups.'};}}
jqcc('#cometchat_container_'+name+' .cometchat_closebox').click(function(){jqcc('#cometchat_container_'+name).remove();window.onbeforeunload=null;});jqcc('#cometchat_container_'+name).click(function(){cc_zindex+=1;jqcc(this).css('z-index',100001+cc_zindex);});}
function closeCCPopup(id){jqcc('#cometchat_container_'+id).remove();}
function resizeCCPopup(id,width,height){jqcc('#cometchat_container_'+id).css('width',width+2+'px');jqcc('#cometchat_container_'+id+' .cometchat_container_body').css('height',height);jqcc('#cometchat_container_'+id+' .cometchat_container_body').css('width',width);jqcc('#cometchat_container_'+id+' .cometchat_iframe').attr('height',height);jqcc('#cometchat_container_'+id+' .cometchat_iframe').attr('width',width);}
function getID(id){return document.getElementById(id);}
function dragStart(a,b){cc_zindex+=1;jqcc('#'+b).css('z-index',100001+cc_zindex);jqcc('#'+b+' .cometchat_overlay').css('display','block');var x,y;cc_dragobj.elNode=getID(b);try{x=window.event.clientX+document.documentElement.scrollLeft+document.body.scrollLeft;y=window.event.clientY+document.documentElement.scrollTop+document.body.scrollTop}catch(e){x=a.clientX+window.scrollX;y=a.clientY+window.scrollY}cc_dragobj.cursorStartX=x;cc_dragobj.cursorStartY=y;cc_dragobj.elStartLeft=parseInt(cc_dragobj.elNode.style.left,10);cc_dragobj.elStartTop=parseInt(cc_dragobj.elNode.style.top,10);if(isNaN(cc_dragobj.elStartLeft))cc_dragobj.elStartLeft=0;if(isNaN(cc_dragobj.elStartTop))cc_dragobj.elStartTop=0;try{document.attachEvent("onmousemove",dragGo);document.attachEvent("onmouseup",dragStop);window.event.cancelBubble=true;window.event.returnValue=false}catch(e){document.addEventListener("mousemove",dragGo,true);document.addEventListener("mouseup",dragStop,true);a.preventDefault()}}
function dragGo(a){var x,y;try{x=window.event.clientX+document.documentElement.scrollLeft+document.body.scrollLeft;y=window.event.clientY+document.documentElement.scrollTop+document.body.scrollTop}catch(e){x=a.clientX+window.scrollX;y=a.clientY+window.scrollY}var b=(cc_dragobj.elStartLeft+x-cc_dragobj.cursorStartX);var c=(cc_dragobj.elStartTop+y-cc_dragobj.cursorStartY);if(b>0){cc_dragobj.elNode.style.left=b+"px"}else{cc_dragobj.elNode.style.left="1px"}if(c>0){cc_dragobj.elNode.style.top=c+"px"}else{cc_dragobj.elNode.style.top="1px"}try{window.event.cancelBubble=true;window.event.returnValue=false}catch(e){a.preventDefault()}}
function dragStop(event){jqcc('.cometchat_overlay').css('display','none');try{document.detachEvent("onmousemove",dragGo);document.detachEvent("onmouseup",dragStop)}catch(e){document.removeEventListener("mousemove",dragGo,true);document.removeEventListener("mouseup",dragStop,true)}}
(function(a,b){function d(b){return!a(b).parents().andSelf().filter(function(){return a.curCSS(this,"visibility")==="hidden"||a.expr.filters.hidden(this)}).length}function c(b,c){var e=b.nodeName.toLowerCase();if("area"===e){var f=b.parentNode,g=f.name,h;if(!b.href||!g||f.nodeName.toLowerCase()!=="map")return!1;h=a("img[usemap=#"+g+"]")[0];return!!h&&d(h)}return(/input|select|textarea|button|object/.test(e)?!b.disabled:"a"==e?b.href||c:c)&&d(b)}a.ui=a.ui||{};a.ui.version||(a.extend(a.ui,{version:"1.8.18",keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91}}),a.fn.extend({propAttr:a.fn.prop||a.fn.attr,_focus:a.fn.focus,focus:function(b,c){return typeof b=="number"?this.each(function(){var d=this;setTimeout(function(){a(d).focus(),c&&c.call(d)},b)}):this._focus.apply(this,arguments)},scrollParent:function(){var b;a.browser.msie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?b=this.parents().filter(function(){return/(relative|absolute|fixed)/.test(a.curCSS(this,"position",1))&&/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0):b=this.parents().filter(function(){return/(auto|scroll)/.test(a.curCSS(this,"overflow",1)+a.curCSS(this,"overflow-y",1)+a.curCSS(this,"overflow-x",1))}).eq(0);return/fixed/.test(this.css("position"))||!b.length?a(document):b},zIndex:function(c){if(c!==b)return this.css("zIndex",c);if(this.length){var d=a(this[0]),e,f;while(d.length&&d[0]!==document){e=d.css("position");if(e==="absolute"||e==="relative"||e==="fixed"){f=parseInt(d.css("zIndex"),10);if(!isNaN(f)&&f!==0)return f}d=d.parent()}}return 0},disableSelection:function(){return this.bind((a.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(a){a.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),a.each(["Width","Height"],function(c,d){function h(b,c,d,f){a.each(e,function(){c-=parseFloat(a.curCSS(b,"padding"+this,!0))||0,d&&(c-=parseFloat(a.curCSS(b,"border"+this+"Width",!0))||0),f&&(c-=parseFloat(a.curCSS(b,"margin"+this,!0))||0)});return c}var e=d==="Width"?["Left","Right"]:["Top","Bottom"],f=d.toLowerCase(),g={innerWidth:a.fn.innerWidth,innerHeight:a.fn.innerHeight,outerWidth:a.fn.outerWidth,outerHeight:a.fn.outerHeight};a.fn["inner"+d]=function(c){if(c===b)return g["inner"+d].call(this);return this.each(function(){a(this).css(f,h(this,c)+"px")})},a.fn["outer"+d]=function(b,c){if(typeof b!="number")return g["outer"+d].call(this,b);return this.each(function(){a(this).css(f,h(this,b,!0,c)+"px")})}}),a.extend(a.expr[":"],{data:function(b,c,d){return!!a.data(b,d[3])},focusable:function(b){return c(b,!isNaN(a.attr(b,"tabindex")))},tabbable:function(b){var d=a.attr(b,"tabindex"),e=isNaN(d);return(e||d>=0)&&c(b,!e)}}),a(function(){var b=document.body,c=b.appendChild(c=document.createElement("div"));c.offsetHeight,a.extend(c.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),a.support.minHeight=c.offsetHeight===100,a.support.selectstart="onselectstart"in c,b.removeChild(c).style.display="none"}),a.extend(a.ui,{plugin:{add:function(b,c,d){var e=a.ui[b].prototype;for(var f in d)e.plugins[f]=e.plugins[f]||[],e.plugins[f].push([c,d[f]])},call:function(a,b,c){var d=a.plugins[b];if(!!d&&!!a.element[0].parentNode)for(var e=0;e<d.length;e++)a.options[d[e][0]]&&d[e][1].apply(a.element,c)}},contains:function(a,b){return document.compareDocumentPosition?a.compareDocumentPosition(b)&16:a!==b&&a.contains(b)},hasScroll:function(b,c){if(a(b).css("overflow")==="hidden")return!1;var d=c&&c==="left"?"scrollLeft":"scrollTop",e=!1;if(b[d]>0)return!0;b[d]=1,e=b[d]>0,b[d]=0;return e},isOverAxis:function(a,b,c){return a>b&&a<b+c},isOver:function(b,c,d,e,f,g){return a.ui.isOverAxis(b,d,f)&&a.ui.isOverAxis(c,e,g)}}))})(jqcc);(function(a,b){if(a.cleanData){var c=a.cleanData;a.cleanData=function(b){for(var d=0,e;(e=b[d])!=null;d++)try{a(e).triggerHandler("remove")}catch(f){}c(b)}}else{var d=a.fn.remove;a.fn.remove=function(b,c){return this.each(function(){c||(!b||a.filter(b,[this]).length)&&a("*",this).add([this]).each(function(){try{a(this).triggerHandler("remove")}catch(b){}});return d.call(a(this),b,c)})}}a.widget=function(b,c,d){var e=b.split(".")[0],f;b=b.split(".")[1],f=e+"-"+b,d||(d=c,c=a.Widget),a.expr[":"][f]=function(c){return!!a.data(c,b)},a[e]=a[e]||{},a[e][b]=function(a,b){arguments.length&&this._createWidget(a,b)};var g=new c;g.options=a.extend(!0,{},g.options),a[e][b].prototype=a.extend(!0,g,{namespace:e,widgetName:b,widgetEventPrefix:a[e][b].prototype.widgetEventPrefix||b,widgetBaseClass:f},d),a.widget.bridge(b,a[e][b])},a.widget.bridge=function(c,d){a.fn[c]=function(e){var f=typeof e=="string",g=Array.prototype.slice.call(arguments,1),h=this;e=!f&&g.length?a.extend.apply(null,[!0,e].concat(g)):e;if(f&&e.charAt(0)==="_")return h;f?this.each(function(){var d=a.data(this,c),f=d&&a.isFunction(d[e])?d[e].apply(d,g):d;if(f!==d&&f!==b){h=f;return!1}}):this.each(function(){var b=a.data(this,c);b?b.option(e||{})._init():a.data(this,c,new d(e,this))});return h}},a.Widget=function(a,b){arguments.length&&this._createWidget(a,b)},a.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:!1},_createWidget:function(b,c){a.data(c,this.widgetName,this),this.element=a(c),this.options=a.extend(!0,{},this.options,this._getCreateOptions(),b);var d=this;this.element.bind("remove."+this.widgetName,function(){d.destroy()}),this._create(),this._trigger("create"),this._init()},_getCreateOptions:function(){return a.metadata&&a.metadata.get(this.element[0])[this.widgetName]},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName),this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled")},widget:function(){return this.element},option:function(c,d){var e=c;if(arguments.length===0)return a.extend({},this.options);if(typeof c=="string"){if(d===b)return this.options[c];e={},e[c]=d}this._setOptions(e);return this},_setOptions:function(b){var c=this;a.each(b,function(a,b){c._setOption(a,b)});return this},_setOption:function(a,b){this.options[a]=b,a==="disabled"&&this.widget()[b?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",b);return this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_trigger:function(b,c,d){var e,f,g=this.options[b];d=d||{},c=a.Event(c),c.type=(b===this.widgetEventPrefix?b:this.widgetEventPrefix+b).toLowerCase(),c.target=this.element[0],f=c.originalEvent;if(f)for(e in f)e in c||(c[e]=f[e]);this.element.trigger(c,d);return!(a.isFunction(g)&&g.call(this.element[0],c,d)===!1||c.isDefaultPrevented())}}})(jqcc);(function(a,b){var c=!1;a(document).mouseup(function(a){c=!1}),a.widget("ui.mouse",{options:{cancel:":input,option",distance:1,delay:0},_mouseInit:function(){var b=this;this.element.bind("mousedown."+this.widgetName,function(a){return b._mouseDown(a)}).bind("click."+this.widgetName,function(c){if(!0===a.data(c.target,b.widgetName+".preventClickEvent")){a.removeData(c.target,b.widgetName+".preventClickEvent"),c.stopImmediatePropagation();return!1}}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName)},_mouseDown:function(b){if(!c){this._mouseStarted&&this._mouseUp(b),this._mouseDownEvent=b;var d=this,e=b.which==1,f=typeof this.options.cancel=="string"&&b.target.nodeName?a(b.target).closest(this.options.cancel).length:!1;if(!e||f||!this._mouseCapture(b))return!0;this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){d.mouseDelayMet=!0},this.options.delay));if(this._mouseDistanceMet(b)&&this._mouseDelayMet(b)){this._mouseStarted=this._mouseStart(b)!==!1;if(!this._mouseStarted){b.preventDefault();return!0}}!0===a.data(b.target,this.widgetName+".preventClickEvent")&&a.removeData(b.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(a){return d._mouseMove(a)},this._mouseUpDelegate=function(a){return d._mouseUp(a)},a(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),b.preventDefault(),c=!0;return!0}},_mouseMove:function(b){if(a.browser.msie&&!(document.documentMode>=9)&&!b.button)return this._mouseUp(b);if(this._mouseStarted){this._mouseDrag(b);return b.preventDefault()}this._mouseDistanceMet(b)&&this._mouseDelayMet(b)&&(this._mouseStarted=this._mouseStart(this._mouseDownEvent,b)!==!1,this._mouseStarted?this._mouseDrag(b):this._mouseUp(b));return!this._mouseStarted},_mouseUp:function(b){a(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,b.target==this._mouseDownEvent.target&&a.data(b.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(b));return!1},_mouseDistanceMet:function(a){return Math.max(Math.abs(this._mouseDownEvent.pageX-a.pageX),Math.abs(this._mouseDownEvent.pageY-a.pageY))>=this.options.distance},_mouseDelayMet:function(a){return this.mouseDelayMet},_mouseStart:function(a){},_mouseDrag:function(a){},_mouseStop:function(a){},_mouseCapture:function(a){return!0}})})(jqcc);(function(a,b){a.widget("ui.draggable",a.ui.mouse,{widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){this.options.helper=="original"&&!/^(?:r|a|f)/.test(this.element.css("position"))&&(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},destroy:function(){if(!!this.element.data("draggable")){this.element.removeData("draggable").unbind(".draggable").removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy();return this}},_mouseCapture:function(b){var c=this.options;if(this.helper||c.disabled||a(b.target).is(".ui-resizable-handle"))return!1;this.handle=this._getHandle(b);if(!this.handle)return!1;c.iframeFix&&a(c.iframeFix===!0?"iframe":c.iframeFix).each(function(){a('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(a(this).offset()).appendTo("body")});return!0},_mouseStart:function(b){var c=this.options;this.helper=this._createHelper(b),this._cacheHelperProportions(),a.ui.ddmanager&&(a.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},a.extend(this.offset,{click:{left:b.pageX-this.offset.left,top:b.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(b),this.originalPageX=b.pageX,this.originalPageY=b.pageY,c.cursorAt&&this._adjustOffsetFromHelper(c.cursorAt),c.containment&&this._setContainment();if(this._trigger("start",b)===!1){this._clear();return!1}this._cacheHelperProportions(),a.ui.ddmanager&&!c.dropBehaviour&&a.ui.ddmanager.prepareOffsets(this,b),this.helper.addClass("ui-draggable-dragging"),this._mouseDrag(b,!0),a.ui.ddmanager&&a.ui.ddmanager.dragStart(this,b);return!0},_mouseDrag:function(b,c){this.position=this._generatePosition(b),this.positionAbs=this._convertPositionTo("absolute");if(!c){var d=this._uiHash();if(this._trigger("drag",b,d)===!1){this._mouseUp({});return!1}this.position=d.position}if(!this.options.axis||this.options.axis!="y")this.helper[0].style.left=this.position.left+"px";if(!this.options.axis||this.options.axis!="x")this.helper[0].style.top=this.position.top+"px";a.ui.ddmanager&&a.ui.ddmanager.drag(this,b);return!1},_mouseStop:function(b){var c=!1;a.ui.ddmanager&&!this.options.dropBehaviour&&(c=a.ui.ddmanager.drop(this,b)),this.dropped&&(c=this.dropped,this.dropped=!1);if((!this.element[0]||!this.element[0].parentNode)&&this.options.helper=="original")return!1;if(this.options.revert=="invalid"&&!c||this.options.revert=="valid"&&c||this.options.revert===!0||a.isFunction(this.options.revert)&&this.options.revert.call(this.element,c)){var d=this;a(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){d._trigger("stop",b)!==!1&&d._clear()})}else this._trigger("stop",b)!==!1&&this._clear();return!1},_mouseUp:function(b){this.options.iframeFix===!0&&a("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),a.ui.ddmanager&&a.ui.ddmanager.dragStop(this,b);return a.ui.mouse.prototype._mouseUp.call(this,b)},cancel:function(){this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear();return this},_getHandle:function(b){var c=!this.options.handle||!a(this.options.handle,this.element).length?!0:!1;a(this.options.handle,this.element).find("*").andSelf().each(function(){this==b.target&&(c=!0)});return c},_createHelper:function(b){var c=this.options,d=a.isFunction(c.helper)?a(c.helper.apply(this.element[0],[b])):c.helper=="clone"?this.element.clone().removeAttr("id"):this.element;d.parents("body").length||d.appendTo(c.appendTo=="parent"?this.element[0].parentNode:c.appendTo),d[0]!=this.element[0]&&!/(fixed|absolute)/.test(d.css("position"))&&d.css("position","absolute");return d},_adjustOffsetFromHelper:function(b){typeof b=="string"&&(b=b.split(" ")),a.isArray(b)&&(b={left:+b[0],top:+b[1]||0}),"left"in b&&(this.offset.click.left=b.left+this.margins.left),"right"in b&&(this.offset.click.left=this.helperProportions.width-b.right+this.margins.left),"top"in b&&(this.offset.click.top=b.top+this.margins.top),"bottom"in b&&(this.offset.click.top=this.helperProportions.height-b.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var b=this.offsetParent.offset();this.cssPosition=="absolute"&&this.scrollParent[0]!=document&&a.ui.contains(this.scrollParent[0],this.offsetParent[0])&&(b.left+=this.scrollParent.scrollLeft(),b.top+=this.scrollParent.scrollTop());if(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&this.offsetParent[0].tagName.toLowerCase()=="html"&&a.browser.msie)b={top:0,left:0};return{top:b.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:b.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if(this.cssPosition=="relative"){var a=this.element.position();return{top:a.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:a.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var b=this.options;b.containment=="parent"&&(b.containment=this.helper[0].parentNode);if(b.containment=="document"||b.containment=="window")this.containment=[b.containment=="document"?0:a(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,b.containment=="document"?0:a(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,(b.containment=="document"?0:a(window).scrollLeft())+a(b.containment=="document"?document:window).width()-this.helperProportions.width-this.margins.left,(b.containment=="document"?0:a(window).scrollTop())+(a(b.containment=="document"?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top];if(!/^(document|window|parent)$/.test(b.containment)&&b.containment.constructor!=Array){var c=a(b.containment),d=c[0];if(!d)return;var e=c.offset(),f=a(d).css("overflow")!="hidden";this.containment=[(parseInt(a(d).css("borderLeftWidth"),10)||0)+(parseInt(a(d).css("paddingLeft"),10)||0),(parseInt(a(d).css("borderTopWidth"),10)||0)+(parseInt(a(d).css("paddingTop"),10)||0),(f?Math.max(d.scrollWidth,d.offsetWidth):d.offsetWidth)-(parseInt(a(d).css("borderLeftWidth"),10)||0)-(parseInt(a(d).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(f?Math.max(d.scrollHeight,d.offsetHeight):d.offsetHeight)-(parseInt(a(d).css("borderTopWidth"),10)||0)-(parseInt(a(d).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=c}else b.containment.constructor==Array&&(this.containment=b.containment)},_convertPositionTo:function(b,c){c||(c=this.position);var d=b=="absolute"?1:-1,e=this.options,f=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,g=/(html|body)/i.test(f[0].tagName);return{top:c.top+this.offset.relative.top*d+this.offset.parent.top*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollTop():g?0:f.scrollTop())*d),left:c.left+this.offset.relative.left*d+this.offset.parent.left*d-(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:(this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():g?0:f.scrollLeft())*d)}},_generatePosition:function(b){var c=this.options,d=this.cssPosition=="absolute"&&(this.scrollParent[0]==document||!a.ui.contains(this.scrollParent[0],this.offsetParent[0]))?this.offsetParent:this.scrollParent,e=/(html|body)/i.test(d[0].tagName),f=b.pageX,g=b.pageY;if(this.originalPosition){var h;if(this.containment){if(this.relative_container){var i=this.relative_container.offset();h=[this.containment[0]+i.left,this.containment[1]+i.top,this.containment[2]+i.left,this.containment[3]+i.top]}else h=this.containment;b.pageX-this.offset.click.left<h[0]&&(f=h[0]+this.offset.click.left),b.pageY-this.offset.click.top<h[1]&&(g=h[1]+this.offset.click.top),b.pageX-this.offset.click.left>h[2]&&(f=h[2]+this.offset.click.left),b.pageY-this.offset.click.top>h[3]&&(g=h[3]+this.offset.click.top)}if(c.grid){var j=c.grid[1]?this.originalPageY+Math.round((g-this.originalPageY)/c.grid[1])*c.grid[1]:this.originalPageY;g=h?j-this.offset.click.top<h[1]||j-this.offset.click.top>h[3]?j-this.offset.click.top<h[1]?j+c.grid[1]:j-c.grid[1]:j:j;var k=c.grid[0]?this.originalPageX+Math.round((f-this.originalPageX)/c.grid[0])*c.grid[0]:this.originalPageX;f=h?k-this.offset.click.left<h[0]||k-this.offset.click.left>h[2]?k-this.offset.click.left<h[0]?k+c.grid[0]:k-c.grid[0]:k:k}}return{top:g-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollTop():e?0:d.scrollTop()),left:f-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+(a.browser.safari&&a.browser.version<526&&this.cssPosition=="fixed"?0:this.cssPosition=="fixed"?-this.scrollParent.scrollLeft():e?0:d.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]!=this.element[0]&&!this.cancelHelperRemoval&&this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(b,c,d){d=d||this._uiHash(),a.ui.plugin.call(this,b,[c,d]),b=="drag"&&(this.positionAbs=this._convertPositionTo("absolute"));return a.Widget.prototype._trigger.call(this,b,c,d)},plugins:{},_uiHash:function(a){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),a.extend(a.ui.draggable,{version:"1.8.18"}),a.ui.plugin.add("draggable","connectToSortable",{start:function(b,c){var d=a(this).data("draggable"),e=d.options,f=a.extend({},c,{item:d.element});d.sortables=[],a(e.connectToSortable).each(function(){var c=a.data(this,"sortable");c&&!c.options.disabled&&(d.sortables.push({instance:c,shouldRevert:c.options.revert}),c.refreshPositions(),c._trigger("activate",b,f))})},stop:function(b,c){var d=a(this).data("draggable"),e=a.extend({},c,{item:d.element});a.each(d.sortables,function(){this.instance.isOver?(this.instance.isOver=0,d.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(b),this.instance.options.helper=this.instance.options._helper,d.options.helper=="original"&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",b,e))})},drag:function(b,c){var d=a(this).data("draggable"),e=this,f=function(b){var c=this.offset.click.top,d=this.offset.click.left,e=this.positionAbs.top,f=this.positionAbs.left,g=b.height,h=b.width,i=b.top,j=b.left;return a.ui.isOver(e+c,f+d,i,j,g,h)};a.each(d.sortables,function(f){this.instance.positionAbs=d.positionAbs,this.instance.helperProportions=d.helperProportions,this.instance.offset.click=d.offset.click,this.instance._intersectsWith(this.instance.containerCache)?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=a(e).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return c.helper[0]},b.target=this.instance.currentItem[0],this.instance._mouseCapture(b,!0),this.instance._mouseStart(b,!0,!0),this.instance.offset.click.top=d.offset.click.top,this.instance.offset.click.left=d.offset.click.left,this.instance.offset.parent.left-=d.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=d.offset.parent.top-this.instance.offset.parent.top,d._trigger("toSortable",b),d.dropped=this.instance.element,d.currentItem=d.element,this.instance.fromOutside=d),this.instance.currentItem&&this.instance._mouseDrag(b)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",b,this.instance._uiHash(this.instance)),this.instance._mouseStop(b,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),d._trigger("fromSortable",b),d.dropped=!1)})}}),a.ui.plugin.add("draggable","cursor",{start:function(b,c){var d=a("body"),e=a(this).data("draggable").options;d.css("cursor")&&(e._cursor=d.css("cursor")),d.css("cursor",e.cursor)},stop:function(b,c){var d=a(this).data("draggable").options;d._cursor&&a("body").css("cursor",d._cursor)}}),a.ui.plugin.add("draggable","opacity",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("opacity")&&(e._opacity=d.css("opacity")),d.css("opacity",e.opacity)},stop:function(b,c){var d=a(this).data("draggable").options;d._opacity&&a(c.helper).css("opacity",d._opacity)}}),a.ui.plugin.add("draggable","scroll",{start:function(b,c){var d=a(this).data("draggable");d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"&&(d.overflowOffset=d.scrollParent.offset())},drag:function(b,c){var d=a(this).data("draggable"),e=d.options,f=!1;if(d.scrollParent[0]!=document&&d.scrollParent[0].tagName!="HTML"){if(!e.axis||e.axis!="x")d.overflowOffset.top+d.scrollParent[0].offsetHeight-b.pageY<e.scrollSensitivity?d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop+e.scrollSpeed:b.pageY-d.overflowOffset.top<e.scrollSensitivity&&(d.scrollParent[0].scrollTop=f=d.scrollParent[0].scrollTop-e.scrollSpeed);if(!e.axis||e.axis!="y")d.overflowOffset.left+d.scrollParent[0].offsetWidth-b.pageX<e.scrollSensitivity?d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft+e.scrollSpeed:b.pageX-d.overflowOffset.left<e.scrollSensitivity&&(d.scrollParent[0].scrollLeft=f=d.scrollParent[0].scrollLeft-e.scrollSpeed)}else{if(!e.axis||e.axis!="x")b.pageY-a(document).scrollTop()<e.scrollSensitivity?f=a(document).scrollTop(a(document).scrollTop()-e.scrollSpeed):a(window).height()-(b.pageY-a(document).scrollTop())<e.scrollSensitivity&&(f=a(document).scrollTop(a(document).scrollTop()+e.scrollSpeed));if(!e.axis||e.axis!="y")b.pageX-a(document).scrollLeft()<e.scrollSensitivity?f=a(document).scrollLeft(a(document).scrollLeft()-e.scrollSpeed):a(window).width()-(b.pageX-a(document).scrollLeft())<e.scrollSensitivity&&(f=a(document).scrollLeft(a(document).scrollLeft()+e.scrollSpeed))}f!==!1&&a.ui.ddmanager&&!e.dropBehaviour&&a.ui.ddmanager.prepareOffsets(d,b)}}),a.ui.plugin.add("draggable","snap",{start:function(b,c){var d=a(this).data("draggable"),e=d.options;d.snapElements=[],a(e.snap.constructor!=String?e.snap.items||":data(draggable)":e.snap).each(function(){var b=a(this),c=b.offset();this!=d.element[0]&&d.snapElements.push({item:this,width:b.outerWidth(),height:b.outerHeight(),top:c.top,left:c.left})})},drag:function(b,c){var d=a(this).data("draggable"),e=d.options,f=e.snapTolerance,g=c.offset.left,h=g+d.helperProportions.width,i=c.offset.top,j=i+d.helperProportions.height;for(var k=d.snapElements.length-1;k>=0;k--){var l=d.snapElements[k].left,m=l+d.snapElements[k].width,n=d.snapElements[k].top,o=n+d.snapElements[k].height;if(!(l-f<g&&g<m+f&&n-f<i&&i<o+f||l-f<g&&g<m+f&&n-f<j&&j<o+f||l-f<h&&h<m+f&&n-f<i&&i<o+f||l-f<h&&h<m+f&&n-f<j&&j<o+f)){d.snapElements[k].snapping&&d.options.snap.release&&d.options.snap.release.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=!1;continue}if(e.snapMode!="inner"){var p=Math.abs(n-j)<=f,q=Math.abs(o-i)<=f,r=Math.abs(l-h)<=f,s=Math.abs(m-g)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n-d.helperProportions.height,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l-d.helperProportions.width}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m}).left-d.margins.left)}var t=p||q||r||s;if(e.snapMode!="outer"){var p=Math.abs(n-i)<=f,q=Math.abs(o-j)<=f,r=Math.abs(l-g)<=f,s=Math.abs(m-h)<=f;p&&(c.position.top=d._convertPositionTo("relative",{top:n,left:0}).top-d.margins.top),q&&(c.position.top=d._convertPositionTo("relative",{top:o-d.helperProportions.height,left:0}).top-d.margins.top),r&&(c.position.left=d._convertPositionTo("relative",{top:0,left:l}).left-d.margins.left),s&&(c.position.left=d._convertPositionTo("relative",{top:0,left:m-d.helperProportions.width}).left-d.margins.left)}!d.snapElements[k].snapping&&(p||q||r||s||t)&&d.options.snap.snap&&d.options.snap.snap.call(d.element,b,a.extend(d._uiHash(),{snapItem:d.snapElements[k].item})),d.snapElements[k].snapping=p||q||r||s||t}}}),a.ui.plugin.add("draggable","stack",{start:function(b,c){var d=a(this).data("draggable").options,e=a.makeArray(a(d.stack)).sort(function(b,c){return(parseInt(a(b).css("zIndex"),10)||0)-(parseInt(a(c).css("zIndex"),10)||0)});if(!!e.length){var f=parseInt(e[0].style.zIndex)||0;a(e).each(function(a){this.style.zIndex=f+a}),this[0].style.zIndex=f+e.length}}}),a.ui.plugin.add("draggable","zIndex",{start:function(b,c){var d=a(c.helper),e=a(this).data("draggable").options;d.css("zIndex")&&(e._zIndex=d.css("zIndex")),d.css("zIndex",e.zIndex)},stop:function(b,c){var d=a(this).data("draggable").options;d._zIndex&&a(c.helper).css("zIndex",d._zIndex)}})})(jqcc);(function($){jqcc.fn.extend({slimScroll:function(options){var defaults={wheelStep:20,width:'auto',height:'auto',size:'7px',color:'#000',position:'right',distance:'1px',start:'top',opacity:.4,alwaysVisible:false,railVisible:false,railColor:'#333',railOpacity:'0.2',railClass:'slimScrollRail',barClass:'slimScrollBar',wrapperClass:'slimScrollDiv',allowPageScroll:false,scroll:0,resize:0};var o=ops=$.extend(defaults,options);this.each(function(){var isOverPanel,isOverBar,isDragg,queueHide,barHeight,percentScroll,divS='<div></div>',minBarHeight=30,releaseScroll=false,wheelStep=parseInt(o.wheelStep),cwidth=o.width,cheight=o.height,size=o.size,color=o.color,position=o.position,distance=o.distance,start=o.start,opacity=o.opacity,alwaysVisible=o.alwaysVisible,railVisible=o.railVisible,railColor=o.railColor,railOpacity=o.railOpacity,allowPageScroll=o.allowPageScroll,scroll=o.scroll;resize=o.resize;var me=$(this);if(me.parent().hasClass('slimScrollDiv')){if(scroll){bar=me.parent().find('.slimScrollBar');rail=me.parent().find('.slimScrollRail');getBarHeight();loc=me.outerHeight()-bar.outerHeight();bar.css({top:loc});scrollContent(0,true);}
if(resize){bar=me.parent().find('.slimScrollBar');rail=me.parent().find('.slimScrollRail');getBarHeight();}
return;}
var wrapper=$(divS).addClass(o.wrapperClass).css({position:'relative',overflow:'hidden',width:cwidth,height:cheight});var cw=me;while(parseInt(cw.css('width'))<=0){cw=cw.parent();}
if(typeof cw=='undefined'||typeof cw.css('width')=='undefined'||cw.css('width')=='auto'){}else{newwidth=(cw.css('width').replace('px','')-10)+'px';me.css({width:newwidth});}
me.css({overflow:'hidden'});if(position=='right'){me.css({'padding-right':'15px'});}else{me.css({'padding-left':'15px'});}
var rail=$(divS).addClass(o.railClass).css({width:size,height:'100%',position:'absolute',top:0,display:(alwaysVisible&&railVisible)?'block':'none','border-radius':size,background:railColor,opacity:railOpacity,zIndex:90});var bar=$(divS).addClass(o.barClass).css({background:color,width:size,position:'absolute',top:0,opacity:opacity,display:alwaysVisible?'block':'none','border-radius':size,BorderRadius:size,MozBorderRadius:size,WebkitBorderRadius:size,zIndex:99});var posCss=(position=='right')?{right:distance}:{left:distance};rail.css(posCss);bar.css(posCss);me.wrap(wrapper);me.parent().append(bar);me.parent().append(rail);bar.draggable({axis:'y',containment:'parent',start:function(){isDragg=true;},stop:function(){isDragg=false;hideBar();},drag:function(e)
{scrollContent(0,$(this).position().top,false);}});rail.hover(function(){showBar();},function(){hideBar();});bar.hover(function(){isOverBar=true;},function(){isOverBar=false;});me.hover(function(){isOverPanel=true;showBar();hideBar();},function(){isOverPanel=false;hideBar();});var _onWheel=function(e)
{if(!isOverPanel){return;}
var e=e||window.event;var delta=0;if(e.wheelDelta){delta=-e.wheelDelta/120;}
if(e.detail){delta=e.detail/3;}
scrollContent(delta,true);if(e.preventDefault&&!releaseScroll){e.preventDefault();}
if(!releaseScroll){e.returnValue=false;}}
function scrollContent(y,isWheel,isJump)
{var delta=y;if(isWheel)
{delta=parseInt(bar.css('top'))+y*wheelStep/100*bar.outerHeight();var maxTop=me.outerHeight()-bar.outerHeight();delta=Math.min(Math.max(delta,0),maxTop);bar.css({top:delta+'px'});}
percentScroll=parseInt(bar.css('top'))/(me.outerHeight()-bar.outerHeight());delta=percentScroll*(me[0].scrollHeight-me.outerHeight());if(isJump)
{delta=y;var offsetTop=delta/me[0].scrollHeight*me.outerHeight();bar.css({top:offsetTop+'px'});}
me.scrollTop(delta);showBar();hideBar();}
var attachWheel=function()
{if(window.addEventListener)
{this.addEventListener('DOMMouseScroll',_onWheel,false);this.addEventListener('mousewheel',_onWheel,false);}
else
{document.attachEvent("onmousewheel",_onWheel)}}
attachWheel();function getBarHeight(){barHeight=0;if(me[0].scrollHeight!=0){barHeight=Math.max((me.outerHeight()/me[0].scrollHeight)*me.outerHeight(),minBarHeight);}
bar.css({height:barHeight+'px'});}
getBarHeight();function showBar()
{getBarHeight();clearTimeout(queueHide);releaseScroll=allowPageScroll&&percentScroll==~~percentScroll;if(barHeight>=me.outerHeight()){releaseScroll=true;return;}
bar.stop(true,true).fadeIn('fast');if(railVisible){rail.stop(true,true).fadeIn('fast');}}
function hideBar()
{if(!alwaysVisible)
{queueHide=setTimeout(function(){if(!isOverBar&&!isDragg)
{bar.fadeOut('slow');rail.fadeOut('slow');}},1000);}}
if(start=='bottom')
{bar.css({top:me.outerHeight()-bar.outerHeight()});scrollContent(0,true);}
else if(typeof start=='object')
{scrollContent($(start).position().top,null,true);if(!alwaysVisible){bar.hide();}}});return this;}});jqcc.fn.extend({slimscroll:jqcc.fn.slimScroll});})(jqcc);(function($){$.cometchat=$.cometchat||function(){var _1="/dento-chat/";var _2=[];var _3=[];_2[0]='C&agrave;i đặt';_2[1]='Nhập trạng th&aacute;i hiện tại của bạn';_2[2]='Trại th&aacute;i của t&ocirc;i';_2[3]='Online';_2[4]='Bận';_2[5]='Ẩn';_2[6]='';_2[7]='';_2[8]='Vui l&ograve;ng đăng nhập trước';_2[9]='Đang Online';_2[10]='T&ocirc;i ';_2[11]='Offline';_2[12]='Đang Online';_2[13]='Tắt &acirc;m th&ocirc;ng b&aacute;o';_2[14]='No users online at the moment. Please try again later.';_2[15]='Tin mới ..';_2[16]='';_2[17]='Offline';_2[18]='Find a user';_2[19]='<br/><span style=\'color:#999\'>is online</span>';_2[20]='<br/><span style=\'color:#999\'>is offline</span>';_2[21]='<br/><span style=\'color:#999\'>is online (busy)</span>';_2[22]='Trạng th&aacute;i của t&ocirc;i';_2[23]='T&ocirc;i đang...';_2[24]='Tắt cửa sổ th&ocirc;ng b&aacute;o';_2[25]='';_2[26]='Start chatting!';_2[27]='Close this bar';_2[28]='No users online at the moment. Please try again later.';_2[29]='No friends online at the moment. Please try again later.';_2[30]='I\'m available';_2[31]='I\'m busy';_2[32]='I\'m offline';_2[33]='I\'m offline';_2[34]='I\'m away';_2[35]=' | ';_2[36]='And ';_2[37]=' more notifications';_2[38]='This popup is already open. Please close the existing popup and try again.';_2[39]='Navigating away from this page will close your chat popups.';_2[40]='Others';_2[41]='Loading...';_2[42]='';_2[43]='My Name';_2[44]='Trạng th&aacute;i của t&ocirc;i';_2[45]='Type your Name/Status and hit the enter key!';_3['home']=['home','Trang chủ','/','','','','','',''];_3['chatrooms']=['chatrooms','Tư vấn hỏi đ&aacute;p online','/dento-chat/modules/chatrooms/index.php','_popup','535','300','','1','1'];_3['announcements']=['announcements','Th&ocirc;ng b&aacute;o','/dento-chat/modules/announcements/index.php','_popup','280','300','','1',''];_3['share']=['share','Chia sẻ trang hiện tại','/dento-chat/modules/share/index.php','_popup','350','50','','1',''];_3['scrolltotop']=['scrolltotop','L&ecirc;n tr&ecirc;n','javascript:jqcc.cometchat.scrollToTop();','','','','','','1'];var _4=['smilies','clearconversation','chattime','chathistory'];var _5=0;var _6=1;var _7='default';var _8=3000;var _9=12000;var _a='cc_';var _b='fluid';var _c=300;var _d='center';var _e=0;var _f=1;var _10=1;var _11=1;var _12=10;var _13=40;var _14=10000;var _15=300;var _16=1;var _17=1;var _18=1;var _19=5000;var _1a=15000;var _1b=0;var _1c=1;var _1d=0;var _1e=0;var _1f=0;var _20=0;var _21=0;var _22=[''];var _23=0;var _24={};var _25={};var _26={};var _27="";var _28=0;var _29=0;var _2a=true;var _2b=0;var ie6=false;var _2c;var _2d;var _2e=_8;var _2f=1;var _30=0;var _31=0;var _32=0;var _33="";var _34=document.title;var _35=0;var _36={};var _37={};var _38={};var _39={};var _3a={};var _3b={};var _3c=0;var _3d=0;var _3e={};var _3f={};var _40={};var _41={};var _42=new Date();var _43=_42.getDate();var _44=Math.floor(_42.getTime()/1000);var _45=/([^\x00-\x80]+)|([&][#])+/;var _46=0;var _47;var _48=_44;var _49=0;var _4a;var _4b=0;var _4c;var _4d;var _4e="mobilewebapp";var _4f=$.cookie(_a+"data");var _50=navigator.userAgent.match(/ipad|ipod|iphone|android|windows ce|blackberry|palm|symbian/i);var _51=0;var _52=0;var _53="0";var _54="get";var _55="10000";var _56="";$.ajaxSetup({scriptCharset:"utf-8",cache:"false"});if(_6==1){$("<div id=\"cometchat_flashcontent\"></div>").appendTo($("body"));so=new SWFObjectCC(_1+"swf/sound.swf?3","cometchatbeep","1","1","8","#000");so.addParam("allowscriptaccess","always");so.addParam("flashvars","base="+_1);so.write("cometchat_flashcontent");}function _57(_58){var _59=navigator.appName.indexOf("Microsoft")!=-1;return(_59)?window[_58]:document[_58];};function _5a(){try{_57("cometchatbeep").beep();}catch(error){_6=0;}};function _5b(id,_5c,_5d){if(_4e==""){$("#cometchat_tooltip").css("display","none");$("#cometchat_tooltip").removeClass("cometchat_tooltip_left").css("left","-100000px");$("#cometchat_tooltip .cometchat_tooltip_content").html(_5c);var pos=$("#"+id).offset();var _5e=$("#"+id).width();var _5f=$("#cometchat_tooltip").width();if(_5d==1){$("#cometchat_tooltip").css("left",(pos.left+_5e)-16).addClass("cometchat_tooltip_left");}else{var _60=(pos.left+_5e)-_5f;_60+=16;$("#cometchat_tooltip").removeClass("cometchat_tooltip_left").css("left",_60);}$("#cometchat_tooltip").css("display","block");if(ie6){_61();}}};function _62(_63){var _64=$("#cometchat_optionsbutton_popup .cometchat_statustextarea").val();if(_64!=""){$.ajax({url:_1+"cometchat_send.php",data:{statusmessage:_64,token:_56,basedata:_4f},dataType:"jsonp",type:_54,timeout:_55,success:function(_65){$(_63).blur();}});}};function _66(_67,_68){if(_67.keyCode==13&&_67.shiftKey==0){_62();return false;}};function _69(_6a){var _6b=$("#cometchat_optionsbutton_popup .cometchat_guestnametextbox").val();if(_6b!=""){$.ajax({url:_1+"cometchat_send.php",data:{guestname:_6b,basedata:_4f},dataType:"jsonp",type:_54,timeout:_55,success:function(_6c){$(_6a).blur();}});}};function _6d(_6e,_6f){if(_6e.keyCode==13&&_6e.shiftKey==0){_69(_6f);return false;}};function _70(id){if(_46==id){_46=0;}};function _71(id){if(jqcc().slimScroll){$("#cometchat_tabcontenttext_"+id).slimScroll({scroll:"1"});}else{setTimeout(function(){$("#cometchat_tabcontenttext_"+id).scrollTop(50000);},100);}};function _72(_73,_74,id,_75){if((_73.keyCode==13&&_73.shiftKey==0)||_75==1){var _76=$(_74).val();_76=_76.replace(/^\s+|\s+$/g,"");$(_74).val("");$(_74).css("height","18px");$("#cometchat_user_"+id+"_popup .slimScrollDiv").css("height","211px");$("#cometchat_user_"+id+"_popup .cometchat_tabcontenttext").css("height","200px");$(_74).css("overflow-y","hidden");$(_74).focus();if(_76!=""){if(_3b[id]!=1){$.ajax({url:_1+"cometchat_send.php",data:{to:id,message:_76,token:_56,basedata:_4f},dataType:"jsonp",type:_54,timeout:_55,success:function(_77){if(_77){_f8(id,_76,"1","1",_77,1,Math.floor(new Date().getTime()/1000));_71(id);}_70(id);_2f=1;if(_2e>_8){_2e=_8;clearTimeout(_2c);_2c=setTimeout(function(){_78();},_8);}}});}else{jqcc.ccjabber.sendMessage(id,_76);}}return false;}};function _79(_7a,_7b,id){if(_7a.keyCode==13&&_7a.shiftKey==0){$(_7b).val("");}var _7c=_7b.clientHeight;var _7d=94;clearTimeout(_47);_46=id;_47=setTimeout(function(){_70(id);},_14);if(_7d>_7c){_7c=Math.max(_7b.scrollHeight,_7c);if(_7d){_7c=Math.min(_7d,_7c);}if(_7c>_7b.clientHeight){$(_7b).css("height",_7c+4+"px");$("#cometchat_user_"+id+"_popup .cometchat_tabcontenttext").css("height",218-(_7c+4)+"px");$("#cometchat_user_"+id+"_popup .slimScrollDiv").css("height",229-(_7c+4)+"px");}}else{$(_7b).css("overflow-y","auto");}};function _7e(){$("#cometchat_optionsbutton_popup .busy").css("text-decoration","none");$("#cometchat_optionsbutton_popup .invisible").css("text-decoration","none");$("#cometchat_optionsbutton_popup .available").css("text-decoration","none");_7f();};function _7f(){$("#cometchat_userstab_icon").removeClass("cometchat_user_available2");$("#cometchat_userstab_icon").removeClass("cometchat_user_busy2");$("#cometchat_userstab_icon").removeClass("cometchat_user_invisible2");$("#cometchat_userstab_icon").removeClass("cometchat_user_away2");};function _80(_81){$.ajax({url:_1+"cometchat_send.php",data:{status:_81,token:_56,basedata:_4f},dataType:"jsonp",type:_54,timeout:_55,success:function(_82){if(_81!="away"){_4c=_81;}}});};function _83(_84){_29=1;_7e();$("#cometchat_userstab_icon").addClass("cometchat_user_invisible2");if(_84!=1){_80("offline");}$("#cometchat_userstab_popup").removeClass("cometchat_tabopen");$("#cometchat_userstab").removeClass("cometchat_userstabclick").removeClass("cometchat_tabclick");$("#cometchat_optionsbutton_popup").removeClass("cometchat_tabopen");$("#cometchat_optionsbutton").removeClass("cometchat_tabclick");_85("buddylist","0");$("#cometchat_userstab_text").html(_2[17]);if(_27!=""){$("#cometchat_user_"+_27+" .cometchat_closebox_bottom").click();_27="";_85("openChatboxId",_27);}for(chatbox in _3e){if(_3e.hasOwnProperty(chatbox)){if(_3e[chatbox]!=null){$("#cometchat_user_"+chatbox+" .cometchat_closebox_bottom").click();}}}$(".cometchat_container").remove();if(typeof window.cometuncall_function=="function"){cometuncall_function(cometid);}};function _86(){$("#cometchat_optionsbutton_popup .cometchat_gooffline").click(function(){_83();});$("#cometchat_soundnotifications").click(function(_87){var _88="false";if($("#cometchat_soundnotifications").is(":checked")){_88="true";}$.cookie(_a+"sound",_88,{path:"/",expires:365});});$("#cometchat_popupnotifications").click(function(_89){var _8a="false";if($("#cometchat_popupnotifications").is(":checked")){_8a="true";}$.cookie(_a+"popup",_8a,{path:"/",expires:365});});$("#cometchat_optionsbutton_popup .available").click(function(_8b){_7e();$("#cometchat_userstab_icon").addClass("cometchat_user_available2");$(this).css("text-decoration","underline");_80("available");});$("#cometchat_optionsbutton_popup .cometchat_statusbutton").click(function(_8c){_62();});$("#cometchat_optionsbutton_popup #guestsname .cometchat_guestnamebutton").click(function(_8d){_69();});$("#cometchat_optionsbutton_popup .busy").click(function(_8e){_7e();$("#cometchat_userstab_icon").addClass("cometchat_user_busy2");$(this).css("text-decoration","underline");_80("busy");});$("#cometchat_optionsbutton_popup .invisible").click(function(_8f){_7e();$("#cometchat_userstab_icon").addClass("cometchat_user_invisible2");$(this).css("text-decoration","underline");_80("invisible");});$("#cometchat_optionsbutton_popup .cometchat_statustextarea").keydown(function(_90){return _66(_90,this);});$("#cometchat_optionsbutton_popup .cometchat_guestnametextbox").keydown(function(_91){return _6d(_91,this);});$("#cometchat_optionsbutton").mouseover(function(){if(!$("#cometchat_optionsbutton_popup").hasClass("cometchat_tabopen")){if(_28==0){if(_4b==0){_5b("cometchat_optionsbutton",_2[0]);}}else{if(_4b==0){_5b("cometchat_optionsbutton",_2[8]);}}}$(this).addClass("cometchat_tabmouseover");});$("#cometchat_optionsbutton").mouseout(function(){$(this).removeClass("cometchat_tabmouseover");if(_4b==0){$("#cometchat_tooltip").css("display","none");}});$("#cometchat_optionsbutton").click(function(){if(_33!=""){$("#cometchat_trayicon_"+_33+"_popup").removeClass("cometchat_tabopen");$("#cometchat_trayicon_"+_33).removeClass("cometchat_trayclick");_33="";_85("trayOpen",_33);}if(_28==0){if(_29==1){_29=0;$("#cometchat_userstab_text").html(_2[9]+" ("+_32+")");_78(1);$("#cometchat_optionsbutton_popup .available").click();}$("#cometchat_tooltip").css("display","none");var _92=$("#cometchat_base").position().left;var _93=$("#cometchat_base").width();$("#cometchat_optionsbutton_popup").css("left",_92+_93-223-32);$(this).toggleClass("cometchat_tabclick");$("#cometchat_optionsbutton_popup").toggleClass("cometchat_tabopen");$("#cometchat_optionsbutton").toggleClass("cometchat_optionsimages_click");$("#cometchat_userstab_popup").removeClass("cometchat_tabopen");$("#cometchat_userstab").removeClass("cometchat_userstabclick").removeClass("cometchat_tabclick");_85("buddylist","0");if($.cookie(_a+"sound")){if($.cookie(_a+"sound")=="true"){$("#cometchat_soundnotifications").attr("checked",true);}else{$("#cometchat_soundnotifications").attr("checked",false);}}if($.cookie(_a+"popup")){if($.cookie(_a+"popup")=="true"){$("#cometchat_popupnotifications").attr("checked",true);}else{$("#cometchat_popupnotifications").attr("checked",false);}}}else{if(_2[16]!=""){location.href=_2[16];}}});$("#cometchat_optionsbutton_popup .cometchat_userstabtitle").click(function(){$("#cometchat_optionsbutton").click();});$("#cometchat_optionsbutton_popup .cometchat_userstabtitle").mouseenter(function(){$("#cometchat_optionsbutton_popup .cometchat_userstabtitle .cometchat_minimizebox").addClass("cometchat_chatboxtraytitlemouseover");});$("#cometchat_optionsbutton_popup .cometchat_userstabtitle").mouseleave(function(){$("#cometchat_optionsbutton_popup .cometchat_userstabtitle .cometchat_minimizebox").removeClass("cometchat_chatboxtraytitlemouseover");});};function _94(){var _95="";var _96=0;for(chatbox in _3e){if(_3e.hasOwnProperty(chatbox)){if(_3e[chatbox]!=null){if(!Number(_3e[chatbox])){_3e[chatbox]=0;}_95+=chatbox+"|"+_3e[chatbox]+",";if(_3e[chatbox]>0){_96=1;}}}}_35=_96;_95=_95.slice(0,-1);_85("activeChatboxes",_95);};function _97(id,_98,_99,_9a,_9b,_9c,_9d,_9e){if(id==null||id==""){return;}if(_36[id]==null||_36[id]==""){if(_40[id]===undefined){_40[id]=1;if(!isNaN(id)){$.ajax({url:_1+"cometchat_getid.php",data:{userid:id,basedata:_4f},dataType:"jsonp",type:_54,timeout:_55,cache:false,success:function(_9f){if(_9f){_98=_36[id]=_9f.n;_99=_38[id]=_9f.s;_9a=_37[id]=_9f.m;_9b=_39[id]=_9f.a;_9c=_3a[id]=_9f.l;if(_3f[id]!=null){$("#cometchat_user_"+id+" .cometchat_closebox_bottom_status").removeClass("cometchat_available").removeClass("cometchat_busy").removeClass("cometchat_offline").removeClass("cometchat_away").addClass("cometchat_"+_99);if($("#cometchat_user_"+id+"_popup").length>0){$("#cometchat_user_"+id+"_popup .cometchat_tabsubtitle .cometchat_message").html(_9a);}}_40[id]=5;if(id!=null&&id!=""&&_98!=null&&_98!=""){_a1(id,_98,_99,_9a,_9b,_9c,_9d,_9e);}}},error:function(_a0){_40[id]=5;}});}else{setTimeout(function(){_97(id,_36[id],_38[id],_37[id],_39[id],_3a[id],_9d,_9e);},5000);}}else{if(_40[id]<5){_40[id]++;setTimeout(function(){_97(id,_36[id],_38[id],_37[id],_39[id],_3a[id],_9d,_9e);},5000);}}}else{_a1(id,_36[id],_38[id],_37[id],_39[id],_3a[id],_9d,_9e);}};function _a1(id,_a2,_a3,_a4,_a5,_a6,_a7,_a8){if(_3f[id]!=null){if(!$("#cometchat_user_"+id).hasClass("cometchat_tabclick")&&_a7!=1){if(_27!=""){$("#cometchat_user_"+_27+"_popup").removeClass("cometchat_tabopen");$("#cometchat_user_"+_27).removeClass("cometchat_tabclick").removeClass("cometchat_usertabclick");_27="";_85("openChatboxId",_27);}if(($("#cometchat_user_"+id).offset().left<($("#cometchat_chatboxes").offset().left+$("#cometchat_chatboxes").width()))&&($("#cometchat_user_"+id).offset().left-$("#cometchat_chatboxes").offset().left)>=0){$("#cometchat_user_"+id).click();}else{$("#cometchat_chatboxes_wide .cometchat_tabalert").css("display","none");var ms=_1c;if(_a9("initialize")==1){ms=0;}$("#cometchat_chatboxes").scrollToCC("#cometchat_user_"+id,ms,function(){$("#cometchat_user_"+id).click();_b5();_b4();});}}_b5();return;}$("#cometchat_chatboxes_wide").width($("#cometchat_chatboxes_wide").width()+152);_d1(1);shortname=_a2;longname=_a2;$("<span/>").attr("id","cometchat_user_"+id).addClass("cometchat_tab").html("<div class=\"cometchat_user_shortname\">"+shortname+"</div>").appendTo($("#cometchat_chatboxes_wide"));$("#cometchat_user_"+id).append("<div class=\"cometchat_closebox_bottom_status cometchat_"+_a3+"\"></div>");$("#cometchat_user_"+id).append("<div class=\"cometchat_closebox_bottom\"></div>");$("#cometchat_user_"+id+" .cometchat_closebox_bottom").mouseenter(function(){$(this).addClass("cometchat_closebox_bottomhover");});$("#cometchat_user_"+id+" .cometchat_closebox_bottom").mouseleave(function(){$(this).removeClass("cometchat_closebox_bottomhover");});$("#cometchat_user_"+id+" .cometchat_closebox_bottom").click(function(){$("#cometchat_user_"+id+"_popup").remove();$("#cometchat_user_"+id).remove();if(_27==id){_27="";_85("openChatboxId",_27);}$("#cometchat_chatboxes_wide").width($("#cometchat_chatboxes_wide").width()-152);$("#cometchat_chatboxes").scrollToCC("-=152px");_d1();_3e[id]=null;_3f[id]=null;_41[id]=0;_94();});var _aa="";if(_3b[id]!=1){var _ab=_4.length;if(_ab>0){if(_ab>8){_aa+="<div style=\"clear:both;padding-bottom:2px\"></div>";}_aa+="<div class=\"cometchat_plugins\">";for(var i=0;i<_ab;i++){var _a2="cc"+_4[i];if(typeof($[_a2])=="object"){_aa+="<img src=\""+_1+"plugins/"+_4[i]+"/icon.png\" class=\"cometchat_pluginsicon\" title=\""+$[_a2].getTitle()+"\" onclick=\"javascript:jqcc."+_a2+".init("+id+");\">";}}_aa+="</div>";}}var _ac="";var _ad="";if(_a6!=""){_ac="<a href=\""+_a6+"\">";_ad="</a>";}var _ae="";if(_a5!=""){_ae="<div class=\"cometchat_avatarbox\">"+_ac+"<img src=\""+_a5+"\" class=\"cometchat_avatar\" />"+_ad+"</div>";}$("<div/>").attr("id","cometchat_user_"+id+"_popup").addClass("cometchat_tabpopup").css("display","none").html("<div class=\"cometchat_tabtitle\"><div class=\"cometchat_name\">"+_ac+longname+_ad+"<span id=\"cometchat_typing_"+id+"\" class=\"cometchat_typing\"></span></div></div><div class=\"cometchat_tabsubtitle\">"+_ae+"<div class=\"cometchat_message\">"+_a4+"</div>"+_aa+"<div style=\"clear:both\"></div>"+"</div><div class=\"cometchat_tabcontent\"><div class=\"cometchat_tabcontenttext\" id=\"cometchat_tabcontenttext_"+id+"\"></div><div class=\"cometchat_tabcontentinput\"><textarea class=\"cometchat_textarea\"></textarea><div class=\"cometchat_tabcontentsubmit\"></div></div><div style=\"clear:both\"></div></div>").appendTo($("#cometchat"));if(jqcc().slimScroll){$("#cometchat_user_"+id+"_popup .cometchat_tabcontenttext").slimScroll({height:"211px"});}$("#cometchat_user_"+id+"_popup .cometchat_textarea").keydown(function(_af){return _72(_af,this,id);});$("#cometchat_user_"+id+"_popup .cometchat_tabcontentsubmit").click(function(_b0){return _72(_b0,$("#cometchat_user_"+id+"_popup .cometchat_textarea"),id,1);});$("#cometchat_user_"+id+"_popup .cometchat_textarea").keyup(function(_b1){return _79(_b1,this,id);});$("#cometchat_user_"+id+"_popup .cometchat_tabtitle").append("<div class=\"cometchat_closebox\"></div><div class=\"cometchat_minimizebox\"></div><br clear=\"all\"/>");$("#cometchat_user_"+id+"_popup .cometchat_tabtitle .cometchat_closebox").mouseenter(function(){$(this).addClass("cometchat_chatboxmouseoverclose");$("#cometchat_user_"+id+"_popup .cometchat_tabtitle .cometchat_minimizebox").removeClass("cometchat_chatboxtraytitlemouseover");});$("#cometchat_user_"+id+"_popup .cometchat_tabtitle .cometchat_closebox").mouseleave(function(){$(this).removeClass("cometchat_chatboxmouseoverclose");$("#cometchat_user_"+id+"_popup .cometchat_tabtitle .cometchat_minimizebox").addClass("cometchat_chatboxtraytitlemouseover");});$("#cometchat_user_"+id+"_popup .cometchat_tabtitle .cometchat_closebox").click(function(){$("#cometchat_user_"+id+"_popup").remove();$("#cometchat_user_"+id).remove();if(_27==id){_27="";_85("openChatboxId",_27);}$("#cometchat_chatboxes_wide").width($("#cometchat_chatboxes_wide").width()-152);$("#cometchat_chatboxes").scrollToCC("-=152px");_d1();_3f[id]=null;_3e[id]=null;_41[id]=0;_94();});$("#cometchat_user_"+id+"_popup .cometchat_tabtitle").click(function(){$("#cometchat_user_"+id).click();});$("#cometchat_user_"+id+"_popup .cometchat_tabtitle").mouseenter(function(){$("#cometchat_user_"+id+"_popup .cometchat_tabtitle .cometchat_minimizebox").addClass("cometchat_chatboxtraytitlemouseover");});$("#cometchat_user_"+id+"_popup .cometchat_tabtitle").mouseleave(function(){$("#cometchat_user_"+id+"_popup .cometchat_tabtitle .cometchat_minimizebox").removeClass("cometchat_chatboxtraytitlemouseover");});$("#cometchat_user_"+id).mouseenter(function(){$(this).addClass("cometchat_tabmouseover");$("#cometchat_user_"+id+" .cometchat_user_shortname").addClass("cometchat_tabmouseovertext");});$("#cometchat_user_"+id).mouseleave(function(){$(this).removeClass("cometchat_tabmouseover");$("#cometchat_user_"+id+" .cometchat_user_shortname").removeClass("cometchat_tabmouseovertext");});$("#cometchat_user_"+id+"_popup").click(function(){cc_zindex+=2;$("#cometchat_base").css("z-index",100001+cc_zindex-1);$("#cometchat_userstab_popup").css("z-index",100001+cc_zindex);$("#cometchat_optionsbutton_popup").css("z-index",100001+cc_zindex);$("#cometchat_user_"+id+"_popup").css("z-index",100001+cc_zindex);});$("#cometchat_user_"+id).click(function(){cc_zindex+=2;$("#cometchat_base").css("z-index",100001+cc_zindex-1);$("#cometchat_userstab_popup").css("z-index",100001+cc_zindex);$("#cometchat_optionsbutton_popup").css("z-index",100001+cc_zindex);$("#cometchat_user_"+id+"_popup").css("z-index",100001+cc_zindex);if(_33!=""){$("#cometchat_trayicon_"+_33+"_popup").removeClass("cometchat_tabopen");$("#cometchat_trayicon_"+_33).removeClass("cometchat_trayclick");_33="";_85("trayOpen",_33);}if($("#cometchat_user_"+id+" .cometchat_tabalert").length>0){$("#cometchat_user_"+id+" .cometchat_tabalert").remove();_3f[id]=0;_3e[id]=0;_94();}if($(this).hasClass("cometchat_tabclick")){$(this).removeClass("cometchat_tabclick").removeClass("cometchat_usertabclick");$("#cometchat_user_"+id+"_popup").removeClass("cometchat_tabopen");$("#cometchat_user_"+id+" .cometchat_closebox_bottom").removeClass("cometchat_closebox_bottom_click");_27="";_85("openChatboxId",_27);}else{var _b2=$("#cometchat_base").position().left;if(($("#cometchat_user_"+id).offset().left<($("#cometchat_chatboxes").offset().left+$("#cometchat_chatboxes").width()))&&($("#cometchat_user_"+id).offset().left-$("#cometchat_chatboxes").offset().left)>=0){if(_27!=""&&_27!=id){$("#cometchat_user_"+_27+"_popup").removeClass("cometchat_tabopen");$("#cometchat_user_"+_27).removeClass("cometchat_tabclick").removeClass("cometchat_usertabclick");$("#cometchat_user_"+_27+" .cometchat_closebox_bottom").removeClass("cometchat_closebox_bottom_click");_27="";_85("openChatboxId",_27);}$("#cometchat_user_"+id+"_popup").css("left",_b2+$("#cometchat_user_"+id).position().left-77);$(this).addClass("cometchat_tabclick").addClass("cometchat_usertabclick");$("#cometchat_user_"+id+"_popup").addClass("cometchat_tabopen");$("#cometchat_user_"+id+" .cometchat_closebox_bottom").addClass("cometchat_closebox_bottom_click");_27=id;_85("openChatboxId",_27);if(_41[id]!=1&&(_a9("initialize")!=1||isNaN(id))){_bf(id);_41[id]=1;}if(ie6){_61();}}else{$("#cometchat_user_"+id+"_popup").removeClass("cometchat_tabopen");$("#cometchat_user_"+id).removeClass("cometchat_tabclick").removeClass("cometchat_usertabclick");var _b3=(($("#cometchat_user_"+id).offset().left-$("#cometchat_chatboxes_wide").offset().left))-((Math.floor(($("#cometchat_chatboxes").width()/152))-1)*152);$("#cometchat_chatboxes").scrollToCC(_b3+"px",0,function(){_b4();_b5();$("#cometchat_user_"+id).click();});}_71(id);}if(_b6("updatingsession")!=1){$("#cometchat_user_"+id+"_popup .cometchat_textarea").focus();}});if(_a7!=1){$("#cometchat_user_"+id).click();}_3e[id]=0;_3f[id]=0;_94();};function _b7(ts,id){var _b8="style=\"display:none;\"";if(typeof(jqcc.ccchattime)!="undefined"&&jqcc.ccchattime.getEnabled(id)){_b8="style=\"display:inline;\"";}var ap="";var _b9=ts.getHours();var _ba=ts.getMinutes();var _bb=ts.getDate();var _bc=ts.getMonth();if(_1b!=1){if(_b9>11){ap="pm";}else{ap="am";}if(_b9>12){_b9=_b9-12;}if(_b9==0){_b9=12;}}else{if(_b9<10){_b9="0"+_b9;}}if(_ba<10){_ba="0"+_ba;}var _bd=["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"];var _be="th";if(_bb==1||_bb==21||_bb==31){_be="st";}else{if(_bb==2||_bb==22){_be="nd";}else{if(_bb==3||_bb==23){_be="rd";}}}if(_bb!=_43){return"<span class=\"cometchat_ts\" "+_b8+">("+_b9+":"+_ba+ap+" "+_bb+_be+" "+_bd[_bc]+")</span>";}else{return"<span class=\"cometchat_ts\" "+_b8+">("+_b9+":"+_ba+ap+")</span>";}};function _bf(id){if(_3b[id]!=1){$.ajax({cache:false,url:_1+"cometchat_receive.php",data:{chatbox:id,basedata:_4f},type:_54,timeout:_55,dataType:"jsonp",success:function(_c0){if(_c0){var _c1="";var _c2=_36[id];$.each(_c0,function(_c3,_c4){if(_c3=="messages"){$.each(_c4,function(i,_c5){var _c6="";if(_c5.self==1){fromname=_2[10];_c6=" cometchat_self";}else{fromname=_c2;}var ts=new Date(_c5.sent*1000);if(!_10){fromname=fromname.split(" ")[0];}_c1+=(_c7("<div class=\"cometchat_chatboxmessage\" id=\"cometchat_message_"+_c5.id+"\"><span class=\"cometchat_chatboxmessagefrom"+_c6+"\"><strong>"+fromname+"</strong>:&nbsp;&nbsp;</span><span class=\"cometchat_chatboxmessagecontent"+_c6+"\">"+_c5.message+"</span>"+_b7(ts,_c5.from)+"</div>",_c6));});}});document.getElementById("cometchat_tabcontenttext_"+id).innerHTML="<div>"+_c1+"</div>";_71(id);}}});}else{jqcc.ccjabber.getRecentData(id);}};function _c8(id,_c9,add){if(_36[id]==null||_36[id]==""){if(_40[id]===undefined){_97(id,null,null,null,null,null,1,null);}if(_40[id]<5){setTimeout(function(){_c8(id,_c9,add);},5000);}}else{_ca(id);if(add==1){if($("#cometchat_user_"+id+" .cometchat_tabalert").length>0){_c9=parseInt($("#cometchat_user_"+id+" .cometchat_tabalert").html())+parseInt(_c9);}}if(_c9==0){$("#cometchat_user_"+id+" .cometchat_tabalert").remove();}else{if($("#cometchat_user_"+id+" .cometchat_tabalert").length>0){$("#cometchat_user_"+id+" .cometchat_tabalert").html(_c9);}else{$("<div/>").css("top","-5px").addClass("cometchat_tabalert").html(_c9).appendTo($("#cometchat_user_"+id+" .cometchat_closebox_bottom_status"));}}_3e[id]=_c9;_94();_b4();}};function _cb(){$("#cometchat_search").click(function(){var _cc=$(this).val();if(_cc==_2[18]){$("#cometchat_search").val("");$("#cometchat_search").addClass("cometchat_search_light");}});$("#cometchat_search").blur(function(){var _cd=$(this).val();if(_cd==""){$("#cometchat_search").addClass("cometchat_search_light");$("#cometchat_search").val(_2[18]);}});$("#cometchat_search").keyup(function(){var _ce=$(this).val();if(_ce.length>0&&_ce!=_2[18]){$("#cometchat_userscontent .cometchat_userlist").hide();$("#cometchat_userscontent .cometchat_userlist:icontains("+_ce+")").show();$("#cometchat_search").removeClass("cometchat_search_light");}else{$("#cometchat_userscontent .cometchat_userlist").show();}});$("#cometchat_userstab_popup .cometchat_userstabtitle").click(function(){$("#cometchat_userstab").click();});$("#cometchat_userstab_popup .cometchat_userstabtitle").mouseenter(function(){$("#cometchat_userstab_popup .cometchat_userstabtitle .cometchat_minimizebox").addClass("cometchat_chatboxtraytitlemouseover");});$("#cometchat_userstab_popup .cometchat_userstabtitle").mouseleave(function(){$("#cometchat_userstab_popup .cometchat_userstabtitle .cometchat_minimizebox").removeClass("cometchat_chatboxtraytitlemouseover");});$("#cometchat_userstab").mouseover(function(){$(this).addClass("cometchat_tabmouseover");});$("#cometchat_userstab").mouseout(function(){$(this).removeClass("cometchat_tabmouseover");});$("#cometchat_userstab").click(function(){if(_33!=""){$("#cometchat_trayicon_"+_33+"_popup").removeClass("cometchat_tabopen");$("#cometchat_trayicon_"+_33).removeClass("cometchat_trayclick");_33="";_85("trayOpen",_33);}if(_29==1){_29=0;$("#cometchat_userstab_text").html(_2[9]+" ("+_32+")");_78(1);$("#cometchat_optionsbutton_popup .available").click();}$("#cometchat_optionsbutton_popup").removeClass("cometchat_tabopen");$("#cometchat_optionsbutton").removeClass("cometchat_tabclick");if($(this).hasClass("cometchat_tabclick")){_85("buddylist","0");}else{_85("buddylist","1");$("#cometchat_tooltip").css("display","none");$(".cometchat_userscontentavatar img").each(function(){if($(this).attr("original")){$(this).attr("src",$(this).attr("original"));$(this).removeAttr("original");}});}var _cf=$("#cometchat_base").position().left;var _d0=jqcc("#cometchat_base").width();$("#cometchat_userstab_popup").css("left",_cf+_d0-223-32);$(this).toggleClass("cometchat_tabclick").toggleClass("cometchat_userstabclick");$("#cometchat_userstab_popup").toggleClass("cometchat_tabopen");});};function _d1(_d2){var _d3=$(window).width();var _d4=_23+32;if(_d4<80){_d4=80;}if(_b=="fixed"){$("#cometchat_base").css("width",_c);if(_d=="center"){var _d5=(_d3-_c)/2;$("#cometchat_base").css("left",_d5);}if(_d=="right"){var _d5=(_d3-_c);$("#cometchat_base").css("left",_d5-_e);}if(_d=="left"){$("#cometchat_base").css("left",_e);}}else{if(_d3<400+_d4+_e+20){_d3=400+_d4+_e+20;}$("#cometchat_base").css("left",_e);$("#cometchat_base").css("width",_d3-(_e*2));}var _d6=$("#cometchat_base").position().left;var _d7=$("#cometchat_base").width();$("#cometchat_userstab_popup").css("left",_d6+_d7-223-32);$("#cometchat_optionsbutton_popup").css("left",_d6+_d7-223-32);if(_33!=""){$("#cometchat_trayicon_"+_33+"_popup").css("left",$("#cometchat_trayicon_"+_33).offset().left).css("width",_3[_33][4]);}if($("#cometchat_chatboxes_wide").width()<=($("#cometchat_base").width()-26-178-44-_d4)){$("#cometchat_chatboxes").css("width",$("#cometchat_chatboxes_wide").width());$("#cometchat_chatboxes").scrollToCC("0px",0);}else{var _d8=$("#cometchat_chatboxes").width();$("#cometchat_chatboxes").css("width",Math.floor(($("#cometchat_base").width()-26-178-44-_d4)/152)*152);var _d9=$("#cometchat_chatboxes").width();if(_d8!=_d9){$("#cometchat_chatboxes").scrollToCC("-=152px",0);}}if(_27!=""&&_d2!=1){if(($("#cometchat_user_"+_27).offset().left<($("#cometchat_chatboxes").offset().left+$("#cometchat_chatboxes").width()))&&($("#cometchat_user_"+_27).offset().left-$("#cometchat_chatboxes").offset().left)>=0){$("#cometchat_user_"+_27+"_popup").css("left",_d6+$("#cometchat_user_"+_27).position().left-77);}else{$("#cometchat_user_"+_27+"_popup").removeClass("cometchat_tabopen");$("#cometchat_user_"+_27).removeClass("cometchat_tabclick").removeClass("cometchat_usertabclick");var _da=(($("#cometchat_user_"+_27).offset().left-$("#cometchat_chatboxes_wide").offset().left))-((Math.floor(($("#cometchat_chatboxes").width()/152))-1)*152);$("#cometchat_chatboxes").scrollToCC(_da+"px",0,function(){$("#cometchat_user_"+_27).click();});}}_b4(_d2);_b5(_d2);if(ie6){_61();}};function _b4(_db){$("#cometchat_chatbox_left .cometchat_tabalertlr").html("0");$("#cometchat_chatbox_right .cometchat_tabalertlr").html("0");$("#cometchat_chatbox_left .cometchat_tabalertlr").css("display","none");$("#cometchat_chatbox_right .cometchat_tabalertlr").css("display","none");$("#cometchat_chatboxes_wide  .cometchat_tabalert").each(function(){if(($(this).parent().offset().left<($("#cometchat_chatboxes").offset().left+$("#cometchat_chatboxes").width()))&&($(this).parent().offset().left-$("#cometchat_chatboxes").offset().left)>=0){$(this).css("display","block");}else{$(this).css("display","none");if(($(this).parent().offset().left-$("#cometchat_chatboxes").offset().left)>=0){$("#cometchat_chatbox_right .cometchat_tabalertlr").html(parseInt($("#cometchat_chatbox_right .cometchat_tabalertlr").html())+parseInt($(this).html()));$("#cometchat_chatbox_right .cometchat_tabalertlr").css("display","block");}else{$("#cometchat_chatbox_left .cometchat_tabalertlr").html(parseInt($("#cometchat_chatbox_left .cometchat_tabalertlr").html())+parseInt($(this).html()));$("#cometchat_chatbox_left .cometchat_tabalertlr").css("display","block");}}});};function _b5(_dc){var _dd=0;var _de=0;var _df=0;if($("#cometchat_chatbox_right").hasClass("cometchat_chatbox_right_last")){_de=1;}if($("#cometchat_chatbox_right").hasClass("cometchat_chatbox_lr")){_df=1;}if($("#cometchat_chatboxes").scrollLeft()==0){$("#cometchat_chatbox_left").unbind("click",_e0);$("#cometchat_chatbox_left .cometchat_tabtext").html("0");$("#cometchat_chatbox_left").addClass("cometchat_chatbox_left_last");_dd++;}else{var _e1=Math.floor($("#cometchat_chatboxes").scrollLeft()/152);$("#cometchat_chatbox_left").unbind("click",_e0);$("#cometchat_chatbox_left").bind("click",_e0);$("#cometchat_chatbox_left .cometchat_tabtext").html(_e1);$("#cometchat_chatbox_left").removeClass("cometchat_chatbox_left_last");}if(($("#cometchat_chatboxes").scrollLeft()+$("#cometchat_chatboxes").width())==$("#cometchat_chatboxes_wide").width()){$("#cometchat_chatbox_right").unbind("click",_e2);$("#cometchat_chatbox_right .cometchat_tabtext").html("0");$("#cometchat_chatbox_right").addClass("cometchat_chatbox_right_last");_dd++;}else{var _e1=Math.floor(($("#cometchat_chatboxes_wide").width()-($("#cometchat_chatboxes").scrollLeft()+$("#cometchat_chatboxes").width()))/152);$("#cometchat_chatbox_right").unbind("click",_e2);$("#cometchat_chatbox_right").bind("click",_e2);$("#cometchat_chatbox_right .cometchat_tabtext").html(_e1);$("#cometchat_chatbox_right").removeClass("cometchat_chatbox_right_last");}if(_dd==2){$("#cometchat_chatbox_right").addClass("cometchat_chatbox_lr");$("#cometchat_chatbox_left").addClass("cometchat_chatbox_lr");}else{$("#cometchat_chatbox_right").removeClass("cometchat_chatbox_lr");$("#cometchat_chatbox_left").removeClass("cometchat_chatbox_lr");}if((!$("#cometchat_chatbox_right").hasClass("cometchat_chatbox_right_last")&&_de==1)||($("#cometchat_chatbox_right").hasClass("cometchat_chatbox_right_last")&&_de==0)||(!$("#cometchat_chatbox_right").hasClass("cometchat_chatbox_lr")&&_df==1)||($("#cometchat_chatbox_right").hasClass("cometchat_chatbox_lr")&&_df==0)){_d1(_dc);}};function _e3(_e4){if(_27!=""){$("#cometchat_user_"+_27+"_popup").removeClass("cometchat_tabopen");$("#cometchat_user_"+_27).removeClass("cometchat_tabclick").removeClass("cometchat_usertabclick");}$("#cometchat_chatboxes_wide .cometchat_tabalert").css("display","none");var _e5=$("#cometchat_base").position().left;var ms=_1c;if(_a9("initialize")==1){ms=0;}$("#cometchat_chatboxes").scrollToCC(_e4,ms,function(){if(_27!=""){if(($("#cometchat_user_"+_27).offset().left<($("#cometchat_chatboxes").offset().left+$("#cometchat_chatboxes").width()))&&($("#cometchat_user_"+_27).offset().left-$("#cometchat_chatboxes").offset().left)>=0){$("#cometchat_user_"+_27).click();}else{_27="";}_85("openChatboxId",_27);}_b4();_b5();});};function _e0(){_e3("-=152px");};function _e2(){_e3("+=152px");};function _e6(_e7,_e8){_24[_e7]=_e8;};function _a9(_e9){if(_24[_e9]){return _24[_e9];}else{return"";}};function _ea(_eb,_ec){_26[_eb]=_ec;};function _b6(_ed){if(_26[_ed]){return _26[_ed];}else{return"";}};function _85(_ee,_ef){_25[_ee]=_ef;if(_b6("updatingsession")!=1){var _f0="";if(_25["buddylist"]){_f0+=_25["buddylist"];}else{_f0+=" ";}_f0+=":";if(_25["activeChatboxes"]){_f0+=_25["activeChatboxes"];}else{_f0+=" ";}_f0+=":";if(_25["openChatboxId"]){_f0+=_25["openChatboxId"];}else{_f0+=" ";}_f0+=":"+_32;_f0+=":"+_29;_f0+=":"+_33;$.cookie(_a+"state",_f0,{path:"/"});}};function _f1(_f2,_f3){if(_25[_f2]){return _25[_f2];}else{return"";}};function _f4(_f5){var id=$(_f5).attr("id");if(typeof id==="undefined"||$(_f5).attr("id")==""){id=$(_f5).parent().attr("id");}if(typeof id==="undefined"){id=$(_f5).parent().parent().attr("id");}id=id.substr(19);_97(id,_36[id],_38[id],_37[id],_39[id],_3a[id]);};function _f6(id){_97(id,_36[id],_38[id],_37[id],_39[id],_3a[id]);};function _ca(_f7){var id=_f7;_97(id,_36[id],_38[id],_37[id],_39[id],_3a[id],1);};function _f8(id,_f9,_fa,old,_fb,_fc,_fd){if(_40[id]===undefined){_97(id,_36[id],_38[id],_37[id],_39[id],_3a[id],1,1);}if(_36[id]==null||_36[id]==""){if(_40[id]<5){setTimeout(function(){_f8(id,_f9,_fa,old,_fb,_fc,_fd);},2000);}}else{var _fe="";if(parseInt(_fa)==1){fromname=_2[10];_fe=" cometchat_self";}else{fromname=_36[id];}if(parseInt(_fc)==1){_f9=_f9.replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/\n/g,"<br>").replace(/\"/g,"&quot;");}if(_fa!=1&&_6==1){if($.cookie(_a+"sound")&&$.cookie(_a+"sound")=="true"){}else{if(old!=1){_5a();}}}separator=":&nbsp;&nbsp;";if($("#cometchat_message_"+_fb).length>0){$("#cometchat_message_"+_fb+" .cometchat_chatboxmessagecontent").html(_f9);}else{sentdata="";if(_fd!=null){var ts=new Date(_fd*1000);sentdata=_b7(ts,id);}if(!_10){fromname=fromname.split(" ")[0];}var msg=_c7("<div class=\"cometchat_chatboxmessage\" id=\"cometchat_message_"+_fb+"\"><span class=\"cometchat_chatboxmessagefrom"+_fe+"\"><strong>"+fromname+"</strong>"+separator+"</span><span class=\"cometchat_chatboxmessagecontent"+_fe+"\">"+_f9+"</span>"+sentdata+"</div>",_fe);$("#cometchat_user_"+id+"_popup .cometchat_tabcontenttext").append(msg);$("#cometchat_typing_"+id).css("display","none");_71(id);var _ff=new Date();var _100=Math.floor(_ff.getTime()/1000)-_48;if(_100>5){if(_4e==""){document.title=_2[15];}}}if(_27!=id&&old!=1){_c8(id,1,1);}}};function _101(id){if(_36[id]==null||_36[id]==""){if(_40[id]<5){setTimeout(function(){_101(id);},500);}}else{if(_27!=id){$("#cometchat_user_"+id).click();}}};function _102(id){if(_36[id]==null||_36[id]==""){if(_40[id]<5){setTimeout(function(){_102(id);},500);}}else{$("#cometchat_user_"+id).click();}};function _103(id,_104,_105){if(_36[id]==null||_36[id]==""){if(_40[id]<5){setTimeout(function(){_103(id,_104,_105);},1000);}}else{$("#cometchat_tabcontenttext_"+id).append("<div>"+_104+"</div>");$("#cometchat_typing_"+id).css("display","none");_71(id);_3f[id]=1;if(_105==1){var _106=new Date();var _107=Math.floor(_106.getTime()/1000)-_48;if(_107>5){if(_4e==""){document.title=_2[15];}}}if($.cookie(_a+"sound")&&$.cookie(_a+"sound")=="true"){}else{if(_f==1&&_105==1){_5a();}}}};function _78(_108){if(_108==1){if(typeof window.cometcall_function=="function"){cometcall_function(cometid,0,_4e);}}_24["timestamp"]=_31;_24["typingto"]=_46;_24["blh"]=_4d;_24["status"]="";if(_4e!=""){_24["status"]="available";}if(_108==1){_24["f"]=1;}else{delete _24["f"];}var temp="";var _109="";var _10a="";var _10b=0;var _10c=new Date();var _10d=Math.floor(_10c.getTime()/1000)-_48;if(_10d>_15&&_49==0){if(_4c=="available"||_4c=="busy"){_49=1;_24["status"]="away";_7f();$("#cometchat_userstab_icon").addClass("cometchat_user_away2");}}if(_10d<_15&&_49==1){if(_4c=="available"||_4c=="busy"){_49=0;_24["status"]=_4c;_7f();$("#cometchat_userstab_icon").addClass("cometchat_user_"+_4c+"2");}}if(_53==1){_24["cookie_"+_a+"state"]=$.cookie(_a+"state");_24["cookie_"+_a+"hidebar"]=$.cookie(_a+"hidebar");_24["cookie_"+_a+"an"]=$.cookie(_a+"an");_24["cookie_"+_a+"loggedin"]=$.cookie(_a+"loggedin");}_24["basedata"]=_4f;$.ajax({url:_1+"cometchat_receive.php",data:_24,dataType:"jsonp",type:_54,timeout:_55,error:function(){clearTimeout(_2c);_2e=_8;_2c=setTimeout(function(){_78();},_2e);},success:function(data){if(data){var _10e=0;var _10f="";$.each(data,function(type,item){if(type=="blh"){_4d=item;}if(type=="an"){if($.cookie(_a+"popup")&&$.cookie(_a+"popup")=="true"){}else{_4b=100;message="<div class=\"cometchat_announcement\">"+item.m+"</div>";if(item.o){var _110=(item.o-1);if(_110>0){message+="<div class=\"cometchat_notification\" onclick=\"javascript:jqcc.cometchat.launchModule('announcements')\"><div class=\"cometchat_notification_message cometchat_notification_message_and\">"+_2[36]+_110+_2[37]+"</div><div style=\"clear:both\" /></div>";}}else{$.cookie(_a+"an",item.id,{path:"/",expires:365});}_5b("cometchat_userstab",message,0);clearTimeout(_4a);_4a=setTimeout(function(){$("#cometchat_tooltip").css("display","none");_4b=0;},_1a);}}if(type=="buddylist"){var _111=0;var _112=0;var _113="";var _114=0;$.each(item,function(i,_115){longname=_115.n;if(_3f[_115.id]!=null){$("#cometchat_user_"+_115.id+" .cometchat_closebox_bottom_status").removeClass("cometchat_available").removeClass("cometchat_busy").removeClass("cometchat_offline").removeClass("cometchat_away").addClass("cometchat_"+_115.s);if($("#cometchat_user_"+_115.id+"_popup").length>0){$("#cometchat_user_"+_115.id+"_popup .cometchat_tabsubtitle .cometchat_message").html(_115.m);}}if(_115.s!="offline"){_111++;}_112++;var _116="";if(_115.g!=_113&&typeof _115.g!="undefined"){if(_115.g==""){groupName=_2[40];}else{groupName=_115.g;}if(_114==0){_116="<div class=\"cometchat_subsubtitle cometchat_subsubtitle_top\"><hr class=\"hrleft\">"+groupName+"<hr class=\"hrright\"></div>";}else{_116="<div class=\"cometchat_subsubtitle\"><hr class=\"hrleft\">"+groupName+"<hr class=\"hrright\"></div>";}_114++;_113=_115.g;}_109+=_116+"<div id=\"cometchat_userlist_"+_115.id+"\" class=\"cometchat_userlist\" onmouseover=\"jqcc(this).addClass('cometchat_userlist_hover');\" onmouseout=\"jqcc(this).removeClass('cometchat_userlist_hover');\"><span class=\"cometchat_userscontentname\">"+longname+"</span><span class=\"cometchat_userscontentdot cometchat_"+_115.s+"\"></span></div>";_10a+=_116+"<div id=\"cometchat_userlist_"+_115.id+"\" class=\"cometchat_userlist\" onmouseover=\"jqcc(this).addClass('cometchat_userlist_hover');\" onmouseout=\"jqcc(this).removeClass('cometchat_userlist_hover');\"><span class=\"cometchat_userscontentavatar\"><img class=\"cometchat_userscontentavatarimage\" original=\""+_115.a+"\"></span><span class=\"cometchat_userscontentname\">"+longname+"</span><span class=\"cometchat_userscontentdot cometchat_"+_115.s+"\"></span></div>";var _117="";if(_17==1&&_a9("initialize")!=1&&_38[_115.id]!="available"&&_38[_115.id]!="busy"&&_38[_115.id]!="away"&&_115.s=="available"){_117=_2[19];}if(_18==1&&_a9("initialize")!=1&&_38[_115.id]!="available"&&_38[_115.id]!="busy"&&_38[_115.id]!="away"&&_115.s=="busy"){_117=_2[21];}if(_16==1&&_a9("initialize")!=1&&_38[_115.id]!="offline"&&_115.s=="offline"){_117=_2[20];}if(_117!=""){_10f+="<div class=\"cometchat_notification\" onclick=\"javascript:jqcc.cometchat.chatWith('"+_115.id+"')\"><div class=\"cometchat_notification_avatar\"><img class=\"cometchat_notification_avatar_image\" src=\""+_115.a+"\"></div><div class=\"cometchat_notification_message\">"+_115.n+_117+"<br/><span class=\"cometchat_notification_status\">"+_115.m+"</span></div><div style=\"clear:both\" /></div>";}_38[_115.id]=_115.s;_37[_115.id]=_115.m;_36[_115.id]=_115.n;_39[_115.id]=_115.a;_3a[_115.id]=_115.l;});if(_114>0){$(".cometchat_subsubtitle_siteusers").css("display","none");}var _118=_10a;if(_112>_13){_118=_109;}if(_118!=""){document.getElementById("cometchat_userslist").style.display="block";_14e("cometchat_userslist","<div>"+_118+"</div>");}else{$("#cometchat_userslist").html("<div class=\"cometchat_nofriends\">"+_2[14]+"</div>");}if(_f1("buddylist")==1){$(".cometchat_userscontentavatar img").each(function(){if($(this).attr("original")){$(this).attr("src",$(this).attr("original"));$(this).removeAttr("original");}});}$("#cometchat_search").keyup();$(".cometchat_userlist").unbind("click");$(".cometchat_userlist").bind("click",function(e){_f4(e.target);});$("#cometchat_userstab_text").html(_2[9]+" ("+(_111+_3c)+")");_3d=_111;_32=_111+_3c;if(_112+_3c>_12){$("#cometchat_searchbar").css("display","block");}else{$("#cometchat_searchbar").css("display","none");}if(_10f!=""&&!$("#cometchat_userstab_popup").hasClass("cometchat_tabopen")&&!$("#cometchat_optionsbutton_popup").hasClass("cometchat_tabopen")){if(_4b<10){if($.cookie(_a+"popup")&&$.cookie(_a+"popup")=="true"){}else{_4b=10;_5b("cometchat_userstab",_10f,0);clearTimeout(_4a);_4a=setTimeout(function(){$("#cometchat_tooltip").css("display","none");_4b=0;},_19);}}}if(_4e!=""){jqcc[_4e].updateBuddyList(item);}}if(type=="loggedout"){document.title=_34;$.cookie(_a+"loggedin",null,{path:"/"});$.cookie(_a+"state",null,{path:"/"});$.cookie(_a+"jabber",null,{path:"/"});$.cookie(_a+"jabber_type",null,{path:"/"});$.cookie(_a+"hidebar",null,{path:"/"});$("#cometchat_optionsbutton").addClass("cometchat_optionsimages_exclamation");$("#cometchat_optionsbutton_icon").css("display","none");$("#cometchat_userstab").hide();$("#cometchat_chatboxes").hide();$("#cometchat_chatbox_left").hide();$("#cometchat_chatbox_right").hide();$("#cometchat_optionsbutton_popup").removeClass("cometchat_tabopen");$("#cometchat_userstab_popup").removeClass("cometchat_tabopen");$("#cometchat_optionsbutton").removeClass("cometchat_tabclick");$("#cometchat_userstab").removeClass("cometchat_tabclick");if(_27!=""){$("#cometchat_user_"+_27+"_popup").removeClass("cometchat_tabopen");_27="";_85("openChatboxId",_27);}_28=1;if(_4e!=""){jqcc[_4e].loggedOut();}}if(type=="userstatus"){$.each(item,function(name,_119){if(name=="message"){$("#cometchat_optionsbutton_popup .cometchat_statustextarea").val(_119);}if(name=="status"){_4c=_119;if(_119=="offline"){_83(1);}else{_7e();$("#cometchat_userstab_icon").addClass("cometchat_user_"+_119+"2");$("#cometchat_optionsbutton_popup ."+_119).css("text-decoration","underline");}}if(name=="guestname"){$("#guestsname").show();$("#cometchat_optionsbutton_popup #guestsname .cometchat_guestnametextbox").val(_119);$("#cometchat_optionsbutton_popup .cometchat_tabsubtitle").html(_2[45]);}});}if(type=="cometid"){cometcall_function(item.id,item.td,_4e);}if(type=="token"){_56=item;}if(type=="init"){_ea("updatingsession","1");}if(type=="initialize"){_31=item;_12b();}if(type=="tt"){$(".cometchat_typing").css("display","none");var _11a=item.split(",");var t=_11a.length;while(t>-1){$("#cometchat_typing_"+_11a[t]).css("display","block");t--;}}if(type=="messages"){if(_4e!=""){jqcc[_4e].newMessages(item);}$.each(item,function(i,_11b){_31=_11b.id;if((_27)==(_11b.from)&&_36[_11b.from]!=""&&_36[_11b.from]!=null){++_10e;var name=_36[_11b.from];var _11c="";if(_11b.self==1){fromname=_2[10];_11c=" cometchat_self";}else{fromname=name;}if($("#cometchat_message_"+_11b.id).length>0){$("#cometchat_message_"+_11b.id+" .cometchat_chatboxmessagecontent").html(_11b.message);}else{var ts=new Date(_11b.sent*1000);if(!_10){fromname=fromname.split(" ")[0];}temp+=(_c7("<div class=\"cometchat_chatboxmessage\" id=\"cometchat_message_"+_11b.id+"\"><span class=\"cometchat_chatboxmessagefrom"+_11c+"\"><strong>"+fromname+"</strong>:&nbsp;&nbsp;</span><span class=\"cometchat_chatboxmessagecontent"+_11c+"\">"+_11b.message+"</span>"+_b7(ts,_11b.from)+"</div>",_11c));if(_11b.old==0&&_11b.self==0){_10b=1;}}}else{var _11d=0;if($("#cometchat_user_"+_11b.from).length>0){}else{_11d=1;}_f8(_11b.from,_11b.message,_11b.self,_11b.old,_11b.id,0,_11b.sent);if(_27==""&&_5==1&&_11d==1){_101(_11b.from);}}});_2f=1;_2e=_8;}});if(_27!=""&&_10e>0){_103(_27,temp,_10b);}}_e6("initialize","0");_e6("currenttime","0");if(_28!=1&&_29!=1){_2f++;if(_2f>4){_2e*=2;_2f=1;}if(_2e>_9){_2e=_9;}clearTimeout(_2c);_2c=setTimeout(function(){_78();},_2e);}}});};function _11e(){_2[1]="Powered By CometChat";};function _11f(){$("body").append("<div id=\"cometchat\"></div><div id=\"cometchat_hidden\"><div id=\"cometchat_hidden_content\"></div></div><div id=\"cometchat_tooltip\"><div class=\"cometchat_tooltip_content\"></div></div>");var _120="";var _121="";for(x in _3){if(_3.hasOwnProperty(x)){var icon=_3[x];_120+=("<div id=\"cometchat_trayicon_"+x+"\" class=\"cometchat_trayicon\"><div class=\"cometchat_trayiconimage\"><img src=\""+_1+"modules/"+icon[0]+"/icon.png\"></div>");if(_3[x][8]){_120+="<div class=\"cometchat_trayicontext\">"+_3[x][1]+"</div>";}_120+="</div>";if(icon[3]=="_popup"){_121+="<div id=\"cometchat_trayicon_"+x+"_popup\" class=\"cometchat_traypopup\" style=\"display:none\"><div class=\"cometchat_traytitle\"><div class=\"cometchat_name\">"+icon[1]+"</div><div class=\"cometchat_minimizebox\"></div><br clear=\"all\"/></div><div class=\"cometchat_traycontent\"><div class=\"cometchat_traycontenttext\" style=\"height:"+icon[5]+"px\"><div class=\"cometchat_loading\"></div><iframe class=\"cometchat_iframe\" allowtransparency=\"true\" frameborder=0 width=\""+icon[4]+"\" height=\""+icon[5]+"\" id=\"cometchat_trayicon_"+x+"_iframe\"></iframe></div></div></div>";}if(!isNaN(icon[6])&&Number(icon[6])>0){_23+=Number(icon[6]);}else{_23+=16;}_23+=18;}}var _122=$.cookie(_a+"state");var _123=0;if(_122!=null){var _124=_122.split(/:/);_123=_124[3];}var _125="<div id=\"cometchat_trayicons\">"+_121+"</div><div id=\"cometchat_base\"><div id=\"cometchat_hide\" onclick=\"jqcc.cometchat.hideBar();\"></div><div id=\"cometchat_optionsbutton\" class=\"cometchat_tab\"><div id=\"cometchat_optionsbutton_icon\" class=\"cometchat_optionsimages\"></div></div><div id=\"cometchat_trayicons\">"+_120+"</div><span id=\"cometchat_userstab\" class=\"cometchat_tab\"><span id=\"cometchat_userstab_icon\"></span><span id=\"cometchat_userstab_text\">"+_2[9]+" ("+_123+")</span></span><div id=\"cometchat_chatbox_right\"><span class=\"cometchat_tabtext\"></span><span style=\"top:-5px;display:none\" class=\"cometchat_tabalertlr\"></span></div><div id=\"cometchat_chatboxes\"><div id=\"cometchat_chatboxes_wide\"></div></div><div id=\"cometchat_chatbox_left\"><span class=\"cometchat_tabtext\"></span><span class=\"cometchat_tabalertlr\" style=\"top:-5px;display:none;\"></span></div></div><div id=\"cometchat_optionsbutton_popup\" class=\"cometchat_tabpopup\" style=\"display:none\"><div class=\"cometchat_userstabtitle\"><div class=\"cometchat_userstabtitletext\">"+_2[0]+"</div><div class=\"cometchat_minimizebox\"></div><br clear=\"all\"/></div><div class=\"cometchat_tabsubtitle\">"+_2[1]+"</div><div class=\"cometchat_tabcontent cometchat_optionstyle\"><div id=\"guestsname\"><strong>"+_2[43]+"</strong><br/><input type=\"text\" class=\"cometchat_guestnametextbox\"/><input type=\"button\" class=\"cometchat_guestnamebutton\" value=\""+_2[44]+"\"><br/></div><strong>"+_2[2]+"</strong><br/><textarea class=\"cometchat_statustextarea\"></textarea><br/><input type=\"button\" class=\"cometchat_statusbutton\" value=\""+_2[22]+"\"><br/><div class=\"cometchat_statusinputs\"><strong>"+_2[23]+"</strong><br/><span class=\"cometchat_user_available\"></span><span class=\"cometchat_optionsstatus available\">"+_2[3]+"</span><span class=\"cometchat_optionsstatus2 cometchat_user_invisible\" ></span><span class=\"cometchat_optionsstatus invisible\">"+_2[5]+"</span><div style=\"clear:both\"></div><span class=\"cometchat_optionsstatus2 cometchat_user_busy\"></span><span class=\"cometchat_optionsstatus busy\">"+_2[4]+"</span><span class=\"cometchat_optionsstatus2 cometchat_user_invisible\"></span><span class=\"cometchat_optionsstatus cometchat_gooffline\">"+_2[11]+"</span><br clear=\"all\"/></div><div class=\"cometchat_options_disable\"><div><input type=\"checkbox\" id=\"cometchat_soundnotifications\" style=\"vertical-align: -2px;\">"+_2[13]+"</div><div style=\"clear:both\"></div><div><input type=\"checkbox\" id=\"cometchat_popupnotifications\" style=\"vertical-align: -2px;\">"+_2[24]+"</div></div></div></div><div id=\"cometchat_userstab_popup\" class=\"cometchat_tabpopup\" style=\"display:none\"><div class=\"cometchat_userstabtitle\"><div class=\"cometchat_userstabtitletext\">"+_2[9]+"</div><div class=\"cometchat_minimizebox\"></div><br clear=\"all\"/></div><div class=\"cometchat_tabsubtitle\" id=\"cometchat_searchbar\"><input type=\"text\" name=\"cometchat_search\" class=\"cometchat_search cometchat_search_light\" id=\"cometchat_search\" value=\""+_2[18]+"\"></div><div class=\"cometchat_tabcontent cometchat_tabstyle\"><div id=\"cometchat_userscontent\"><div id=\"cometchat_userslist\"><div class=\"cometchat_nofriends\">"+_2[41]+"</div></div></div></div></div>";document.getElementById("cometchat").innerHTML=_125;$(".cometchat_trayicontext").each(function(){_23+=this.clientWidth+1;id=$(this).parent().attr("id");$("#"+id+"_popup .cometchat_traycontent").css("background-position",(this.clientWidth)+"px bottom");});if(jqcc().slimScroll){$("#cometchat_userscontent").slimScroll({height:"200px"});}_86();_cb();$("#cometchat_chatboxes").attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false;});$("#cometchat_userscontent").attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false;});$(".cometchat_trayicon").attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false;});$(".cometchat_tab").attr("unselectable","on").css("MozUserSelect","none").bind("selectstart.ui",function(){return false;});$("#cometchat_hidden").click(function(){$("#cometchat").css("display","block");$("#cometchat_hidden").css("display","none");$.cookie(_a+"hidebar","0",{path:"/",expires:365});if(_28==0){clearTimeout(_2c);_78();}});$("#cometchat_hidden").mouseover(function(){if(_4b==0){_5b("cometchat_hidden_content",_2[26],0);}$(this).addClass("cometchat_tabmouseover");});$("#cometchat_hidden").mouseout(function(){$(this).removeClass("cometchat_tabmouseover");if(_4b==0){$("#cometchat_tooltip").css("display","none");}});$("#cometchat_hide").mouseover(function(){if(_4b==0){_5b("cometchat_hide",_2[27],0);}$(this).addClass("cometchat_tabmouseover");});$("#cometchat_hide").mouseout(function(){$(this).removeClass("cometchat_tabmouseover");if(_4b==0){$("#cometchat_tooltip").css("display","none");}});$("#cometchat .cometchat_trayicon").mouseover(function(){var id=$(this).attr("id").substr(19);if(!_3[id][8]){if(_4b==0){_5b("cometchat_trayicon_"+id,_3[id][1],1);}}$(this).addClass("cometchat_tabmouseover");});$("#cometchat .cometchat_trayicon").mouseout(function(){$(this).removeClass("cometchat_tabmouseover");if(_4b==0){$("#cometchat_tooltip").css("display","none");}});$("#cometchat .cometchat_traytitle").click(function(){cc_zindex+=2;$("#cometchat_base").css("z-index",100001+cc_zindex-1);$(this).parent().css("z-index",100001+cc_zindex);$("#cometchat_optionsbutton_popup").css("z-index",100001+cc_zindex);$("#cometchat_userstab_popup").css("z-index",100001+cc_zindex);});$("#cometchat .cometchat_traytitle .cometchat_minimizebox").click(function(){var id=$(this).parent().parent().attr("id");id=id.substring(19,id.length-6);$("#cometchat_trayicon_"+id).click();});$("#cometchat .cometchat_trayicon").click(function(){var id=$(this).attr("id").substr(19);_139(id,0);if(_27!=""){$("#cometchat_user_"+_27+"_popup").removeClass("cometchat_tabopen");$("#cometchat_user_"+_27).removeClass("cometchat_tabclick").removeClass("cometchat_usertabclick");$("#cometchat_user_"+_27+" .cometchat_closebox_bottom").removeClass("cometchat_closebox_bottom_click");_27="";_85("openChatboxId",_27);}$("#cometchat_userstab_popup").removeClass("cometchat_tabopen");$("#cometchat_userstab").removeClass("cometchat_userstabclick").removeClass("cometchat_tabclick");$("#cometchat_optionsbutton_popup").removeClass("cometchat_tabopen");$("#cometchat_optionsbutton").removeClass("cometchat_tabclick");_85("buddylist","0");var _126="_self";if(_3[id][3]){_126=_3[id][3];}if(_126=="_popup"){if(_33!=id){$("#cometchat_trayicon_"+_33+"_popup").removeClass("cometchat_tabopen");$("#cometchat_trayicon_"+_33).removeClass("cometchat_trayclick");_33="";_85("trayOpen",_33);}if(_33==""){$("#cometchat_trayicon_"+id+"_popup").css("left",$("#cometchat_trayicon_"+id).offset().left-1).css("width",_3[id][4]);if(ie6){$("#cometchat_trayicon_"+id+"_popup .cometchat_traytitle").css("width",parseInt(_3[id][4])-5);}if($("#cometchat_trayicon_"+id+"_iframe").attr("src")===undefined||$("#cometchat_trayicon_"+id+"_iframe").attr("src")=="blank.html"||$("#cometchat_trayicon_"+id+"_iframe").attr("src")==""){$("#cometchat_trayicon_"+id+"_iframe").attr("src",_3[id][2]+"?basedata="+_4f);}$("#cometchat_trayicon_"+id).addClass("cometchat_trayclick");$("#cometchat_trayicon_"+id+"_popup").addClass("cometchat_tabopen");cc_zindex+=2;$("#cometchat_base").css("z-index",100001+cc_zindex-1);$("#cometchat_trayicon_"+id+"_popup").css("z-index",100001+cc_zindex);$("#cometchat_optionsbutton_popup").css("z-index",100001+cc_zindex);$("#cometchat_userstab_popup").css("z-index",100001+cc_zindex);$("#cometchat_user_"+id+"_popup").css("z-index",100001+cc_zindex);_33=id;_85("trayOpen",_33);}else{$("#cometchat_trayicon_"+_33+"_popup").removeClass("cometchat_tabopen");$("#cometchat_trayicon_"+_33).removeClass("cometchat_trayclick");_33="";_85("trayOpen",_33);}if(ie6){_61();}}else{if(_126=="_lightbox"){jqcc.cometchat.lightbox(id);}else{window.open(_3[id][2],_126);}}});$("#cometchat_chatbox_right").bind("click",_e2);$("#cometchat_chatbox_left").bind("click",_e0);_d1();_b5();$("#cometchat_chatbox_right").mouseover(function(){$(this).addClass("cometchat_chatbox_lr_mouseover");});$("#cometchat_chatbox_right").mouseout(function(){$(this).removeClass("cometchat_chatbox_lr_mouseover");});$("#cometchat_chatbox_left").mouseover(function(){$(this).addClass("cometchat_chatbox_lr_mouseover");});$("#cometchat_chatbox_left").mouseout(function(){$(this).removeClass("cometchat_chatbox_lr_mouseover");});$(window).bind("resize",_d1);_e6("buddylist","1");_e6("initialize","1");_e6("currenttime",_44);var _127=1;if(typeof document.body.style.maxHeight==="undefined"){if(_1d){$("#cometchat").css("display","none");_127=0;}else{ie6=true;_61();$(window).bind("scroll",function(){_61();});}}else{if(_50){if(_1e&&_4e==""){$("#cometchat").css("display","none");_127=0;}else{ie6=true;_61();$(window).bind("scroll",function(){_61();});}}}document.onmousemove=function(e){var _128=new Date();_48=Math.floor(_128.getTime()/1000);};if(_21==1){_129();}if($.cookie(_a+"hidebar")=="1"){$("#cometchat").css("display","none");$("#cometchat_hidden").css("display","block");_127=0;}if(_4e==""){var _12a=_22.length;if(_12a>0){for(var i=0;i<_12a;i++){var name="cc"+_22[i];if(typeof($[name])=="object"){$[name].init();}}}}if($.inArray("block",_4)>-1&&_4e==""){$.ccblock.addCode();}if(_127==1){_78();}if(_4e!=""&&typeof(jqcc[_4e].init())=="function"){jqcc[_4e].init();}};function _12b(){if(_28==0){var _12c=$.cookie(_a+"state");_ea("updatingsession","1");if(_12c!=null){var _12d=_12c.split(/:/);if(_29==0){var _12e=0;if(_12d[0]!=" "&&_12d[0]!=""){_12e=_12d[0];}if((_12e==0&&$("#cometchat_userstab").hasClass("cometchat_tabclick"))||(_12e==1&&!($("#cometchat_userstab").hasClass("cometchat_tabclick")))){$("#cometchat_userstab").click();}_12e="";if(_12d[1]!=" "&&_12d[1]!=""){_12e=_12d[1];}if(_12e!=_f1("activeChatboxes")){var _12f={};var _130={};if(_12e!=""){var _131=_12e.split(/,/);for(i=0;i<_131.length;i++){var _132=_131[i].split(/\|/);_12f[_132[0]]=_132[1];}}if(_f1("activeChatboxes")!=""){var _131=_f1("activeChatboxes").split(/,/);for(i=0;i<_131.length;i++){var _132=_131[i].split(/\|/);_130[_132[0]]=_132[1];}}for(r in _12f){if(_12f.hasOwnProperty(r)){_c8(r,parseInt(_12f[r]),0);if(parseInt(_12f[r])>0){_35=1;}}}for(y in _130){if(_130.hasOwnProperty(y)){if(_12f[y]==null){$("#cometchat_user_"+y+"_popup .cometchat_tabtitle .cometchat_closebox").click();}}}}if(_35>0){if(_4e==""){if(document.title==_2[15]){document.title=_34;}else{document.title=_2[15];}}}else{var _133=new Date();var _134=Math.floor(_133.getTime()/1000)-_48;if(_134<5){if(_4e==""){document.title=_34;}}}_12e=0;if(_12d[2]!=" "&&_12d[2]!=""){_12e=_12d[2];}if(_12e!=_27){if(_27!=""){_102(_27);}if(_12e!=""){_102(_12e);}}if(_12d[4]==1){_83(1);}}if(_12d[4]==0&&_29==1){_29=0;$("#cometchat_userstab_text").html(_2[9]+" ("+_32+")");_78(1);_7e();$("#cometchat_userstab_icon").addClass("cometchat_user_available2");$("#cometchat_optionsbutton_popup .available").css("text-decoration","underline");}if(_12d[5]!=" "&&_12d[5]!=""&&_12d[5]!=_33&&_11==1){$("#cometchat_trayicon_"+_12d[5]).click();}}_ea("updatingsession","0");clearTimeout(_2d);_2d=setTimeout(function(){_12b();},5000);}};var _135={};function _61(){var _136=["cometchat_base","cometchat_userstab_popup","cometchat_optionsbutton_popup","cometchat_tooltip","cometchat_hidden"];if(_27!=""){_136.push("cometchat_user_"+_27+"_popup");}if(_33!=""&&_33!=0){_136.push("cometchat_trayicon_"+_33+"_popup");}for(x in _136){$("#"+_136[x]).css("position","absolute");var _137=parseInt($("#"+_136[x]).css("bottom"));if(x==0){_137=0;}var _138=parseInt($("#"+_136[x]).height());if(_135[_136[x]]&&x!=3){_138=_135[_136[x]];}else{_135[_136[x]]=_138;}if(x==3){}$("#"+_136[x]).css("top",(parseInt($(window).height())-_137-_138+parseInt($(window).scrollTop()))+"px");}};function _139(id,_13a){if(!$("#cometchat_trayicon_"+id+"_popup").hasClass("cometchat_tabopen")){$("#cometchat_trayicon_"+id+" .cometchat_tabalert").remove();if(_13a!=0){$("<div/>").css("top","-10px").addClass("cometchat_tabalert").html(_13a).appendTo($("#cometchat_trayicon_"+id));}}};function _c7(_13b,self){if(_1f){if(self==null||self==""){return"<table class=\"cometchat_iphone\" cellpadding=0 cellspacing=0 style=\"float:right\"><tr><td class=\"cometchat_tl\"></td><td class=\"cometchat_tc\"></td><td class=\"cometchat_tr\"></td></tr><tr><td class=\"cometchat_cl\"></td><td class=\"cometchat_cc\">"+_13b+"</td><td class=\"cometchat_cr\"></td></tr><tr><td class=\"cometchat_bl\"></td><td class=\"cometchat_bc\"></td><td class=\"cometchat_br\"></td></tr></table><div style=\"clear:both\"></div>";}else{return"<table class=\"cometchat_iphone\" cellpadding=0 cellspacing=0><tr><td class=\"cometchat_xtl\"></td><td class=\"cometchat_xtc\"></td><td class=\"cometchat_xtr\"></td></tr><tr><td class=\"cometchat_xcl\"></td><td class=\"cometchat_xcc\">"+_13b+"</td><td class=\"cometchat_xcr\"></td></tr><tr><td class=\"cometchat_xbl\"></td><td class=\"cometchat_xbc\"></td><td class=\"cometchat_xbr\"></td></tr></table><div style=\"clear:both\"></div>";}}return _13b;};function _13c(){if(_4e==""&&_20==1&&$.cookie(_a+"loggedin")!=1){$.ajax({url:_1+"cometchat_check.php",data:{"init":"1",basedata:_4f},dataType:"jsonp",type:_54,timeout:_55,success:function(data){if(data!="0"){$.cookie(_a+"loggedin","1",{path:"/"});_11f();}}});}else{_11f();}};function _129(){$("embed").each(function(i){if($(this).attr("id")!="cometchatbeep"){var _13d=this.cloneNode(true);_13d.setAttribute("WMode","Transparent");$(this).before(_13d);$(this).remove();}});$("object").each(function(i,v){if($(this).attr("id")!="cometchatbeep"){var _13e=$(this).children("embed");if(typeof(_13e.get(0))!="undefined"){if(typeof(_13e.get(0).outerHTML)!="undefined"){_13e.attr("wmode","transparent");$(this.outerHTML).insertAfter(this);$(this).remove();}return true;}var algo=this.attributes;var _13f="<OBJECT ";for(var i=0;i<algo.length;i++){_13f+=algo[i].name+"=\""+algo[i].value+"\" ";}_13f+=">";var flag=false;$(this).children().each(function(elem){if(this.nodeName=="PARAM"){if(this.name=="wmode"){flag=true;_13f+="<PARAM NAME=\""+this.name+"\" VALUE=\"transparent\">";}else{_13f+="<PARAM NAME=\""+this.name+"\" VALUE=\""+this.value+"\">";}}});if(!flag){_13f+="<PARAM NAME=\"wmode\" VALUE=\"transparent\">";}_13f+="</OBJECT>";$(_13f).insertAfter(this);$(this).remove();}});};arguments.callee.c5=function(){_11e();_13c();return;};arguments.callee.c6=function(){_13c();return;};arguments.callee.getBaseData=function(){return _4f;};arguments.callee.getActiveId=function(){return _27;};arguments.callee.getUser=function(id,_140){$.ajax({url:_1+"cometchat_getid.php",data:{userid:id,basedata:_4f},cache:false,dataType:"jsonp",type:_54,timeout:_55,success:function(data){if(data){window[_140](data);}else{window[_140](0);}}});};arguments.callee.ping=function(){return 1;};arguments.callee.getLanguage=function(id){return _2[id];};arguments.callee.chatWith=function(id){if(_28==0){if(_29==1){_29=0;$("#cometchat_userstab_text").html(_2[9]+" ("+_32+")");_78(1);$("#cometchat_optionsbutton_popup .available").click();}_97(id,_36[id],_38[id],_37[id],_39[id],_3a[id]);}};arguments.callee.getRecentData=function(id){$.ajax({cache:false,url:_1+"cometchat_receive.php",data:{chatbox:id,basedata:_4f},dataType:"jsonp",type:_54,timeout:_55,success:function(data){if(_4e!=""){jqcc[_4e].loadData(id,data);}}});};arguments.callee.getUserDetails=function(id){$.ajax({url:_1+"cometchat_getid.php",data:{userid:id,basedata:_4f},type:_54,timeout:_55,cache:false,async:false,dataType:"jsonp",success:function(data){if(_4e!=""){jqcc[_4e].loadUserData(id,data);}}});};arguments.callee.launchModule=function(id){if(!$("#cometchat_trayicon_"+id+"_popup").hasClass("cometchat_tabopen")){$("#cometchat_trayicon_"+id).click();}};arguments.callee.toggleModule=function(id){$("#cometchat_trayicon_"+id).click();};arguments.callee.closeModule=function(id){if($("#cometchat_trayicon_"+id+"_popup").hasClass("cometchat_tabopen")){$("#cometchat_trayicon_"+id).click();}};arguments.callee.joinChatroom=function(_141,_142,_143){$("#cometchat_trayicon_chatrooms_iframe,.cometchat_embed_chatrooms").attr("src",_1+"modules/chatrooms/index.php?roomid="+_141+"&inviteid="+_142+"&roomname="+_143+"&basedata="+_4f);$("#cometchat_trayicon_chatrooms").click();};arguments.callee.sendMessage=function(id,_144){if(_144!=""){$.ajax({url:_1+"cometchat_send.php",data:{to:id,message:_144,token:_56,basedata:_4f},dataType:"jsonp",type:_54,timeout:_55,success:function(data){if(data){_f8(id,_144,1,1,data,1,1);_71(id);}_2f=1;if(_2e>_8){_2e=_8;clearTimeout(_2c);_2c=setTimeout(function(){_78();},_8);}}});}};arguments.callee.hideBar=function(){_83();$("#cometchat").css("display","none");$("#cometchat_hidden").css("display","block");$.cookie(_a+"hidebar","1",{path:"/",expires:365});};arguments.callee.getBaseUrl=function(){return _1;};arguments.callee.setAlert=function(id,_145){_139(id,_145);};arguments.callee.closeTooltip=function(){$("#cometchat_tooltip").css("display","none");};arguments.callee.scrollToTop=function(){$("html,body").animate({scrollTop:0},{"duration":"slow"});};arguments.callee.reinitialize=function(){if(_28==1){$("#cometchat_optionsbutton").removeClass("cometchat_optionsimages_exclamation");$("#cometchat_optionsbutton_icon").css("display","block");$("#cometchat_userstab").show();$("#cometchat_chatboxes").show();$("#cometchat_chatbox_left").show();$("#cometchat_chatbox_right").show();_28=0;_e6("initialize","1");_78();}};arguments.callee.addMessage=function(id,_146,self,old,_147,_148,sent,_149){var _14a=0;if($("#cometchat_user_"+id).length>0){}else{_14a=1;}_f8(id,_146,self,old,_147,_148,sent,_149);if(_27==""&&_5==1&&_14a==1){_101(id);}};arguments.callee.updateHtml=function(id,temp){if($("#cometchat_user_"+id+"_popup").length>0){document.getElementById("cometchat_tabcontenttext_"+id).innerHTML="<div>"+temp+"</div>";_71(id);}else{if(_40[id]===undefined||_40[id]<5){setTimeout(function(){$.cometchat.updateHtml(id,temp);},1000);}}};arguments.callee.processMessage=function(id,_14b){return _c7(id,_14b);};arguments.callee.replaceHtml=function(id,_14c){_14e(id,_14c);};arguments.callee.userClick=function(e){_f4(e);};arguments.callee.userAdd=function(id,s,m,n,a,l){_3b[id]=1;_38[id]=s;_37[id]=m;_36[id]=n;_39[id]=a;_3a[id]=l;};arguments.callee.updateJabberOnlineNumber=function(_14d){_3c=_14d;_32=_3c+_3d;if(_29==0){$("#cometchat_userstab_text").html(_2[9]+" ("+_32+")");}};arguments.callee.getSessionVariable=function(name){return _f1(name);};arguments.callee.getName=function(id){return _36[id];};arguments.callee.lightbox=function(name){if(_3[name]){loadCCPopup(_3[name][2]+"?",_3[name][0],"status=0,toolbar=0,menubar=0,directories=0,resizable=0,location=0,status=0,scrollbars=0, width="+(Number(_3[name][4])+2)+",height="+_3[name][5]+"",Number(_3[name][4])+2,_3[name][5],_3[name][1]);}};};$.expr[":"].icontains=function(a,i,m){return(a.textContent||a.innerText||"").toLowerCase().indexOf(m[3].toLowerCase())>=0;};function _14e(el,html){var _14f=typeof el==="string"?document.getElementById(el):el;var _150=_14f.cloneNode(false);_150.innerHTML=html;_14f.parentNode.replaceChild(_150,_14f);return _150;};})(jqcc);jqcc(document).ready(function(){if(typeof CometChathasBeenRun==='undefined'){CometChathasBeenRun=true;}else{return;}
jqcc.cometchat();jqcc.cometchat.c6();});(function(root,doc,factory){if(typeof define==="function"&&define.amd){define(["jquery"],function($){factory($,root,doc);return $.mobile;});}else{factory(root.jQuery,root,doc);}}(this,document,function($,window,document,undefined){(function($,window,document,undefined){var dataPropertyName="virtualMouseBindings",touchTargetPropertyName="virtualTouchID",virtualEventNames="vmouseover vmousedown vmousemove vmouseup vclick vmouseout vmousecancel".split(" "),touchEventProps="clientX clientY pageX pageY screenX screenY".split(" "),mouseHookProps=$.event.mouseHooks?$.event.mouseHooks.props:[],mouseEventProps=$.event.props.concat(mouseHookProps),activeDocHandlers={},resetTimerID=0,startX=0,startY=0,didScroll=false,clickBlockList=[],blockMouseTriggers=false,blockTouchTriggers=false,eventCaptureSupported="addEventListener"in document,$document=$(document),nextTouchID=1,lastTouchID=0;$.vmouse={moveDistanceThreshold:10,clickDistanceThreshold:10,resetTimerDuration:1500};function getNativeEvent(event){while(event&&typeof event.originalEvent!=="undefined"){event=event.originalEvent;}
return event;}
function createVirtualEvent(event,eventType){var t=event.type,oe,props,ne,prop,ct,touch,i,j;event=$.Event(event);event.type=eventType;oe=event.originalEvent;props=$.event.props;if(t.search(/^(mouse|click)/)>-1){props=mouseEventProps;}
if(oe){for(i=props.length,prop;i;){prop=props[--i];event[prop]=oe[prop];}}
if(t.search(/mouse(down|up)|click/)>-1&&!event.which){event.which=1;}
if(t.search(/^touch/)!==-1){ne=getNativeEvent(oe);t=ne.touches;ct=ne.changedTouches;touch=(t&&t.length)?t[0]:((ct&&ct.length)?ct[0]:undefined);if(touch){for(j=0,len=touchEventProps.length;j<len;j++){prop=touchEventProps[j];event[prop]=touch[prop];}}}
return event;}
function getVirtualBindingFlags(element){var flags={},b,k;while(element){b=$.data(element,dataPropertyName);for(k in b){if(b[k]){flags[k]=flags.hasVirtualBinding=true;}}
element=element.parentNode;}
return flags;}
function getClosestElementWithVirtualBinding(element,eventType){var b;while(element){b=$.data(element,dataPropertyName);if(b&&(!eventType||b[eventType])){return element;}
element=element.parentNode;}
return null;}
function enableTouchBindings(){blockTouchTriggers=false;}
function disableTouchBindings(){blockTouchTriggers=true;}
function enableMouseBindings(){lastTouchID=0;clickBlockList.length=0;blockMouseTriggers=false;disableTouchBindings();}
function disableMouseBindings(){enableTouchBindings();}
function startResetTimer(){clearResetTimer();resetTimerID=setTimeout(function(){resetTimerID=0;enableMouseBindings();},$.vmouse.resetTimerDuration);}
function clearResetTimer(){if(resetTimerID){clearTimeout(resetTimerID);resetTimerID=0;}}
function triggerVirtualEvent(eventType,event,flags){var ve;if((flags&&flags[eventType])||(!flags&&getClosestElementWithVirtualBinding(event.target,eventType))){ve=createVirtualEvent(event,eventType);$(event.target).trigger(ve);}
return ve;}
function mouseEventCallback(event){var touchID=$.data(event.target,touchTargetPropertyName);if(!blockMouseTriggers&&(!lastTouchID||lastTouchID!==touchID)){var ve=triggerVirtualEvent("v"+event.type,event);if(ve){if(ve.isDefaultPrevented()){event.preventDefault();}
if(ve.isPropagationStopped()){event.stopPropagation();}
if(ve.isImmediatePropagationStopped()){event.stopImmediatePropagation();}}}}
function handleTouchStart(event){var touches=getNativeEvent(event).touches,target,flags;if(touches&&touches.length===1){target=event.target;flags=getVirtualBindingFlags(target);if(flags.hasVirtualBinding){lastTouchID=nextTouchID++;$.data(target,touchTargetPropertyName,lastTouchID);clearResetTimer();disableMouseBindings();didScroll=false;var t=getNativeEvent(event).touches[0];startX=t.pageX;startY=t.pageY;triggerVirtualEvent("vmouseover",event,flags);triggerVirtualEvent("vmousedown",event,flags);}}}
function handleScroll(event){if(blockTouchTriggers){return;}
if(!didScroll){triggerVirtualEvent("vmousecancel",event,getVirtualBindingFlags(event.target));}
didScroll=true;startResetTimer();}
function handleTouchMove(event){if(blockTouchTriggers){return;}
var t=getNativeEvent(event).touches[0],didCancel=didScroll,moveThreshold=$.vmouse.moveDistanceThreshold;didScroll=didScroll||(Math.abs(t.pageX-startX)>moveThreshold||Math.abs(t.pageY-startY)>moveThreshold),flags=getVirtualBindingFlags(event.target);if(didScroll&&!didCancel){triggerVirtualEvent("vmousecancel",event,flags);}
triggerVirtualEvent("vmousemove",event,flags);startResetTimer();}
function handleTouchEnd(event){if(blockTouchTriggers){return;}
disableTouchBindings();var flags=getVirtualBindingFlags(event.target),t;triggerVirtualEvent("vmouseup",event,flags);if(!didScroll){var ve=triggerVirtualEvent("vclick",event,flags);if(ve&&ve.isDefaultPrevented()){t=getNativeEvent(event).changedTouches[0];clickBlockList.push({touchID:lastTouchID,x:t.clientX,y:t.clientY});blockMouseTriggers=true;}}
triggerVirtualEvent("vmouseout",event,flags);didScroll=false;startResetTimer();}
function hasVirtualBindings(ele){var bindings=$.data(ele,dataPropertyName),k;if(bindings){for(k in bindings){if(bindings[k]){return true;}}}
return false;}
function dummyMouseHandler(){}
function getSpecialEventObject(eventType){var realType=eventType.substr(1);return{setup:function(data,namespace){if(!hasVirtualBindings(this)){$.data(this,dataPropertyName,{});}
var bindings=$.data(this,dataPropertyName);bindings[eventType]=true;activeDocHandlers[eventType]=(activeDocHandlers[eventType]||0)+1;if(activeDocHandlers[eventType]===1){$document.bind(realType,mouseEventCallback);}
$(this).bind(realType,dummyMouseHandler);if(eventCaptureSupported){activeDocHandlers["touchstart"]=(activeDocHandlers["touchstart"]||0)+1;if(activeDocHandlers["touchstart"]===1){$document.bind("touchstart",handleTouchStart).bind("touchend",handleTouchEnd).bind("touchmove",handleTouchMove).bind("scroll",handleScroll);}}},teardown:function(data,namespace){--activeDocHandlers[eventType];if(!activeDocHandlers[eventType]){$document.unbind(realType,mouseEventCallback);}
if(eventCaptureSupported){--activeDocHandlers["touchstart"];if(!activeDocHandlers["touchstart"]){$document.unbind("touchstart",handleTouchStart).unbind("touchmove",handleTouchMove).unbind("touchend",handleTouchEnd).unbind("scroll",handleScroll);}}
var $this=$(this),bindings=$.data(this,dataPropertyName);if(bindings){bindings[eventType]=false;}
$this.unbind(realType,dummyMouseHandler);if(!hasVirtualBindings(this)){$this.removeData(dataPropertyName);}}};}
for(var i=0;i<virtualEventNames.length;i++){$.event.special[virtualEventNames[i]]=getSpecialEventObject(virtualEventNames[i]);}
if(eventCaptureSupported){document.addEventListener("click",function(e){var cnt=clickBlockList.length,target=e.target,x,y,ele,i,o,touchID;if(cnt){x=e.clientX;y=e.clientY;threshold=$.vmouse.clickDistanceThreshold;ele=target;while(ele){for(i=0;i<cnt;i++){o=clickBlockList[i];touchID=0;if((ele===target&&Math.abs(o.x-x)<threshold&&Math.abs(o.y-y)<threshold)||$.data(ele,touchTargetPropertyName)===o.touchID){e.preventDefault();e.stopPropagation();return;}}
ele=ele.parentNode;}}},true);}})(jQuery,window,document);(function($,window,undefined){var str_hashchange='hashchange',doc=document,fake_onhashchange,special=$.event.special,doc_mode=doc.documentMode,supports_onhashchange='on'+str_hashchange in window&&(doc_mode===undefined||doc_mode>7);function get_fragment(url){url=url||location.href;return'#'+url.replace(/^[^#]*#?(.*)$/,'$1');};$.fn[str_hashchange]=function(fn){return fn?this.bind(str_hashchange,fn):this.trigger(str_hashchange);};$.fn[str_hashchange].delay=50;special[str_hashchange]=$.extend(special[str_hashchange],{setup:function(){if(supports_onhashchange){return false;}
$(fake_onhashchange.start);},teardown:function(){if(supports_onhashchange){return false;}
$(fake_onhashchange.stop);}});fake_onhashchange=(function(){var self={},timeout_id,last_hash=get_fragment(),fn_retval=function(val){return val;},history_set=fn_retval,history_get=fn_retval;self.start=function(){timeout_id||poll();};self.stop=function(){timeout_id&&clearTimeout(timeout_id);timeout_id=undefined;};function poll(){var hash=get_fragment(),history_hash=history_get(last_hash);if(hash!==last_hash){history_set(last_hash=hash,history_hash);$(window).trigger(str_hashchange);}else if(history_hash!==last_hash){location.href=location.href.replace(/#.*/,'')+history_hash;}
timeout_id=setTimeout(poll,$.fn[str_hashchange].delay);};$.browser.msie&&!supports_onhashchange&&(function(){var iframe,iframe_src;self.start=function(){if(!iframe){iframe_src=$.fn[str_hashchange].src;iframe_src=iframe_src&&iframe_src+get_fragment();iframe=$('<iframe tabindex="-1" title="empty"/>').hide().one('load',function(){iframe_src||history_set(get_fragment());poll();}).attr('src',iframe_src||'javascript:0').insertAfter('body')[0].contentWindow;doc.onpropertychange=function(){try{if(event.propertyName==='title'){iframe.document.title=doc.title;}}catch(e){}};}};self.stop=fn_retval;history_get=function(){return get_fragment(iframe.location.href);};history_set=function(hash,history_hash){var iframe_doc=iframe.document,domain=$.fn[str_hashchange].domain;if(hash!==history_hash){iframe_doc.title=doc.title;iframe_doc.open();domain&&iframe_doc.write('<script>document.domain="'+domain+'"</script>');iframe_doc.close();iframe.location.hash=hash;}};})();return self;})();})(jQuery,this);(function($,undefined){if($.cleanData){var _cleanData=$.cleanData;$.cleanData=function(elems){for(var i=0,elem;(elem=elems[i])!=null;i++){$(elem).triggerHandler("remove");}
_cleanData(elems);};}else{var _remove=$.fn.remove;$.fn.remove=function(selector,keepData){return this.each(function(){if(!keepData){if(!selector||$.filter(selector,[this]).length){$("*",this).add([this]).each(function(){$(this).triggerHandler("remove");});}}
return _remove.call($(this),selector,keepData);});};}
$.widget=function(name,base,prototype){var namespace=name.split(".")[0],fullName;name=name.split(".")[1];fullName=namespace+"-"+name;if(!prototype){prototype=base;base=$.Widget;}
$.expr[":"][fullName]=function(elem){return!!$.data(elem,name);};$[namespace]=$[namespace]||{};$[namespace][name]=function(options,element){if(arguments.length){this._createWidget(options,element);}};var basePrototype=new base();basePrototype.options=$.extend(true,{},basePrototype.options);$[namespace][name].prototype=$.extend(true,basePrototype,{namespace:namespace,widgetName:name,widgetEventPrefix:$[namespace][name].prototype.widgetEventPrefix||name,widgetBaseClass:fullName},prototype);$.widget.bridge(name,$[namespace][name]);};$.widget.bridge=function(name,object){$.fn[name]=function(options){var isMethodCall=typeof options==="string",args=Array.prototype.slice.call(arguments,1),returnValue=this;options=!isMethodCall&&args.length?$.extend.apply(null,[true,options].concat(args)):options;if(isMethodCall&&options.charAt(0)==="_"){return returnValue;}
if(isMethodCall){this.each(function(){var instance=$.data(this,name);if(!instance){throw"cannot call methods on "+name+" prior to initialization; "+"attempted to call method '"+options+"'";}
if(!$.isFunction(instance[options])){throw"no such method '"+options+"' for "+name+" widget instance";}
var methodValue=instance[options].apply(instance,args);if(methodValue!==instance&&methodValue!==undefined){returnValue=methodValue;return false;}});}else{this.each(function(){var instance=$.data(this,name);if(instance){instance.option(options||{})._init();}else{$.data(this,name,new object(options,this));}});}
return returnValue;};};$.Widget=function(options,element){if(arguments.length){this._createWidget(options,element);}};$.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",options:{disabled:false},_createWidget:function(options,element){$.data(element,this.widgetName,this);this.element=$(element);this.options=$.extend(true,{},this.options,this._getCreateOptions(),options);var self=this;this.element.bind("remove."+this.widgetName,function(){self.destroy();});this._create();this._trigger("create");this._init();},_getCreateOptions:function(){var options={};if($.metadata){options=$.metadata.get(element)[this.widgetName];}
return options;},_create:function(){},_init:function(){},destroy:function(){this.element.unbind("."+this.widgetName).removeData(this.widgetName);this.widget().unbind("."+this.widgetName).removeAttr("aria-disabled").removeClass(this.widgetBaseClass+"-disabled "+"ui-state-disabled");},widget:function(){return this.element;},option:function(key,value){var options=key;if(arguments.length===0){return $.extend({},this.options);}
if(typeof key==="string"){if(value===undefined){return this.options[key];}
options={};options[key]=value;}
this._setOptions(options);return this;},_setOptions:function(options){var self=this;$.each(options,function(key,value){self._setOption(key,value);});return this;},_setOption:function(key,value){this.options[key]=value;if(key==="disabled"){this.widget()
[value?"addClass":"removeClass"](this.widgetBaseClass+"-disabled"+" "+"ui-state-disabled").attr("aria-disabled",value);}
return this;},enable:function(){return this._setOption("disabled",false);},disable:function(){return this._setOption("disabled",true);},_trigger:function(type,event,data){var callback=this.options[type];event=$.Event(event);event.type=(type===this.widgetEventPrefix?type:this.widgetEventPrefix+type).toLowerCase();data=data||{};if(event.originalEvent){for(var i=$.event.props.length,prop;i;){prop=$.event.props[--i];event[prop]=event.originalEvent[prop];}}
this.element.trigger(event,data);return!($.isFunction(callback)&&callback.call(this.element[0],event,data)===false||event.isDefaultPrevented());}};})(jQuery);(function($,undefined){$.widget("mobile.widget",{_createWidget:function(){$.Widget.prototype._createWidget.apply(this,arguments);this._trigger('init');},_getCreateOptions:function(){var elem=this.element,options={};$.each(this.options,function(option){var value=elem.jqmData(option.replace(/[A-Z]/g,function(c){return"-"+c.toLowerCase();}));if(value!==undefined){options[option]=value;}});return options;},enhanceWithin:function(target,useKeepNative){this.enhance($(this.options.initSelector,$(target)),useKeepNative);},enhance:function(targets,useKeepNative){var page,keepNative,$widgetElements=$(targets),self=this;$widgetElements=$.mobile.enhanceable($widgetElements);if(useKeepNative&&$widgetElements.length){page=$.mobile.closestPageData($widgetElements);keepNative=(page&&page.keepNativeSelector())||"";$widgetElements=$widgetElements.not(keepNative);}
$widgetElements[this.widgetName]();},raise:function(msg){throw"Widget ["+this.widgetName+"]: "+msg;}});})(jQuery);(function($,window,undefined){var nsNormalizeDict={};$.mobile=$.extend({},{version:"1.1.0",ns:"",subPageUrlKey:"ui-page",activePageClass:"ui-page-active",activeBtnClass:"ui-btn-active",focusClass:"ui-focus",ajaxEnabled:true,hashListeningEnabled:true,linkBindingEnabled:true,defaultPageTransition:"fade",maxTransitionWidth:false,minScrollBack:250,touchOverflowEnabled:false,defaultDialogTransition:"pop",loadingMessage:"loading",pageLoadErrorMessage:"Error Loading Page",loadingMessageTextVisible:false,loadingMessageTheme:"a",pageLoadErrorMessageTheme:"e",autoInitializePage:true,pushStateEnabled:true,ignoreContentEnabled:false,orientationChangeEnabled:true,buttonMarkup:{hoverDelay:200},keyCode:{ALT:18,BACKSPACE:8,CAPS_LOCK:20,COMMA:188,COMMAND:91,COMMAND_LEFT:91,COMMAND_RIGHT:93,CONTROL:17,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,INSERT:45,LEFT:37,MENU:93,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SHIFT:16,SPACE:32,TAB:9,UP:38,WINDOWS:91},silentScroll:function(ypos){if($.type(ypos)!=="number"){ypos=$.mobile.defaultHomeScroll;}
$.event.special.scrollstart.enabled=false;setTimeout(function(){window.scrollTo(0,ypos);$(document).trigger("silentscroll",{x:0,y:ypos});},20);setTimeout(function(){$.event.special.scrollstart.enabled=true;},150);},nsNormalizeDict:nsNormalizeDict,nsNormalize:function(prop){if(!prop){return;}
return nsNormalizeDict[prop]||(nsNormalizeDict[prop]=$.camelCase($.mobile.ns+prop));},getInheritedTheme:function(el,defaultTheme){var e=el[0],ltr="",re=/ui-(bar|body|overlay)-([a-z])\b/,c,m;while(e){var c=e.className||"";if((m=re.exec(c))&&(ltr=m[2])){break;}
e=e.parentNode;}
return ltr||defaultTheme||"a";},closestPageData:function($target){return $target.closest(':jqmData(role="page"), :jqmData(role="dialog")').data("page");},enhanceable:function($set){return this.haveParents($set,"enhance");},hijackable:function($set){return this.haveParents($set,"ajax");},haveParents:function($set,attr){if(!$.mobile.ignoreContentEnabled){return $set;}
var count=$set.length,$newSet=$(),e,$element,excluded;for(var i=0;i<count;i++){$element=$set.eq(i);excluded=false;e=$set[i];while(e){var c=e.getAttribute?e.getAttribute("data-"+$.mobile.ns+attr):"";if(c==="false"){excluded=true;break;}
e=e.parentNode;}
if(!excluded){$newSet=$newSet.add($element);}}
return $newSet;}},$.mobile);$.fn.jqmData=function(prop,value){var result;if(typeof prop!="undefined"){if(prop){prop=$.mobile.nsNormalize(prop);}
result=this.data.apply(this,arguments.length<2?[prop]:[prop,value]);}
return result;};$.jqmData=function(elem,prop,value){var result;if(typeof prop!="undefined"){result=$.data(elem,prop?$.mobile.nsNormalize(prop):prop,value);}
return result;};$.fn.jqmRemoveData=function(prop){return this.removeData($.mobile.nsNormalize(prop));};$.jqmRemoveData=function(elem,prop){return $.removeData(elem,$.mobile.nsNormalize(prop));};$.fn.removeWithDependents=function(){$.removeWithDependents(this);};$.removeWithDependents=function(elem){var $elem=$(elem);($elem.jqmData('dependents')||$()).remove();$elem.remove();};$.fn.addDependents=function(newDependents){$.addDependents($(this),newDependents);};$.addDependents=function(elem,newDependents){var dependents=$(elem).jqmData('dependents')||$();$(elem).jqmData('dependents',$.merge(dependents,newDependents));};$.fn.getEncodedText=function(){return $("<div/>").text($(this).text()).html();};$.fn.jqmEnhanceable=function(){return $.mobile.enhanceable(this);};$.fn.jqmHijackable=function(){return $.mobile.hijackable(this);};var oldFind=$.find,jqmDataRE=/:jqmData\(([^)]*)\)/g;$.find=function(selector,context,ret,extra){selector=selector.replace(jqmDataRE,"[data-"+($.mobile.ns||"")+"$1]");return oldFind.call(this,selector,context,ret,extra);};$.extend($.find,oldFind);$.find.matches=function(expr,set){return $.find(expr,null,null,set);};$.find.matchesSelector=function(node,expr){return $.find(expr,null,null,[node]).length>0;};})(jQuery,this);(function($,undefined){var $window=$(window),$html=$("html");$.mobile.media=(function(){var cache={},testDiv=$("<div id='jquery-mediatest'>"),fakeBody=$("<body>").append(testDiv);return function(query){if(!(query in cache)){var styleBlock=document.createElement("style"),cssrule="@media "+query+" { #jquery-mediatest { position:absolute; } }";styleBlock.type="text/css";if(styleBlock.styleSheet){styleBlock.styleSheet.cssText=cssrule;}else{styleBlock.appendChild(document.createTextNode(cssrule));}
$html.prepend(fakeBody).prepend(styleBlock);cache[query]=testDiv.css("position")==="absolute";fakeBody.add(styleBlock).remove();}
return cache[query];};})();})(jQuery);(function($,undefined){var fakeBody=$("<body>").prependTo("html"),fbCSS=fakeBody[0].style,vendors=["Webkit","Moz","O"],webos="palmGetResource"in window,operamini=window.operamini&&({}).toString.call(window.operamini)==="[object OperaMini]",bb=window.blackberry;function propExists(prop){var uc_prop=prop.charAt(0).toUpperCase()+prop.substr(1),props=(prop+" "+vendors.join(uc_prop+" ")+uc_prop).split(" ");for(var v in props){if(fbCSS[props[v]]!==undefined){return true;}}}
function validStyle(prop,value,check_vend){var div=document.createElement('div'),uc=function(txt){return txt.charAt(0).toUpperCase()+txt.substr(1)},vend_pref=function(vend){return"-"+vend.charAt(0).toLowerCase()+vend.substr(1)+"-";},check_style=function(vend){var vend_prop=vend_pref(vend)+prop+": "+value+";",uc_vend=uc(vend),propStyle=uc_vend+uc(prop);div.setAttribute("style",vend_prop);if(!!div.style[propStyle]){ret=true;}},check_vends=check_vend?[check_vend]:vendors,ret;for(i=0;i<check_vends.length;i++){check_style(check_vends[i]);}
return!!ret;}
function transform3dTest(){var prop="transform-3d";return validStyle('perspective','10px','moz')||$.mobile.media("(-"+vendors.join("-"+prop+"),(-")+"-"+prop+"),("+prop+")");}
function baseTagTest(){var fauxBase=location.protocol+"//"+location.host+location.pathname+"ui-dir/",base=$("head base"),fauxEle=null,href="",link,rebase;if(!base.length){base=fauxEle=$("<base>",{"href":fauxBase}).appendTo("head");}else{href=base.attr("href");}
link=$("<a href='testurl' />").prependTo(fakeBody);rebase=link[0].href;base[0].href=href||location.pathname;if(fauxEle){fauxEle.remove();}
return rebase.indexOf(fauxBase)===0;}
$.extend($.mobile,{browser:{}});$.mobile.browser.ie=(function(){var v=3,div=document.createElement("div"),a=div.all||[];while(div.innerHTML="<!--[if gt IE "+(++v)+"]><br><![endif]-->",a[0]){};return v>4?v:!v;})();$.extend($.support,{orientation:"orientation"in window&&"onorientationchange"in window,touch:"ontouchend"in document,cssTransitions:"WebKitTransitionEvent"in window||validStyle('transition','height 100ms linear'),pushState:"pushState"in history&&"replaceState"in history,mediaquery:$.mobile.media("only all"),cssPseudoElement:!!propExists("content"),touchOverflow:!!propExists("overflowScrolling"),cssTransform3d:transform3dTest(),boxShadow:!!propExists("boxShadow")&&!bb,scrollTop:("pageXOffset"in window||"scrollTop"in document.documentElement||"scrollTop"in fakeBody[0])&&!webos&&!operamini,dynamicBaseTag:baseTagTest()});fakeBody.remove();var nokiaLTE7_3=(function(){var ua=window.navigator.userAgent;return ua.indexOf("Nokia")>-1&&(ua.indexOf("Symbian/3")>-1||ua.indexOf("Series60/5")>-1)&&ua.indexOf("AppleWebKit")>-1&&ua.match(/(BrowserNG|NokiaBrowser)\/7\.[0-3]/);})();$.mobile.gradeA=function(){return $.support.mediaquery||$.mobile.browser.ie&&$.mobile.browser.ie>=7;};$.mobile.ajaxBlacklist=window.blackberry&&!window.WebKitPoint||operamini||nokiaLTE7_3;if(nokiaLTE7_3){$(function(){$("head link[rel='stylesheet']").attr("rel","alternate stylesheet").attr("rel","stylesheet");});}
if(!$.support.boxShadow){$("html").addClass("ui-mobile-nosupport-boxshadow");}})(jQuery);(function($,window,undefined){$.each(("touchstart touchmove touchend orientationchange throttledresize "+"tap taphold swipe swipeleft swiperight scrollstart scrollstop").split(" "),function(i,name){$.fn[name]=function(fn){return fn?this.bind(name,fn):this.trigger(name);};$.attrFn[name]=true;});var supportTouch=$.support.touch,scrollEvent="touchmove scroll",touchStartEvent=supportTouch?"touchstart":"mousedown",touchStopEvent=supportTouch?"touchend":"mouseup",touchMoveEvent=supportTouch?"touchmove":"mousemove";function triggerCustomEvent(obj,eventType,event){var originalType=event.type;event.type=eventType;$.event.handle.call(obj,event);event.type=originalType;}
$.event.special.scrollstart={enabled:true,setup:function(){var thisObject=this,$this=$(thisObject),scrolling,timer;function trigger(event,state){scrolling=state;triggerCustomEvent(thisObject,scrolling?"scrollstart":"scrollstop",event);}
$this.bind(scrollEvent,function(event){if(!$.event.special.scrollstart.enabled){return;}
if(!scrolling){trigger(event,true);}
clearTimeout(timer);timer=setTimeout(function(){trigger(event,false);},50);});}};$.event.special.tap={setup:function(){var thisObject=this,$this=$(thisObject);$this.bind("vmousedown",function(event){if(event.which&&event.which!==1){return false;}
var origTarget=event.target,origEvent=event.originalEvent,timer;function clearTapTimer(){clearTimeout(timer);}
function clearTapHandlers(){clearTapTimer();$this.unbind("vclick",clickHandler).unbind("vmouseup",clearTapTimer);$(document).unbind("vmousecancel",clearTapHandlers);}
function clickHandler(event){clearTapHandlers();if(origTarget==event.target){triggerCustomEvent(thisObject,"tap",event);}}
$this.bind("vmouseup",clearTapTimer).bind("vclick",clickHandler);$(document).bind("vmousecancel",clearTapHandlers);timer=setTimeout(function(){triggerCustomEvent(thisObject,"taphold",$.Event("taphold",{target:origTarget}));},750);});}};$.event.special.swipe={scrollSupressionThreshold:10,durationThreshold:1000,horizontalDistanceThreshold:30,verticalDistanceThreshold:75,setup:function(){var thisObject=this,$this=$(thisObject);$this.bind(touchStartEvent,function(event){var data=event.originalEvent.touches?event.originalEvent.touches[0]:event,start={time:(new Date()).getTime(),coords:[data.pageX,data.pageY],origin:$(event.target)},stop;function moveHandler(event){if(!start){return;}
var data=event.originalEvent.touches?event.originalEvent.touches[0]:event;stop={time:(new Date()).getTime(),coords:[data.pageX,data.pageY]};if(Math.abs(start.coords[0]-stop.coords[0])>$.event.special.swipe.scrollSupressionThreshold){event.preventDefault();}}
$this.bind(touchMoveEvent,moveHandler).one(touchStopEvent,function(event){$this.unbind(touchMoveEvent,moveHandler);if(start&&stop){if(stop.time-start.time<$.event.special.swipe.durationThreshold&&Math.abs(start.coords[0]-stop.coords[0])>$.event.special.swipe.horizontalDistanceThreshold&&Math.abs(start.coords[1]-stop.coords[1])<$.event.special.swipe.verticalDistanceThreshold){start.origin.trigger("swipe").trigger(start.coords[0]>stop.coords[0]?"swipeleft":"swiperight");}}
start=stop=undefined;});});}};(function($,window){var win=$(window),special_event,get_orientation,last_orientation,initial_orientation_is_landscape,initial_orientation_is_default,portrait_map={"0":true,"180":true};if($.support.orientation){var ww=window.innerWidth||$(window).width(),wh=window.innerHeight||$(window).height(),landscape_threshold=50;initial_orientation_is_landscape=ww>wh&&(ww-wh)>landscape_threshold;initial_orientation_is_default=portrait_map[window.orientation];if((initial_orientation_is_landscape&&initial_orientation_is_default)||(!initial_orientation_is_landscape&&!initial_orientation_is_default)){portrait_map={"-90":true,"90":true};}}
$.event.special.orientationchange=special_event={setup:function(){if($.support.orientation&&$.mobile.orientationChangeEnabled){return false;}
last_orientation=get_orientation();win.bind("throttledresize",handler);},teardown:function(){if($.support.orientation&&$.mobile.orientationChangeEnabled){return false;}
win.unbind("throttledresize",handler);},add:function(handleObj){var old_handler=handleObj.handler;handleObj.handler=function(event){event.orientation=get_orientation();return old_handler.apply(this,arguments);};}};function handler(){var orientation=get_orientation();if(orientation!==last_orientation){last_orientation=orientation;win.trigger("orientationchange");}}
$.event.special.orientationchange.orientation=get_orientation=function(){var isPortrait=true,elem=document.documentElement;if($.support.orientation){isPortrait=portrait_map[window.orientation];}else{isPortrait=elem&&elem.clientWidth/elem.clientHeight<1.1;}
return isPortrait?"portrait":"landscape";};})(jQuery,window);(function(){$.event.special.throttledresize={setup:function(){$(this).bind("resize",handler);},teardown:function(){$(this).unbind("resize",handler);}};var throttle=250,handler=function(){curr=(new Date()).getTime();diff=curr-lastCall;if(diff>=throttle){lastCall=curr;$(this).trigger("throttledresize");}else{if(heldCall){clearTimeout(heldCall);}
heldCall=setTimeout(handler,throttle-diff);}},lastCall=0,heldCall,curr,diff;})();$.each({scrollstop:"scrollstart",taphold:"tap",swipeleft:"swipe",swiperight:"swipe"},function(event,sourceEvent){$.event.special[event]={setup:function(){$(this).bind(sourceEvent,$.noop);}};});})(jQuery,this);(function($,undefined){$.widget("mobile.page",$.mobile.widget,{options:{theme:"c",domCache:false,keepNativeDefault:":jqmData(role='none'), :jqmData(role='nojs')"},_create:function(){var self=this;if(self._trigger("beforecreate")===false){return false;}
self.element.attr("tabindex","0").addClass("ui-page ui-body-"+self.options.theme).bind("pagebeforehide",function(){self.removeContainerBackground();}).bind("pagebeforeshow",function(){self.setContainerBackground();});},removeContainerBackground:function(){$.mobile.pageContainer.removeClass("ui-overlay-"+$.mobile.getInheritedTheme(this.element.parent()));},setContainerBackground:function(theme){if(this.options.theme){$.mobile.pageContainer.addClass("ui-overlay-"+(theme||this.options.theme));}},keepNativeSelector:function(){var options=this.options,keepNativeDefined=options.keepNative&&$.trim(options.keepNative);if(keepNativeDefined&&options.keepNative!==options.keepNativeDefault){return[options.keepNative,options.keepNativeDefault].join(", ");}
return options.keepNativeDefault;}});})(jQuery);(function($,window,undefined){var createHandler=function(sequential){if(sequential===undefined){sequential=true;}
return function(name,reverse,$to,$from){var deferred=new $.Deferred(),reverseClass=reverse?" reverse":"",active=$.mobile.urlHistory.getActive(),toScroll=active.lastScroll||$.mobile.defaultHomeScroll,screenHeight=$.mobile.getScreenHeight(),maxTransitionOverride=$.mobile.maxTransitionWidth!==false&&$(window).width()>$.mobile.maxTransitionWidth,none=!$.support.cssTransitions||maxTransitionOverride||!name||name==="none",toggleViewportClass=function(){$.mobile.pageContainer.toggleClass("ui-mobile-viewport-transitioning viewport-"+name);},scrollPage=function(){$.event.special.scrollstart.enabled=false;window.scrollTo(0,toScroll);setTimeout(function(){$.event.special.scrollstart.enabled=true;},150);},cleanFrom=function(){$from.removeClass($.mobile.activePageClass+" out in reverse "+name).height("");},startOut=function(){if(!sequential){doneOut();}
else{$from.animationComplete(doneOut);}
$from.height(screenHeight+$(window).scrollTop()).addClass(name+" out"+reverseClass);},doneOut=function(){if($from&&sequential){cleanFrom();}
startIn();},startIn=function(){$to.addClass($.mobile.activePageClass);$.mobile.focusPage($to);$to.height(screenHeight+toScroll);scrollPage();if(!none){$to.animationComplete(doneIn);}
$to.addClass(name+" in"+reverseClass);if(none){doneIn();}},doneIn=function(){if(!sequential){if($from){cleanFrom();}}
$to.removeClass("out in reverse "+name).height("");toggleViewportClass();if($(window).scrollTop()!==toScroll){scrollPage();}
deferred.resolve(name,reverse,$to,$from,true);};toggleViewportClass();if($from&&!none){startOut();}
else{doneOut();}
return deferred.promise();};}
var sequentialHandler=createHandler(),simultaneousHandler=createHandler(false);$.mobile.defaultTransitionHandler=sequentialHandler;$.mobile.transitionHandlers={"default":$.mobile.defaultTransitionHandler,"sequential":sequentialHandler,"simultaneous":simultaneousHandler};$.mobile.transitionFallbacks={};})(jQuery,this);(function($,undefined){var $window=$(window),$html=$('html'),$head=$('head'),path={urlParseRE:/^(((([^:\/#\?]+:)?(?:(\/\/)((?:(([^:@\/#\?]+)(?:\:([^:@\/#\?]+))?)@)?(([^:\/#\?\]\[]+|\[[^\/\]@#?]+\])(?:\:([0-9]+))?))?)?)?((\/?(?:[^\/\?#]+\/+)*)([^\?#]*)))?(\?[^#]+)?)(#.*)?/,parseUrl:function(url){if($.type(url)==="object"){return url;}
var matches=path.urlParseRE.exec(url||"")||[];return{href:matches[0]||"",hrefNoHash:matches[1]||"",hrefNoSearch:matches[2]||"",domain:matches[3]||"",protocol:matches[4]||"",doubleSlash:matches[5]||"",authority:matches[6]||"",username:matches[8]||"",password:matches[9]||"",host:matches[10]||"",hostname:matches[11]||"",port:matches[12]||"",pathname:matches[13]||"",directory:matches[14]||"",filename:matches[15]||"",search:matches[16]||"",hash:matches[17]||""};},makePathAbsolute:function(relPath,absPath){if(relPath&&relPath.charAt(0)==="/"){return relPath;}
relPath=relPath||"";absPath=absPath?absPath.replace(/^\/|(\/[^\/]*|[^\/]+)$/g,""):"";var absStack=absPath?absPath.split("/"):[],relStack=relPath.split("/");for(var i=0;i<relStack.length;i++){var d=relStack[i];switch(d){case".":break;case"..":if(absStack.length){absStack.pop();}
break;default:absStack.push(d);break;}}
return"/"+absStack.join("/");},isSameDomain:function(absUrl1,absUrl2){return path.parseUrl(absUrl1).domain===path.parseUrl(absUrl2).domain;},isRelativeUrl:function(url){return path.parseUrl(url).protocol==="";},isAbsoluteUrl:function(url){return path.parseUrl(url).protocol!=="";},makeUrlAbsolute:function(relUrl,absUrl){if(!path.isRelativeUrl(relUrl)){return relUrl;}
var relObj=path.parseUrl(relUrl),absObj=path.parseUrl(absUrl),protocol=relObj.protocol||absObj.protocol,doubleSlash=relObj.protocol?relObj.doubleSlash:(relObj.doubleSlash||absObj.doubleSlash),authority=relObj.authority||absObj.authority,hasPath=relObj.pathname!=="",pathname=path.makePathAbsolute(relObj.pathname||absObj.filename,absObj.pathname),search=relObj.search||(!hasPath&&absObj.search)||"",hash=relObj.hash;return protocol+doubleSlash+authority+pathname+search+hash;},addSearchParams:function(url,params){var u=path.parseUrl(url),p=(typeof params==="object")?$.param(params):params,s=u.search||"?";return u.hrefNoSearch+s+(s.charAt(s.length-1)!=="?"?"&":"")+p+(u.hash||"");},convertUrlToDataUrl:function(absUrl){var u=path.parseUrl(absUrl);if(path.isEmbeddedPage(u)){return u.hash.split(dialogHashKey)[0].replace(/^#/,"");}else if(path.isSameDomain(u,documentBase)){return u.hrefNoHash.replace(documentBase.domain,"");}
return absUrl;},get:function(newPath){if(newPath===undefined){newPath=location.hash;}
return path.stripHash(newPath).replace(/[^\/]*\.[^\/*]+$/,'');},getFilePath:function(path){var splitkey='&'+$.mobile.subPageUrlKey;return path&&path.split(splitkey)[0].split(dialogHashKey)[0];},set:function(path){location.hash=path;},isPath:function(url){return(/\//).test(url);},clean:function(url){return url.replace(documentBase.domain,"");},stripHash:function(url){return url.replace(/^#/,"");},cleanHash:function(hash){return path.stripHash(hash.replace(/\?.*$/,"").replace(dialogHashKey,""));},isExternal:function(url){var u=path.parseUrl(url);return u.protocol&&u.domain!==documentUrl.domain?true:false;},hasProtocol:function(url){return(/^(:?\w+:)/).test(url);},isFirstPageUrl:function(url){var u=path.parseUrl(path.makeUrlAbsolute(url,documentBase)),samePath=u.hrefNoHash===documentUrl.hrefNoHash||(documentBaseDiffers&&u.hrefNoHash===documentBase.hrefNoHash),fp=$.mobile.firstPage,fpId=fp&&fp[0]?fp[0].id:undefined;return samePath&&(!u.hash||u.hash==="#"||(fpId&&u.hash.replace(/^#/,"")===fpId));},isEmbeddedPage:function(url){var u=path.parseUrl(url);if(u.protocol!==""){return(u.hash&&(u.hrefNoHash===documentUrl.hrefNoHash||(documentBaseDiffers&&u.hrefNoHash===documentBase.hrefNoHash)));}
return(/^#/).test(u.href);}},$activeClickedLink=null,urlHistory={stack:[],activeIndex:0,getActive:function(){return urlHistory.stack[urlHistory.activeIndex];},getPrev:function(){return urlHistory.stack[urlHistory.activeIndex-1];},getNext:function(){return urlHistory.stack[urlHistory.activeIndex+1];},addNew:function(url,transition,title,pageUrl,role){if(urlHistory.getNext()){urlHistory.clearForward();}
urlHistory.stack.push({url:url,transition:transition,title:title,pageUrl:pageUrl,role:role});urlHistory.activeIndex=urlHistory.stack.length-1;},clearForward:function(){urlHistory.stack=urlHistory.stack.slice(0,urlHistory.activeIndex+1);},directHashChange:function(opts){var back,forward,newActiveIndex,prev=this.getActive();$.each(urlHistory.stack,function(i,historyEntry){if(opts.currentUrl===historyEntry.url){back=i<urlHistory.activeIndex;forward=!back;newActiveIndex=i;}});this.activeIndex=newActiveIndex!==undefined?newActiveIndex:this.activeIndex;if(back){(opts.either||opts.isBack)(true);}else if(forward){(opts.either||opts.isForward)(false);}},ignoreNextHashChange:false},focusable="[tabindex],a,button:visible,select:visible,input",pageTransitionQueue=[],isPageTransitioning=false,dialogHashKey="&ui-state=dialog",$base=$head.children("base"),documentUrl=path.parseUrl(location.href),documentBase=$base.length?path.parseUrl(path.makeUrlAbsolute($base.attr("href"),documentUrl.href)):documentUrl,documentBaseDiffers=(documentUrl.hrefNoHash!==documentBase.hrefNoHash);var base=$.support.dynamicBaseTag?{element:($base.length?$base:$("<base>",{href:documentBase.hrefNoHash}).prependTo($head)),set:function(href){base.element.attr("href",path.makeUrlAbsolute(href,documentBase));},reset:function(){base.element.attr("href",documentBase.hrefNoHash);}}:undefined;$.mobile.focusPage=function(page){var autofocus=page.find("[autofocus]"),pageTitle=page.find(".ui-title:eq(0)");if(autofocus.length){autofocus.focus();return;}
if(pageTitle.length){pageTitle.focus();}
else{page.focus();}}
function removeActiveLinkClass(forceRemoval){if(!!$activeClickedLink&&(!$activeClickedLink.closest('.ui-page-active').length||forceRemoval)){$activeClickedLink.removeClass($.mobile.activeBtnClass);}
$activeClickedLink=null;}
function releasePageTransitionLock(){isPageTransitioning=false;if(pageTransitionQueue.length>0){$.mobile.changePage.apply(null,pageTransitionQueue.pop());}}
var setLastScrollEnabled=true,setLastScroll,delayedSetLastScroll;setLastScroll=function(){if(!setLastScrollEnabled){return;}
var active=$.mobile.urlHistory.getActive();if(active){var lastScroll=$window.scrollTop();active.lastScroll=lastScroll<$.mobile.minScrollBack?$.mobile.defaultHomeScroll:lastScroll;}};delayedSetLastScroll=function(){setTimeout(setLastScroll,100);};$window.bind($.support.pushState?"popstate":"hashchange",function(){setLastScrollEnabled=false;});$window.one($.support.pushState?"popstate":"hashchange",function(){setLastScrollEnabled=true;});$window.one("pagecontainercreate",function(){$.mobile.pageContainer.bind("pagechange",function(){setLastScrollEnabled=true;$window.unbind("scrollstop",delayedSetLastScroll);$window.bind("scrollstop",delayedSetLastScroll);});});$window.bind("scrollstop",delayedSetLastScroll);function transitionPages(toPage,fromPage,transition,reverse){if(fromPage){fromPage.data("page")._trigger("beforehide",null,{nextPage:toPage});}
toPage.data("page")._trigger("beforeshow",null,{prevPage:fromPage||$("")});$.mobile.hidePageLoadingMsg();if(transition&&!$.support.cssTransform3d&&$.mobile.transitionFallbacks[transition]){transition=$.mobile.transitionFallbacks[transition];}
var th=$.mobile.transitionHandlers[transition||"default"]||$.mobile.defaultTransitionHandler,promise=th(transition,reverse,toPage,fromPage);promise.done(function(){if(fromPage){fromPage.data("page")._trigger("hide",null,{nextPage:toPage});}
toPage.data("page")._trigger("show",null,{prevPage:fromPage||$("")});});return promise;}
function getScreenHeight(){return window.innerHeight||$(window).height();}
$.mobile.getScreenHeight=getScreenHeight;function resetActivePageHeight(){var aPage=$("."+$.mobile.activePageClass),aPagePadT=parseFloat(aPage.css("padding-top")),aPagePadB=parseFloat(aPage.css("padding-bottom"));aPage.css("min-height",getScreenHeight()-aPagePadT-aPagePadB);}
function enhancePage($page,role){if(role){$page.attr("data-"+$.mobile.ns+"role",role);}
$page.page();}
$.fn.animationComplete=function(callback){if($.support.cssTransitions){return $(this).one('webkitAnimationEnd animationend',callback);}
else{setTimeout(callback,0);return $(this);}};$.mobile.path=path;$.mobile.base=base;$.mobile.urlHistory=urlHistory;$.mobile.dialogHashKey=dialogHashKey;$.mobile.allowCrossDomainPages=false;$.mobile.getDocumentUrl=function(asParsedObject){return asParsedObject?$.extend({},documentUrl):documentUrl.href;};$.mobile.getDocumentBase=function(asParsedObject){return asParsedObject?$.extend({},documentBase):documentBase.href;};$.mobile._bindPageRemove=function(){var page=$(this);if(!page.data("page").options.domCache&&page.is(":jqmData(external-page='true')")){page.bind('pagehide.remove',function(){var $this=$(this),prEvent=new $.Event("pageremove");$this.trigger(prEvent);if(!prEvent.isDefaultPrevented()){$this.removeWithDependents();}});}};$.mobile.loadPage=function(url,options){var deferred=$.Deferred(),settings=$.extend({},$.mobile.loadPage.defaults,options),page=null,dupCachedPage=null,findBaseWithDefault=function(){var closestBase=($.mobile.activePage&&getClosestBaseUrl($.mobile.activePage));return closestBase||documentBase.hrefNoHash;},absUrl=path.makeUrlAbsolute(url,findBaseWithDefault());if(settings.data&&settings.type==="get"){absUrl=path.addSearchParams(absUrl,settings.data);settings.data=undefined;}
if(settings.data&&settings.type==="post"){settings.reloadPage=true;}
var fileUrl=path.getFilePath(absUrl),dataUrl=path.convertUrlToDataUrl(absUrl);settings.pageContainer=settings.pageContainer||$.mobile.pageContainer;page=settings.pageContainer.children(":jqmData(url='"+dataUrl+"')");if(page.length===0&&dataUrl&&!path.isPath(dataUrl)){page=settings.pageContainer.children("#"+dataUrl).attr("data-"+$.mobile.ns+"url",dataUrl);}
if(page.length===0){if($.mobile.firstPage&&path.isFirstPageUrl(fileUrl)){if($.mobile.firstPage.parent().length){page=$($.mobile.firstPage);}}else if(path.isEmbeddedPage(fileUrl)){deferred.reject(absUrl,options);return deferred.promise();}}
if(base){base.reset();}
if(page.length){if(!settings.reloadPage){enhancePage(page,settings.role);deferred.resolve(absUrl,options,page);return deferred.promise();}
dupCachedPage=page;}
var mpc=settings.pageContainer,pblEvent=new $.Event("pagebeforeload"),triggerData={url:url,absUrl:absUrl,dataUrl:dataUrl,deferred:deferred,options:settings};mpc.trigger(pblEvent,triggerData);if(pblEvent.isDefaultPrevented()){return deferred.promise();}
if(settings.showLoadMsg){var loadMsgDelay=setTimeout(function(){$.mobile.showPageLoadingMsg();},settings.loadMsgDelay),hideMsg=function(){clearTimeout(loadMsgDelay);$.mobile.hidePageLoadingMsg();};}
if(!($.mobile.allowCrossDomainPages||path.isSameDomain(documentUrl,absUrl))){deferred.reject(absUrl,options);}else{$.ajax({url:fileUrl,type:settings.type,data:settings.data,dataType:"html",success:function(html,textStatus,xhr){var all=$("<div></div>"),newPageTitle=html.match(/<title[^>]*>([^<]*)/)&&RegExp.$1,pageElemRegex=new RegExp("(<[^>]+\\bdata-"+$.mobile.ns+"role=[\"']?page[\"']?[^>]*>)"),dataUrlRegex=new RegExp("\\bdata-"+$.mobile.ns+"url=[\"']?([^\"'>]*)[\"']?");if(pageElemRegex.test(html)&&RegExp.$1&&dataUrlRegex.test(RegExp.$1)&&RegExp.$1){url=fileUrl=path.getFilePath(RegExp.$1);}
if(base){base.set(fileUrl);}
all.get(0).innerHTML=html;page=all.find(":jqmData(role='page'), :jqmData(role='dialog')").first();if(!page.length){page=$("<div data-"+$.mobile.ns+"role='page'>"+html.split(/<\/?body[^>]*>/gmi)[1]+"</div>");}
if(newPageTitle&&!page.jqmData("title")){if(~newPageTitle.indexOf("&")){newPageTitle=$("<div>"+newPageTitle+"</div>").text();}
page.jqmData("title",newPageTitle);}
if(!$.support.dynamicBaseTag){var newPath=path.get(fileUrl);page.find("[src], link[href], a[rel='external'], :jqmData(ajax='false'), a[target]").each(function(){var thisAttr=$(this).is('[href]')?'href':$(this).is('[src]')?'src':'action',thisUrl=$(this).attr(thisAttr);thisUrl=thisUrl.replace(location.protocol+'//'+location.host+location.pathname,'');if(!/^(\w+:|#|\/)/.test(thisUrl)){$(this).attr(thisAttr,newPath+thisUrl);}});}
page.attr("data-"+$.mobile.ns+"url",path.convertUrlToDataUrl(fileUrl)).attr("data-"+$.mobile.ns+"external-page",true).appendTo(settings.pageContainer);page.one('pagecreate',$.mobile._bindPageRemove);enhancePage(page,settings.role);if(absUrl.indexOf("&"+$.mobile.subPageUrlKey)>-1){page=settings.pageContainer.children(":jqmData(url='"+dataUrl+"')");}
if(settings.showLoadMsg){hideMsg();}
triggerData.xhr=xhr;triggerData.textStatus=textStatus;triggerData.page=page;settings.pageContainer.trigger("pageload",triggerData);deferred.resolve(absUrl,options,page,dupCachedPage);},error:function(xhr,textStatus,errorThrown){if(base){base.set(path.get());}
triggerData.xhr=xhr;triggerData.textStatus=textStatus;triggerData.errorThrown=errorThrown;var plfEvent=new $.Event("pageloadfailed");settings.pageContainer.trigger(plfEvent,triggerData);if(plfEvent.isDefaultPrevented()){return;}
if(settings.showLoadMsg){hideMsg();$.mobile.showPageLoadingMsg($.mobile.pageLoadErrorMessageTheme,$.mobile.pageLoadErrorMessage,true);setTimeout($.mobile.hidePageLoadingMsg,1500);}
deferred.reject(absUrl,options);}});}
return deferred.promise();};$.mobile.loadPage.defaults={type:"get",data:undefined,reloadPage:false,role:undefined,showLoadMsg:false,pageContainer:undefined,loadMsgDelay:50};$.mobile.changePage=function(toPage,options){if(isPageTransitioning){pageTransitionQueue.unshift(arguments);return;}
var settings=$.extend({},$.mobile.changePage.defaults,options);settings.pageContainer=settings.pageContainer||$.mobile.pageContainer;settings.fromPage=settings.fromPage||$.mobile.activePage;var mpc=settings.pageContainer,pbcEvent=new $.Event("pagebeforechange"),triggerData={toPage:toPage,options:settings};mpc.trigger(pbcEvent,triggerData);if(pbcEvent.isDefaultPrevented()){return;}
toPage=triggerData.toPage;isPageTransitioning=true;if(typeof toPage=="string"){$.mobile.loadPage(toPage,settings).done(function(url,options,newPage,dupCachedPage){isPageTransitioning=false;options.duplicateCachedPage=dupCachedPage;$.mobile.changePage(newPage,options);}).fail(function(url,options){isPageTransitioning=false;removeActiveLinkClass(true);releasePageTransitionLock();settings.pageContainer.trigger("pagechangefailed",triggerData);});return;}
if(toPage[0]===$.mobile.firstPage[0]&&!settings.dataUrl){settings.dataUrl=documentUrl.hrefNoHash;}
var fromPage=settings.fromPage,url=(settings.dataUrl&&path.convertUrlToDataUrl(settings.dataUrl))||toPage.jqmData("url"),pageUrl=url,fileUrl=path.getFilePath(url),active=urlHistory.getActive(),activeIsInitialPage=urlHistory.activeIndex===0,historyDir=0,pageTitle=document.title,isDialog=settings.role==="dialog"||toPage.jqmData("role")==="dialog";if(fromPage&&fromPage[0]===toPage[0]&&!settings.allowSamePageTransition){isPageTransitioning=false;mpc.trigger("pagechange",triggerData);return;}
enhancePage(toPage,settings.role);if(settings.fromHashChange){urlHistory.directHashChange({currentUrl:url,isBack:function(){historyDir=-1;},isForward:function(){historyDir=1;}});}
try{if(document.activeElement&&document.activeElement.nodeName.toLowerCase()!='body'){$(document.activeElement).blur();}else{$("input:focus, textarea:focus, select:focus").blur();}}catch(e){}
if(isDialog&&active){url=(active.url||"")+dialogHashKey;}
if(settings.changeHash!==false&&url){urlHistory.ignoreNextHashChange=true;path.set(url);}
var newPageTitle=(!active)?pageTitle:toPage.jqmData("title")||toPage.children(":jqmData(role='header')").find(".ui-title").getEncodedText();if(!!newPageTitle&&pageTitle==document.title){pageTitle=newPageTitle;}
if(!toPage.jqmData("title")){toPage.jqmData("title",pageTitle);}
settings.transition=settings.transition||((historyDir&&!activeIsInitialPage)?active.transition:undefined)||(isDialog?$.mobile.defaultDialogTransition:$.mobile.defaultPageTransition);if(!historyDir){urlHistory.addNew(url,settings.transition,pageTitle,pageUrl,settings.role);}
document.title=urlHistory.getActive().title;$.mobile.activePage=toPage;settings.reverse=settings.reverse||historyDir<0;transitionPages(toPage,fromPage,settings.transition,settings.reverse).done(function(name,reverse,$to,$from,alreadyFocused){removeActiveLinkClass();if(settings.duplicateCachedPage){settings.duplicateCachedPage.remove();}
if(!alreadyFocused){$.mobile.focusPage(toPage);}
releasePageTransitionLock();mpc.trigger("pagechange",triggerData);});};$.mobile.changePage.defaults={transition:undefined,reverse:false,changeHash:true,fromHashChange:false,role:undefined,duplicateCachedPage:undefined,pageContainer:undefined,showLoadMsg:true,dataUrl:undefined,fromPage:undefined,allowSamePageTransition:false};function findClosestLink(ele)
{while(ele){if((typeof ele.nodeName==="string")&&ele.nodeName.toLowerCase()=="a"){break;}
ele=ele.parentNode;}
return ele;}
function getClosestBaseUrl(ele)
{var url=$(ele).closest(".ui-page").jqmData("url"),base=documentBase.hrefNoHash;if(!url||!path.isPath(url)){url=base;}
return path.makeUrlAbsolute(url,base);}
$.mobile._registerInternalEvents=function(){$(document).delegate("form","submit",function(event){var $this=$(this);if(!$.mobile.ajaxEnabled||$this.is(":jqmData(ajax='false')")||!$this.jqmHijackable().length){return;}
var type=$this.attr("method"),target=$this.attr("target"),url=$this.attr("action");if(!url){url=getClosestBaseUrl($this);if(url===documentBase.hrefNoHash){url=documentUrl.hrefNoSearch;}}
url=path.makeUrlAbsolute(url,getClosestBaseUrl($this));if(path.isExternal(url)||target){return;}
$.mobile.changePage(url,{type:type&&type.length&&type.toLowerCase()||"get",data:$this.serialize(),transition:$this.jqmData("transition"),direction:$this.jqmData("direction"),reloadPage:true});event.preventDefault();});$(document).bind("vclick",function(event){if(event.which>1||!$.mobile.linkBindingEnabled){return;}
var link=findClosestLink(event.target);if(!$(link).jqmHijackable().length){return;}
if(link){if(path.parseUrl(link.getAttribute("href")||"#").hash!=="#"){removeActiveLinkClass(true);$activeClickedLink=$(link).closest(".ui-btn").not(".ui-disabled");$activeClickedLink.addClass($.mobile.activeBtnClass);$("."+$.mobile.activePageClass+" .ui-btn").not(link).blur();$(link).jqmData("href",$(link).attr("href")).attr("href","#");}}});$(document).bind("click",function(event){if(!$.mobile.linkBindingEnabled){return;}
var link=findClosestLink(event.target),$link=$(link),httpCleanup;if(!link||event.which>1||!$link.jqmHijackable().length){return;}
httpCleanup=function(){window.setTimeout(function(){removeActiveLinkClass(true);},200);};if($link.jqmData("href")){$link.attr("href",$link.jqmData("href"));}
if($link.is(":jqmData(rel='back')")){window.history.back();return false;}
var baseUrl=getClosestBaseUrl($link),href=path.makeUrlAbsolute($link.attr("href")||"#",baseUrl);if(!$.mobile.ajaxEnabled&&!path.isEmbeddedPage(href)){httpCleanup();return;}
if(href.search("#")!=-1){href=href.replace(/[^#]*#/,"");if(!href){event.preventDefault();return;}else if(path.isPath(href)){href=path.makeUrlAbsolute(href,baseUrl);}else{href=path.makeUrlAbsolute("#"+href,documentUrl.hrefNoHash);}}
var useDefaultUrlHandling=$link.is("[rel='external']")||$link.is(":jqmData(ajax='false')")||$link.is("[target]"),isCrossDomainPageLoad=($.mobile.allowCrossDomainPages&&documentUrl.protocol==="file:"&&href.search(/^https?:/)!=-1),isExternal=useDefaultUrlHandling||(path.isExternal(href)&&!isCrossDomainPageLoad);if(isExternal){httpCleanup();return;}
var transition=$link.jqmData("transition"),direction=$link.jqmData("direction"),reverse=(direction&&direction==="reverse")||$link.jqmData("back"),role=$link.attr("data-"+$.mobile.ns+"rel")||undefined;$.mobile.changePage(href,{transition:transition,reverse:reverse,role:role});event.preventDefault();});$(document).delegate(".ui-page","pageshow.prefetch",function(){var urls=[];$(this).find("a:jqmData(prefetch)").each(function(){var $link=$(this),url=$link.attr("href");if(url&&$.inArray(url,urls)===-1){urls.push(url);$.mobile.loadPage(url,{role:$link.attr("data-"+$.mobile.ns+"rel")});}});});$.mobile._handleHashChange=function(hash){var to=path.stripHash(hash),transition=$.mobile.urlHistory.stack.length===0?"none":undefined,changePageOptions={transition:transition,changeHash:false,fromHashChange:true};if(!$.mobile.hashListeningEnabled||urlHistory.ignoreNextHashChange){urlHistory.ignoreNextHashChange=false;return;}
if(urlHistory.stack.length>1&&to.indexOf(dialogHashKey)>-1){if(!$.mobile.activePage.is(".ui-dialog")){urlHistory.directHashChange({currentUrl:to,isBack:function(){window.history.back();},isForward:function(){window.history.forward();}});return;}else{urlHistory.directHashChange({currentUrl:to,either:function(isBack){var active=$.mobile.urlHistory.getActive();to=active.pageUrl;$.extend(changePageOptions,{role:active.role,transition:active.transition,reverse:isBack});}});}}
if(to){to=(typeof to==="string"&&!path.isPath(to))?(path.makeUrlAbsolute('#'+to,documentBase)):to;$.mobile.changePage(to,changePageOptions);}else{$.mobile.changePage($.mobile.firstPage,changePageOptions);}};$window.bind("hashchange",function(e,triggered){$.mobile._handleHashChange(location.hash);});$(document).bind("pageshow",resetActivePageHeight);$(window).bind("throttledresize",resetActivePageHeight);};})(jQuery);(function($,window){var pushStateHandler={},self=pushStateHandler,$win=$(window),url=$.mobile.path.parseUrl(location.href);$.extend(pushStateHandler,{initialFilePath:(function(){return url.pathname+url.search;})(),initialHref:url.hrefNoHash,state:function(){return{hash:location.hash||"#"+self.initialFilePath,title:document.title,initialHref:self.initialHref};},resetUIKeys:function(url){var dialog=$.mobile.dialogHashKey,subkey="&"+$.mobile.subPageUrlKey,dialogIndex=url.indexOf(dialog);if(dialogIndex>-1){url=url.slice(0,dialogIndex)+"#"+url.slice(dialogIndex);}else if(url.indexOf(subkey)>-1){url=url.split(subkey).join("#"+subkey);}
return url;},hashValueAfterReset:function(url){var resetUrl=self.resetUIKeys(url);return $.mobile.path.parseUrl(resetUrl).hash;},nextHashChangePrevented:function(value){$.mobile.urlHistory.ignoreNextHashChange=value;self.onHashChangeDisabled=value;},onHashChange:function(e){if(self.onHashChangeDisabled){return;}
var href,state,hash=location.hash,isPath=$.mobile.path.isPath(hash),resolutionUrl=isPath?location.href:$.mobile.getDocumentUrl();hash=isPath?hash.replace("#",""):hash;state=self.state();href=$.mobile.path.makeUrlAbsolute(hash,resolutionUrl);if(isPath){href=self.resetUIKeys(href);}
history.replaceState(state,document.title,href);},onPopState:function(e){var poppedState=e.originalEvent.state,timeout,fromHash,toHash,hashChanged;if(poppedState){fromHash=self.hashValueAfterReset($.mobile.urlHistory.getActive().url);toHash=self.hashValueAfterReset(poppedState.hash.replace("#",""));hashChanged=fromHash!==toHash;if(hashChanged){$win.one("hashchange.pushstate",function(){self.nextHashChangePrevented(false);});}
self.nextHashChangePrevented(false);$.mobile._handleHashChange(poppedState.hash);if(hashChanged){self.nextHashChangePrevented(true);}}},init:function(){$win.bind("hashchange",self.onHashChange);$win.bind("popstate",self.onPopState);if(location.hash===""){history.replaceState(self.state(),document.title,location.href);}}});$(function(){if($.mobile.pushStateEnabled&&$.support.pushState){pushStateHandler.init();}});})(jQuery,this);(function($,window,undefined){$.mobile.transitionFallbacks.pop="fade";})(jQuery,this);(function($,window,undefined){$.mobile.transitionHandlers.slide=$.mobile.transitionHandlers.simultaneous;$.mobile.transitionFallbacks.slide="fade";})(jQuery,this);(function($,window,undefined){$.mobile.transitionFallbacks.slidedown="fade";})(jQuery,this);(function($,window,undefined){$.mobile.transitionFallbacks.slideup="fade";})(jQuery,this);(function($,window,undefined){$.mobile.transitionFallbacks.flip="fade";})(jQuery,this);(function($,window,undefined){$.mobile.transitionFallbacks.flow="fade";})(jQuery,this);(function($,window,undefined){$.mobile.transitionFallbacks.turn="fade";})(jQuery,this);(function($,undefined){$.mobile.page.prototype.options.degradeInputs={color:false,date:false,datetime:false,"datetime-local":false,email:false,month:false,number:false,range:"number",search:"text",tel:false,time:false,url:false,week:false};$(document).bind("pagecreate create",function(e){var page=$.mobile.closestPageData($(e.target)),options;if(!page){return;}
options=page.options;$(e.target).find("input").not(page.keepNativeSelector()).each(function(){var $this=$(this),type=this.getAttribute("type"),optType=options.degradeInputs[type]||"text";if(options.degradeInputs[type]){var html=$("<div>").html($this.clone()).html(),hasType=html.indexOf(" type=")>-1,findstr=hasType?/\s+type=["']?\w+['"]?/:/\/?>/,repstr=" type=\""+optType+"\" data-"+$.mobile.ns+"type=\""+type+"\""+(hasType?"":">");$this.replaceWith(html.replace(findstr,repstr));}});});})(jQuery);(function($,window,undefined){$.widget("mobile.dialog",$.mobile.widget,{options:{closeBtnText:"Close",overlayTheme:"a",initSelector:":jqmData(role='dialog')"},_create:function(){var self=this,$el=this.element,headerCloseButton=$("<a href='#' data-"+$.mobile.ns+"icon='delete' data-"+$.mobile.ns+"iconpos='notext'>"+this.options.closeBtnText+"</a>"),dialogWrap=$("<div/>",{"role":"dialog","class":"ui-dialog-contain ui-corner-all ui-overlay-shadow"});$el.addClass("ui-dialog ui-overlay-"+this.options.overlayTheme);$el.wrapInner(dialogWrap).children().find(":jqmData(role='header')").prepend(headerCloseButton).end().children(':first-child').addClass("ui-corner-top").end().children(":last-child").addClass("ui-corner-bottom");headerCloseButton.bind("click",function(){self.close();});$el.bind("vclick submit",function(event){var $target=$(event.target).closest(event.type==="vclick"?"a":"form"),active;if($target.length&&!$target.jqmData("transition")){active=$.mobile.urlHistory.getActive()||{};$target.attr("data-"+$.mobile.ns+"transition",(active.transition||$.mobile.defaultDialogTransition)).attr("data-"+$.mobile.ns+"direction","reverse");}}).bind("pagehide",function(e,ui){$(this).find("."+$.mobile.activeBtnClass).removeClass($.mobile.activeBtnClass);}).bind("pagebeforeshow",function(){if(self.options.overlayTheme){self.element.page("removeContainerBackground").page("setContainerBackground",self.options.overlayTheme);}});},close:function(){window.history.back();}});$(document).delegate($.mobile.dialog.prototype.options.initSelector,"pagecreate",function(){$.mobile.dialog.prototype.enhance(this);});})(jQuery,this);(function($,undefined){$.fn.fieldcontain=function(options){return this.addClass("ui-field-contain ui-body ui-br");};$(document).bind("pagecreate create",function(e){$(":jqmData(role='fieldcontain')",e.target).jqmEnhanceable().fieldcontain();});})(jQuery);(function($,undefined){$.fn.grid=function(options){return this.each(function(){var $this=$(this),o=$.extend({grid:null},options),$kids=$this.children(),gridCols={solo:1,a:2,b:3,c:4,d:5},grid=o.grid,iterator;if(!grid){if($kids.length<=5){for(var letter in gridCols){if(gridCols[letter]===$kids.length){grid=letter;}}}else{grid="a";}}
iterator=gridCols[grid];$this.addClass("ui-grid-"+grid);$kids.filter(":nth-child("+iterator+"n+1)").addClass("ui-block-a");if(iterator>1){$kids.filter(":nth-child("+iterator+"n+2)").addClass("ui-block-b");}
if(iterator>2){$kids.filter(":nth-child(3n+3)").addClass("ui-block-c");}
if(iterator>3){$kids.filter(":nth-child(4n+4)").addClass("ui-block-d");}
if(iterator>4){$kids.filter(":nth-child(5n+5)").addClass("ui-block-e");}});};})(jQuery);(function($,undefined){$(document).bind("pagecreate create",function(e){$(":jqmData(role='nojs')",e.target).addClass("ui-nojs");});})(jQuery);(function($,undefined){$.fn.buttonMarkup=function(options){var $workingSet=this;options=(options&&($.type(options)=="object"))?options:{};for(var i=0;i<$workingSet.length;i++){var el=$workingSet.eq(i),e=el[0],o=$.extend({},$.fn.buttonMarkup.defaults,{icon:options.icon!==undefined?options.icon:el.jqmData("icon"),iconpos:options.iconpos!==undefined?options.iconpos:el.jqmData("iconpos"),theme:options.theme!==undefined?options.theme:el.jqmData("theme")||$.mobile.getInheritedTheme(el,"c"),inline:options.inline!==undefined?options.inline:el.jqmData("inline"),shadow:options.shadow!==undefined?options.shadow:el.jqmData("shadow"),corners:options.corners!==undefined?options.corners:el.jqmData("corners"),iconshadow:options.iconshadow!==undefined?options.iconshadow:el.jqmData("iconshadow"),mini:options.mini!==undefined?options.mini:el.jqmData("mini")},options),innerClass="ui-btn-inner",textClass="ui-btn-text",buttonClass,iconClass,buttonInner,buttonText,buttonIcon,buttonElements;$.each(o,function(key,value){e.setAttribute("data-"+$.mobile.ns+key,value);el.jqmData(key,value);});buttonElements=$.data(((e.tagName==="INPUT"||e.tagName==="BUTTON")?e.parentNode:e),"buttonElements");if(buttonElements){e=buttonElements.outer;el=$(e);buttonInner=buttonElements.inner;buttonText=buttonElements.text;$(buttonElements.icon).remove();buttonElements.icon=null;}
else{buttonInner=document.createElement(o.wrapperEls);buttonText=document.createElement(o.wrapperEls);}
buttonIcon=o.icon?document.createElement("span"):null;if(attachEvents&&!buttonElements){attachEvents();}
if(!o.theme){o.theme=$.mobile.getInheritedTheme(el,"c");}
buttonClass="ui-btn ui-btn-up-"+o.theme;buttonClass+=o.inline?" ui-btn-inline":"";buttonClass+=o.shadow?" ui-shadow":"";buttonClass+=o.corners?" ui-btn-corner-all":"";if(o.mini!==undefined){buttonClass+=o.mini?" ui-mini":" ui-fullsize";}
if(o.inline!==undefined){buttonClass+=o.inline===false?" ui-btn-block":" ui-btn-inline";}
if(o.icon){o.icon="ui-icon-"+o.icon;o.iconpos=o.iconpos||"left";iconClass="ui-icon "+o.icon;if(o.iconshadow){iconClass+=" ui-icon-shadow";}}
if(o.iconpos){buttonClass+=" ui-btn-icon-"+o.iconpos;if(o.iconpos=="notext"&&!el.attr("title")){el.attr("title",el.getEncodedText());}}
innerClass+=o.corners?" ui-btn-corner-all":"";if(o.iconpos&&o.iconpos==="notext"&&!el.attr("title")){el.attr("title",el.getEncodedText());}
if(buttonElements){el.removeClass(buttonElements.bcls||"");}
el.removeClass("ui-link").addClass(buttonClass);buttonInner.className=innerClass;buttonText.className=textClass;if(!buttonElements){buttonInner.appendChild(buttonText);}
if(buttonIcon){buttonIcon.className=iconClass;if(!(buttonElements&&buttonElements.icon)){buttonIcon.appendChild(document.createTextNode("\u00a0"));buttonInner.appendChild(buttonIcon);}}
while(e.firstChild&&!buttonElements){buttonText.appendChild(e.firstChild);}
if(!buttonElements){e.appendChild(buttonInner);}
buttonElements={bcls:buttonClass,outer:e,inner:buttonInner,text:buttonText,icon:buttonIcon};$.data(e,'buttonElements',buttonElements);$.data(buttonInner,'buttonElements',buttonElements);$.data(buttonText,'buttonElements',buttonElements);if(buttonIcon){$.data(buttonIcon,'buttonElements',buttonElements);}}
return this;};$.fn.buttonMarkup.defaults={corners:true,shadow:true,iconshadow:true,wrapperEls:"span"};function closestEnabledButton(element){var cname;while(element){cname=(typeof element.className==='string')&&(element.className+' ');if(cname&&cname.indexOf("ui-btn ")>-1&&cname.indexOf("ui-disabled ")<0){break;}
element=element.parentNode;}
return element;}
var attachEvents=function(){var hoverDelay=$.mobile.buttonMarkup.hoverDelay,hov,foc;$(document).bind({"vmousedown vmousecancel vmouseup vmouseover vmouseout focus blur scrollstart":function(event){var theme,$btn=$(closestEnabledButton(event.target)),evt=event.type;if($btn.length){theme=$btn.attr("data-"+$.mobile.ns+"theme");if(evt==="vmousedown"){if($.support.touch){hov=setTimeout(function(){$btn.removeClass("ui-btn-up-"+theme).addClass("ui-btn-down-"+theme);},hoverDelay);}else{$btn.removeClass("ui-btn-up-"+theme).addClass("ui-btn-down-"+theme);}}else if(evt==="vmousecancel"||evt==="vmouseup"){$btn.removeClass("ui-btn-down-"+theme).addClass("ui-btn-up-"+theme);}else if(evt==="vmouseover"||evt==="focus"){if($.support.touch){foc=setTimeout(function(){$btn.removeClass("ui-btn-up-"+theme).addClass("ui-btn-hover-"+theme);},hoverDelay);}else{$btn.removeClass("ui-btn-up-"+theme).addClass("ui-btn-hover-"+theme);}}else if(evt==="vmouseout"||evt==="blur"||evt==="scrollstart"){$btn.removeClass("ui-btn-hover-"+theme+" ui-btn-down-"+theme).addClass("ui-btn-up-"+theme);if(hov){clearTimeout(hov);}
if(foc){clearTimeout(foc);}}}},"focusin focus":function(event){$(closestEnabledButton(event.target)).addClass($.mobile.focusClass);},"focusout blur":function(event){$(closestEnabledButton(event.target)).removeClass($.mobile.focusClass);}});attachEvents=null;};$(document).bind("pagecreate create",function(e){$(":jqmData(role='button'), .ui-bar > a, .ui-header > a, .ui-footer > a, .ui-bar > :jqmData(role='controlgroup') > a",e.target).not(".ui-btn, :jqmData(role='none'), :jqmData(role='nojs')").buttonMarkup();});})(jQuery);(function($,undefined){$.mobile.page.prototype.options.backBtnText="Back";$.mobile.page.prototype.options.addBackBtn=false;$.mobile.page.prototype.options.backBtnTheme=null;$.mobile.page.prototype.options.headerTheme="a";$.mobile.page.prototype.options.footerTheme="a";$.mobile.page.prototype.options.contentTheme=null;$(document).delegate(":jqmData(role='page'), :jqmData(role='dialog')","pagecreate",function(e){var $page=$(this),o=$page.data("page").options,pageRole=$page.jqmData("role"),pageTheme=o.theme;$(":jqmData(role='header'), :jqmData(role='footer'), :jqmData(role='content')",this).jqmEnhanceable().each(function(){var $this=$(this),role=$this.jqmData("role"),theme=$this.jqmData("theme"),contentTheme=theme||o.contentTheme||(pageRole==="dialog"&&pageTheme),$headeranchors,leftbtn,rightbtn,backBtn;$this.addClass("ui-"+role);if(role==="header"||role==="footer"){var thisTheme=theme||(role==="header"?o.headerTheme:o.footerTheme)||pageTheme;$this.addClass("ui-bar-"+thisTheme).attr("role",role==="header"?"banner":"contentinfo");if(role==="header"){$headeranchors=$this.children("a");leftbtn=$headeranchors.hasClass("ui-btn-left");rightbtn=$headeranchors.hasClass("ui-btn-right");leftbtn=leftbtn||$headeranchors.eq(0).not(".ui-btn-right").addClass("ui-btn-left").length;rightbtn=rightbtn||$headeranchors.eq(1).addClass("ui-btn-right").length;}
if(o.addBackBtn&&role==="header"&&$(".ui-page").length>1&&$page.jqmData("url")!==$.mobile.path.stripHash(location.hash)&&!leftbtn){backBtn=$("<a href='#' class='ui-btn-left' data-"+$.mobile.ns+"rel='back' data-"+$.mobile.ns+"icon='arrow-l'>"+o.backBtnText+"</a>").attr("data-"+$.mobile.ns+"theme",o.backBtnTheme||thisTheme).prependTo($this);}
$this.children("h1, h2, h3, h4, h5, h6").addClass("ui-title").attr({"role":"heading","aria-level":"1"});}else if(role==="content"){if(contentTheme){$this.addClass("ui-body-"+(contentTheme));}
$this.attr("role","main");}});});})(jQuery);(function($,undefined){$.widget("mobile.collapsible",$.mobile.widget,{options:{expandCueText:" click to expand contents",collapseCueText:" click to collapse contents",collapsed:true,heading:"h1,h2,h3,h4,h5,h6,legend",theme:null,contentTheme:null,iconTheme:"d",mini:false,initSelector:":jqmData(role='collapsible')"},_create:function(){var $el=this.element,o=this.options,collapsible=$el.addClass("ui-collapsible"),collapsibleHeading=$el.children(o.heading).first(),collapsibleContent=collapsible.wrapInner("<div class='ui-collapsible-content'></div>").find(".ui-collapsible-content"),collapsibleSet=$el.closest(":jqmData(role='collapsible-set')").addClass("ui-collapsible-set");if(collapsibleHeading.is("legend")){collapsibleHeading=$("<div role='heading'>"+collapsibleHeading.html()+"</div>").insertBefore(collapsibleHeading);collapsibleHeading.next().remove();}
if(collapsibleSet.length){if(!o.theme){o.theme=collapsibleSet.jqmData("theme")||$.mobile.getInheritedTheme(collapsibleSet,"c");}
if(!o.contentTheme){o.contentTheme=collapsibleSet.jqmData("content-theme");}
if(!o.iconPos){o.iconPos=collapsibleSet.jqmData("iconpos");}
if(!o.mini){o.mini=collapsibleSet.jqmData("mini");}}
collapsibleContent.addClass((o.contentTheme)?("ui-body-"+o.contentTheme):"");collapsibleHeading.insertBefore(collapsibleContent).addClass("ui-collapsible-heading").append("<span class='ui-collapsible-heading-status'></span>").wrapInner("<a href='#' class='ui-collapsible-heading-toggle'></a>").find("a").first().buttonMarkup({shadow:false,corners:false,iconpos:$el.jqmData("iconpos")||o.iconPos||"left",icon:"plus",mini:o.mini,theme:o.theme}).add(".ui-btn-inner",$el).addClass("ui-corner-top ui-corner-bottom");collapsible.bind("expand collapse",function(event){if(!event.isDefaultPrevented()){event.preventDefault();var $this=$(this),isCollapse=(event.type==="collapse"),contentTheme=o.contentTheme;collapsibleHeading.toggleClass("ui-collapsible-heading-collapsed",isCollapse).find(".ui-collapsible-heading-status").text(isCollapse?o.expandCueText:o.collapseCueText).end().find(".ui-icon").toggleClass("ui-icon-minus",!isCollapse).toggleClass("ui-icon-plus",isCollapse);$this.toggleClass("ui-collapsible-collapsed",isCollapse);collapsibleContent.toggleClass("ui-collapsible-content-collapsed",isCollapse).attr("aria-hidden",isCollapse);if(contentTheme&&(!collapsibleSet.length||collapsible.jqmData("collapsible-last"))){collapsibleHeading.find("a").first().add(collapsibleHeading.find(".ui-btn-inner")).toggleClass("ui-corner-bottom",isCollapse);collapsibleContent.toggleClass("ui-corner-bottom",!isCollapse);}
collapsibleContent.trigger("updatelayout");}}).trigger(o.collapsed?"collapse":"expand");collapsibleHeading.bind("click",function(event){var type=collapsibleHeading.is(".ui-collapsible-heading-collapsed")?"expand":"collapse";collapsible.trigger(type);event.preventDefault();});}});$(document).bind("pagecreate create",function(e){$.mobile.collapsible.prototype.enhanceWithin(e.target);});})(jQuery);(function($,undefined){$.widget("mobile.collapsibleset",$.mobile.widget,{options:{initSelector:":jqmData(role='collapsible-set')"},_create:function(){var $el=this.element.addClass("ui-collapsible-set"),o=this.options;if(!o.theme){o.theme=$.mobile.getInheritedTheme($el,"c");}
if(!o.contentTheme){o.contentTheme=$el.jqmData("content-theme");}
if(!o.corners){o.corners=$el.jqmData("corners")===undefined?true:false;}
if(!$el.jqmData("collapsiblebound")){$el.jqmData("collapsiblebound",true).bind("expand collapse",function(event){var isCollapse=(event.type==="collapse"),collapsible=$(event.target).closest(".ui-collapsible"),widget=collapsible.data("collapsible"),contentTheme=widget.options.contentTheme;if(contentTheme&&collapsible.jqmData("collapsible-last")){collapsible.find(widget.options.heading).first().find("a").first().add(".ui-btn-inner").toggleClass("ui-corner-bottom",isCollapse);collapsible.find(".ui-collapsible-content").toggleClass("ui-corner-bottom",!isCollapse);}}).bind("expand",function(event){$(event.target).closest(".ui-collapsible").siblings(".ui-collapsible").trigger("collapse");});}},_init:function(){this.refresh();},refresh:function(){var $el=this.element,o=this.options,collapsiblesInSet=$el.children(":jqmData(role='collapsible')");$.mobile.collapsible.prototype.enhance(collapsiblesInSet.not(".ui-collapsible"));collapsiblesInSet.each(function(){$(this).find($.mobile.collapsible.prototype.options.heading).find("a").first().add(".ui-btn-inner").removeClass("ui-corner-top ui-corner-bottom");});collapsiblesInSet.first().find("a").first().addClass(o.corners?"ui-corner-top":"").find(".ui-btn-inner").addClass("ui-corner-top");collapsiblesInSet.last().jqmData("collapsible-last",true).find("a").first().addClass(o.corners?"ui-corner-bottom":"").find(".ui-btn-inner").addClass("ui-corner-bottom");}});$(document).bind("pagecreate create",function(e){$.mobile.collapsibleset.prototype.enhanceWithin(e.target);});})(jQuery);(function($,undefined){$.widget("mobile.navbar",$.mobile.widget,{options:{iconpos:"top",grid:null,initSelector:":jqmData(role='navbar')"},_create:function(){var $navbar=this.element,$navbtns=$navbar.find("a"),iconpos=$navbtns.filter(":jqmData(icon)").length?this.options.iconpos:undefined;$navbar.addClass("ui-navbar").attr("role","navigation").find("ul").jqmEnhanceable().grid({grid:this.options.grid});if(!iconpos){$navbar.addClass("ui-navbar-noicons");}
$navbtns.buttonMarkup({corners:false,shadow:false,inline:true,iconpos:iconpos});$navbar.delegate("a","vclick",function(event){if(!$(event.target).hasClass("ui-disabled")){$navbtns.removeClass($.mobile.activeBtnClass);$(this).addClass($.mobile.activeBtnClass);}});$navbar.closest(".ui-page").bind("pagebeforeshow",function(){$navbtns.filter(".ui-state-persist").addClass($.mobile.activeBtnClass);});}});$(document).bind("pagecreate create",function(e){$.mobile.navbar.prototype.enhanceWithin(e.target);});})(jQuery);(function($,undefined){var listCountPerPage={};$.widget("mobile.listview",$.mobile.widget,{options:{theme:null,countTheme:"c",headerTheme:"b",dividerTheme:"b",splitIcon:"arrow-r",splitTheme:"b",mini:false,inset:false,initSelector:":jqmData(role='listview')"},_create:function(){var t=this,listviewClasses="";listviewClasses+=t.options.inset?" ui-listview-inset ui-corner-all ui-shadow ":"";listviewClasses+=t.element.jqmData("mini")||t.options.mini===true?" ui-mini":"";t.element.addClass(function(i,orig){return orig+" ui-listview "+listviewClasses;});t.refresh(true);},_removeCorners:function(li,which){var top="ui-corner-top ui-corner-tr ui-corner-tl",bot="ui-corner-bottom ui-corner-br ui-corner-bl";li=li.add(li.find(".ui-btn-inner, .ui-li-link-alt, .ui-li-thumb"));if(which==="top"){li.removeClass(top);}else if(which==="bottom"){li.removeClass(bot);}else{li.removeClass(top+" "+bot);}},_refreshCorners:function(create){var $li,$visibleli,$topli,$bottomli;if(this.options.inset){$li=this.element.children("li");$visibleli=create?$li.not(".ui-screen-hidden"):$li.filter(":visible");this._removeCorners($li);$topli=$visibleli.first().addClass("ui-corner-top");$topli.add($topli.find(".ui-btn-inner").not(".ui-li-link-alt span:first-child")).addClass("ui-corner-top").end().find(".ui-li-link-alt, .ui-li-link-alt span:first-child").addClass("ui-corner-tr").end().find(".ui-li-thumb").not(".ui-li-icon").addClass("ui-corner-tl");$bottomli=$visibleli.last().addClass("ui-corner-bottom");$bottomli.add($bottomli.find(".ui-btn-inner")).find(".ui-li-link-alt").addClass("ui-corner-br").end().find(".ui-li-thumb").not(".ui-li-icon").addClass("ui-corner-bl");}
if(!create){this.element.trigger("updatelayout");}},_findFirstElementByTagName:function(ele,nextProp,lcName,ucName)
{var dict={};dict[lcName]=dict[ucName]=true;while(ele){if(dict[ele.nodeName]){return ele;}
ele=ele[nextProp];}
return null;},_getChildrenByTagName:function(ele,lcName,ucName)
{var results=[],dict={};dict[lcName]=dict[ucName]=true;ele=ele.firstChild;while(ele){if(dict[ele.nodeName]){results.push(ele);}
ele=ele.nextSibling;}
return $(results);},_addThumbClasses:function(containers)
{var i,img,len=containers.length;for(i=0;i<len;i++){img=$(this._findFirstElementByTagName(containers[i].firstChild,"nextSibling","img","IMG"));if(img.length){img.addClass("ui-li-thumb");$(this._findFirstElementByTagName(img[0].parentNode,"parentNode","li","LI")).addClass(img.is(".ui-li-icon")?"ui-li-has-icon":"ui-li-has-thumb");}}},refresh:function(create){this.parentPage=this.element.closest(".ui-page");this._createSubPages();var o=this.options,$list=this.element,self=this,dividertheme=$list.jqmData("dividertheme")||o.dividerTheme,listsplittheme=$list.jqmData("splittheme"),listspliticon=$list.jqmData("spliticon"),li=this._getChildrenByTagName($list[0],"li","LI"),counter=$.support.cssPseudoElement||!$.nodeName($list[0],"ol")?0:1,itemClassDict={},item,itemClass,itemTheme,a,last,splittheme,countParent,icon,imgParents,img,linkIcon;if(counter){$list.find(".ui-li-dec").remove();}
if(!o.theme){o.theme=$.mobile.getInheritedTheme(this.element,"c");}
for(var pos=0,numli=li.length;pos<numli;pos++){item=li.eq(pos);itemClass="ui-li";if(create||!item.hasClass("ui-li")){itemTheme=item.jqmData("theme")||o.theme;a=this._getChildrenByTagName(item[0],"a","A");if(a.length){icon=item.jqmData("icon");item.buttonMarkup({wrapperEls:"div",shadow:false,corners:false,iconpos:"right",icon:a.length>1||icon===false?false:icon||"arrow-r",theme:itemTheme});if((icon!=false)&&(a.length==1)){item.addClass("ui-li-has-arrow");}
a.first().removeClass("ui-link").addClass("ui-link-inherit");if(a.length>1){itemClass+=" ui-li-has-alt";last=a.last();splittheme=listsplittheme||last.jqmData("theme")||o.splitTheme;linkIcon=last.jqmData("icon");last.appendTo(item).attr("title",last.getEncodedText()).addClass("ui-li-link-alt").empty().buttonMarkup({shadow:false,corners:false,theme:itemTheme,icon:false,iconpos:false}).find(".ui-btn-inner").append($(document.createElement("span")).buttonMarkup({shadow:true,corners:true,theme:splittheme,iconpos:"notext",icon:linkIcon||icon||listspliticon||o.splitIcon}));}}else if(item.jqmData("role")==="list-divider"){itemClass+=" ui-li-divider ui-bar-"+dividertheme;item.attr("role","heading");if(counter){counter=1;}}else{itemClass+=" ui-li-static ui-body-"+itemTheme;}}
if(counter&&itemClass.indexOf("ui-li-divider")<0){countParent=item.is(".ui-li-static:first")?item:item.find(".ui-link-inherit");countParent.addClass("ui-li-jsnumbering").prepend("<span class='ui-li-dec'>"+(counter++)+". </span>");}
if(!itemClassDict[itemClass]){itemClassDict[itemClass]=[];}
itemClassDict[itemClass].push(item[0]);}
for(itemClass in itemClassDict){$(itemClassDict[itemClass]).addClass(itemClass).children(".ui-btn-inner").addClass(itemClass);}
$list.find("h1, h2, h3, h4, h5, h6").addClass("ui-li-heading").end().find("p, dl").addClass("ui-li-desc").end().find(".ui-li-aside").each(function(){var $this=$(this);$this.prependTo($this.parent());}).end().find(".ui-li-count").each(function(){$(this).closest("li").addClass("ui-li-has-count");}).addClass("ui-btn-up-"+($list.jqmData("counttheme")||this.options.countTheme)+" ui-btn-corner-all");this._addThumbClasses(li);this._addThumbClasses($list.find(".ui-link-inherit"));this._refreshCorners(create);},_idStringEscape:function(str){return str.replace(/[^a-zA-Z0-9]/g,'-');},_createSubPages:function(){var parentList=this.element,parentPage=parentList.closest(".ui-page"),parentUrl=parentPage.jqmData("url"),parentId=parentUrl||parentPage[0][$.expando],parentListId=parentList.attr("id"),o=this.options,dns="data-"+$.mobile.ns,self=this,persistentFooterID=parentPage.find(":jqmData(role='footer')").jqmData("id"),hasSubPages;if(typeof listCountPerPage[parentId]==="undefined"){listCountPerPage[parentId]=-1;}
parentListId=parentListId||++listCountPerPage[parentId];$(parentList.find("li>ul, li>ol").toArray().reverse()).each(function(i){var self=this,list=$(this),listId=list.attr("id")||parentListId+"-"+i,parent=list.parent(),nodeEls=$(list.prevAll().toArray().reverse()),nodeEls=nodeEls.length?nodeEls:$("<span>"+$.trim(parent.contents()[0].nodeValue)+"</span>"),title=nodeEls.first().getEncodedText(),id=(parentUrl||"")+"&"+$.mobile.subPageUrlKey+"="+listId,theme=list.jqmData("theme")||o.theme,countTheme=list.jqmData("counttheme")||parentList.jqmData("counttheme")||o.countTheme,newPage,anchor;hasSubPages=true;newPage=list.detach().wrap("<div "+dns+"role='page' "+dns+"url='"+id+"' "+dns+"theme='"+theme+"' "+dns+"count-theme='"+countTheme+"'><div "+dns+"role='content'></div></div>").parent().before("<div "+dns+"role='header' "+dns+"theme='"+o.headerTheme+"'><div class='ui-title'>"+title+"</div></div>").after(persistentFooterID?$("<div "+dns+"role='footer' "+dns+"id='"+persistentFooterID+"'>"):"").parent().appendTo($.mobile.pageContainer);newPage.page();anchor=parent.find('a:first');if(!anchor.length){anchor=$("<a/>").html(nodeEls||title).prependTo(parent.empty());}
anchor.attr("href","#"+id);}).listview();if(hasSubPages&&parentPage.is(":jqmData(external-page='true')")&&parentPage.data("page").options.domCache===false){var newRemove=function(e,ui){var nextPage=ui.nextPage,npURL;if(ui.nextPage){npURL=nextPage.jqmData("url");if(npURL.indexOf(parentUrl+"&"+$.mobile.subPageUrlKey)!==0){self.childPages().remove();parentPage.remove();}}};parentPage.unbind("pagehide.remove").bind("pagehide.remove",newRemove);}},childPages:function(){var parentUrl=this.parentPage.jqmData("url");return $(":jqmData(url^='"+parentUrl+"&"+$.mobile.subPageUrlKey+"')");}});$(document).bind("pagecreate create",function(e){$.mobile.listview.prototype.enhanceWithin(e.target);});})(jQuery);(function($,undefined){$.widget("mobile.checkboxradio",$.mobile.widget,{options:{theme:null,initSelector:"input[type='checkbox'],input[type='radio']"},_create:function(){var self=this,input=this.element,inheritAttr=function(input,dataAttr){return input.jqmData(dataAttr)||input.closest("form,fieldset").jqmData(dataAttr)},parentLabel=$(input).closest("label"),label=parentLabel.length?parentLabel:$(input).closest("form,fieldset,:jqmData(role='page'),:jqmData(role='dialog')").find("label").filter("[for='"+input[0].id+"']"),inputtype=input[0].type,mini=inheritAttr(input,"mini"),checkedState=inputtype+"-on",uncheckedState=inputtype+"-off",icon=input.parents(":jqmData(type='horizontal')").length?undefined:uncheckedState,iconpos=inheritAttr(input,"iconpos"),activeBtn=icon?"":" "+$.mobile.activeBtnClass,checkedClass="ui-"+checkedState+activeBtn,uncheckedClass="ui-"+uncheckedState,checkedicon="ui-icon-"+checkedState,uncheckedicon="ui-icon-"+uncheckedState;if(inputtype!=="checkbox"&&inputtype!=="radio"){return;}
$.extend(this,{label:label,inputtype:inputtype,checkedClass:checkedClass,uncheckedClass:uncheckedClass,checkedicon:checkedicon,uncheckedicon:uncheckedicon});if(!this.options.theme){this.options.theme=$.mobile.getInheritedTheme(this.element,"c");}
label.buttonMarkup({theme:this.options.theme,icon:icon,shadow:false,mini:mini,iconpos:iconpos});var wrapper=document.createElement('div');wrapper.className='ui-'+inputtype;input.add(label).wrapAll(wrapper);label.bind({vmouseover:function(event){if($(this).parent().is(".ui-disabled")){event.stopPropagation();}},vclick:function(event){if(input.is(":disabled")){event.preventDefault();return;}
self._cacheVals();input.prop("checked",inputtype==="radio"&&true||!input.prop("checked"));input.triggerHandler('click');self._getInputSet().not(input).prop("checked",false);self._updateAll();return false;}});input.bind({vmousedown:function(){self._cacheVals();},vclick:function(){var $this=$(this);if($this.is(":checked")){$this.prop("checked",true);self._getInputSet().not($this).prop("checked",false);}else{$this.prop("checked",false);}
self._updateAll();},focus:function(){label.addClass($.mobile.focusClass);},blur:function(){label.removeClass($.mobile.focusClass);}});this.refresh();},_cacheVals:function(){this._getInputSet().each(function(){$(this).jqmData("cacheVal",this.checked);});},_getInputSet:function(){if(this.inputtype==="checkbox"){return this.element;}
return this.element.closest("form,fieldset,:jqmData(role='page')").find("input[name='"+this.element[0].name+"'][type='"+this.inputtype+"']");},_updateAll:function(){var self=this;this._getInputSet().each(function(){var $this=$(this);if(this.checked||self.inputtype==="checkbox"){$this.trigger("change");}}).checkboxradio("refresh");},refresh:function(){var input=this.element[0],label=this.label,icon=label.find(".ui-icon");if(input.checked){label.addClass(this.checkedClass).removeClass(this.uncheckedClass);icon.addClass(this.checkedicon).removeClass(this.uncheckedicon);}else{label.removeClass(this.checkedClass).addClass(this.uncheckedClass);icon.removeClass(this.checkedicon).addClass(this.uncheckedicon);}
if(input.disabled){this.disable();}else{this.enable();}},disable:function(){this.element.prop("disabled",true).parent().addClass("ui-disabled");},enable:function(){this.element.prop("disabled",false).parent().removeClass("ui-disabled");}});$(document).bind("pagecreate create",function(e){$.mobile.checkboxradio.prototype.enhanceWithin(e.target,true);});})(jQuery);(function($,undefined){$.widget("mobile.button",$.mobile.widget,{options:{theme:null,icon:null,iconpos:null,inline:false,corners:true,shadow:true,iconshadow:true,initSelector:"button, [type='button'], [type='submit'], [type='reset'], [type='image']",mini:false},_create:function(){var $el=this.element,$button,o=this.options,type,name,classes="",$buttonPlaceholder;if($el[0].tagName==="A"){!$el.hasClass("ui-btn")&&$el.buttonMarkup();return;}
if(!this.options.theme){this.options.theme=$.mobile.getInheritedTheme(this.element,"c");}
if(!!~$el[0].className.indexOf("ui-btn-left")){classes="ui-btn-left";}
if(!!~$el[0].className.indexOf("ui-btn-right")){classes="ui-btn-right";}
this.button=$("<div></div>").text($el.text()||$el.val()).insertBefore($el).buttonMarkup({theme:o.theme,icon:o.icon,iconpos:o.iconpos,inline:o.inline,corners:o.corners,shadow:o.shadow,iconshadow:o.iconshadow,mini:o.mini}).addClass(classes).append($el.addClass("ui-btn-hidden"));$button=this.button;type=$el.attr("type");name=$el.attr("name");if(type!=="button"&&type!=="reset"&&name){$el.bind("vclick",function(){if($buttonPlaceholder===undefined){$buttonPlaceholder=$("<input>",{type:"hidden",name:$el.attr("name"),value:$el.attr("value")}).insertBefore($el);$(document).one("submit",function(){$buttonPlaceholder.remove();$buttonPlaceholder=undefined;});}});}
$el.bind({focus:function(){$button.addClass($.mobile.focusClass);},blur:function(){$button.removeClass($.mobile.focusClass);}});this.refresh();},enable:function(){this.element.attr("disabled",false);this.button.removeClass("ui-disabled").attr("aria-disabled",false);return this._setOption("disabled",false);},disable:function(){this.element.attr("disabled",true);this.button.addClass("ui-disabled").attr("aria-disabled",true);return this._setOption("disabled",true);},refresh:function(){var $el=this.element;if($el.prop("disabled")){this.disable();}else{this.enable();}
$(this.button.data('buttonElements').text).text($el.text()||$el.val());}});$(document).bind("pagecreate create",function(e){$.mobile.button.prototype.enhanceWithin(e.target,true);});})(jQuery);(function($,undefined){$.fn.controlgroup=function(options){function flipClasses(els,flCorners){els.removeClass("ui-btn-corner-all ui-shadow").eq(0).addClass(flCorners[0]).end().last().addClass(flCorners[1]).addClass("ui-controlgroup-last");}
return this.each(function(){var $el=$(this),o=$.extend({direction:$el.jqmData("type")||"vertical",shadow:false,excludeInvisible:true,mini:$el.jqmData("mini")},options),groupheading=$el.children("legend"),flCorners=o.direction=="horizontal"?["ui-corner-left","ui-corner-right"]:["ui-corner-top","ui-corner-bottom"],type=$el.find("input").first().attr("type");if(groupheading.length){$el.wrapInner("<div class='ui-controlgroup-controls'></div>");$("<div role='heading' class='ui-controlgroup-label'>"+groupheading.html()+"</div>").insertBefore($el.children(0));groupheading.remove();}
$el.addClass("ui-corner-all ui-controlgroup ui-controlgroup-"+o.direction);flipClasses($el.find(".ui-btn"+(o.excludeInvisible?":visible":"")).not('.ui-slider-handle'),flCorners);flipClasses($el.find(".ui-btn-inner"),flCorners);if(o.shadow){$el.addClass("ui-shadow");}
if(o.mini){$el.addClass("ui-mini");}});};})(jQuery);(function($,undefined){$(document).bind("pagecreate create",function(e){$(e.target).find("a").jqmEnhanceable().not(".ui-btn, .ui-link-inherit, :jqmData(role='none'), :jqmData(role='nojs')").addClass("ui-link");});})(jQuery);(function($){var meta=$("meta[name=viewport]"),initialContent=meta.attr("content"),disabledZoom=initialContent+",maximum-scale=1, user-scalable=no",enabledZoom=initialContent+",maximum-scale=10, user-scalable=yes",disabledInitially=/(user-scalable[\s]*=[\s]*no)|(maximum-scale[\s]*=[\s]*1)[$,\s]/.test(initialContent);$.mobile.zoom=$.extend({},{enabled:!disabledInitially,locked:false,disable:function(lock){if(!disabledInitially&&!$.mobile.zoom.locked){meta.attr("content",disabledZoom);$.mobile.zoom.enabled=false;$.mobile.zoom.locked=lock||false;}},enable:function(unlock){if(!disabledInitially&&(!$.mobile.zoom.locked||unlock===true)){meta.attr("content",enabledZoom);$.mobile.zoom.enabled=true;$.mobile.zoom.locked=false;}},restore:function(){if(!disabledInitially){meta.attr("content",initialContent);$.mobile.zoom.enabled=true;}}});}(jQuery));(function($,undefined){$.widget("mobile.textinput",$.mobile.widget,{options:{theme:null,preventFocusZoom:/iPhone|iPad|iPod/.test(navigator.platform)&&navigator.userAgent.indexOf("AppleWebKit")>-1,initSelector:"input[type='text'], input[type='search'], :jqmData(type='search'), input[type='number'], :jqmData(type='number'), input[type='password'], input[type='email'], input[type='url'], input[type='tel'], textarea, input[type='time'], input[type='date'], input[type='month'], input[type='week'], input[type='datetime'], input[type='datetime-local'], input[type='color'], input:not([type])",clearSearchButtonText:"clear text"},_create:function(){var input=this.element,o=this.options,theme=o.theme||$.mobile.getInheritedTheme(this.element,"c"),themeclass=" ui-body-"+theme,mini=input.jqmData("mini")==true,miniclass=mini?" ui-mini":"",focusedEl,clearbtn;$("label[for='"+input.attr("id")+"']").addClass("ui-input-text");focusedEl=input.addClass("ui-input-text ui-body-"+theme);if(typeof input[0].autocorrect!=="undefined"&&!$.support.touchOverflow){input[0].setAttribute("autocorrect","off");input[0].setAttribute("autocomplete","off");}
if(input.is("[type='search'],:jqmData(type='search')")){focusedEl=input.wrap("<div class='ui-input-search ui-shadow-inset ui-btn-corner-all ui-btn-shadow ui-icon-searchfield"+themeclass+miniclass+"'></div>").parent();clearbtn=$("<a href='#' class='ui-input-clear' title='"+o.clearSearchButtonText+"'>"+o.clearSearchButtonText+"</a>").bind('click',function(event){input.val("").focus().trigger("change");clearbtn.addClass("ui-input-clear-hidden");event.preventDefault();}).appendTo(focusedEl).buttonMarkup({icon:"delete",iconpos:"notext",corners:true,shadow:true,mini:mini});function toggleClear(){setTimeout(function(){clearbtn.toggleClass("ui-input-clear-hidden",!input.val());},0);}
toggleClear();input.bind('paste cut keyup focus change blur',toggleClear);}else{input.addClass("ui-corner-all ui-shadow-inset"+themeclass+miniclass);}
input.focus(function(){focusedEl.addClass($.mobile.focusClass);}).blur(function(){focusedEl.removeClass($.mobile.focusClass);}).bind("focus",function(){if(o.preventFocusZoom){$.mobile.zoom.disable(true);}}).bind("blur",function(){if(o.preventFocusZoom){$.mobile.zoom.enable(true);}});if(input.is("textarea")){var extraLineHeight=15,keyupTimeoutBuffer=100,keyup=function(){var scrollHeight=input[0].scrollHeight,clientHeight=input[0].clientHeight;if(clientHeight<scrollHeight){input.height(scrollHeight+extraLineHeight);}},keyupTimeout;input.keyup(function(){clearTimeout(keyupTimeout);keyupTimeout=setTimeout(keyup,keyupTimeoutBuffer);});$(document).one("pagechange",keyup);if($.trim(input.val())){$(window).load(keyup);}}},disable:function(){(this.element.attr("disabled",true).is("[type='search'],:jqmData(type='search')")?this.element.parent():this.element).addClass("ui-disabled");},enable:function(){(this.element.attr("disabled",false).is("[type='search'],:jqmData(type='search')")?this.element.parent():this.element).removeClass("ui-disabled");}});$(document).bind("pagecreate create",function(e){$.mobile.textinput.prototype.enhanceWithin(e.target,true);});})(jQuery);(function($,undefined){$.mobile.listview.prototype.options.filter=false;$.mobile.listview.prototype.options.filterPlaceholder="Filter items...";$.mobile.listview.prototype.options.filterTheme="c";$.mobile.listview.prototype.options.filterCallback=function(text,searchValue){text+='';searchValue+='';return text.toLowerCase().indexOf(searchValue)===-1;};$(document).delegate(":jqmData(role='listview')","listviewcreate",function(){var list=$(this),listview=list.data("listview");if(!listview.options.filter){return;}
var wrapper=$("<form>",{"class":"ui-listview-filter ui-bar-"+listview.options.filterTheme,"role":"search"}),search=$("<input>",{placeholder:listview.options.filterPlaceholder}).attr("data-"+$.mobile.ns+"type","search").jqmData("lastval","").bind("keyup change",function(){var $this=$(this),val=this.value.toLowerCase(),listItems=null,lastval=$this.jqmData("lastval")+"",childItems=false,itemtext="",item;$this.jqmData("lastval",val);if(val.length<lastval.length||val.indexOf(lastval)!==0){listItems=list.children();}else{listItems=list.children(":not(.ui-screen-hidden)");}
if(val){for(var i=listItems.length-1;i>=0;i--){item=$(listItems[i]);itemtext=item.jqmData("filtertext")||item.text();if(item.is("li:jqmData(role=list-divider)")){item.toggleClass("ui-filter-hidequeue",!childItems);childItems=false;}else if(listview.options.filterCallback(itemtext,val)){item.toggleClass("ui-filter-hidequeue",true);}else{childItems=true;}}
listItems.filter(":not(.ui-filter-hidequeue)").toggleClass("ui-screen-hidden",false);listItems.filter(".ui-filter-hidequeue").toggleClass("ui-screen-hidden",true).toggleClass("ui-filter-hidequeue",false);}else{listItems.toggleClass("ui-screen-hidden",false);}
listview._refreshCorners();}).appendTo(wrapper).textinput();if(listview.options.inset){wrapper.addClass("ui-listview-filter-inset");}
wrapper.bind("submit",function(){return false;}).insertBefore(list);});})(jQuery);(function($,undefined){$.widget("mobile.slider",$.mobile.widget,{options:{theme:null,trackTheme:null,disabled:false,initSelector:"input[type='range'], :jqmData(type='range'), :jqmData(role='slider')",mini:false},_create:function(){var self=this,control=this.element,parentTheme=$.mobile.getInheritedTheme(control,"c"),theme=this.options.theme||parentTheme,trackTheme=this.options.trackTheme||parentTheme,cType=control[0].nodeName.toLowerCase(),selectClass=(cType=="select")?"ui-slider-switch":"",controlID=control.attr("id"),labelID=controlID+"-label",label=$("[for='"+controlID+"']").attr("id",labelID),val=function(){return cType=="input"?parseFloat(control.val()):control[0].selectedIndex;},min=cType=="input"?parseFloat(control.attr("min")):0,max=cType=="input"?parseFloat(control.attr("max")):control.find("option").length-1,step=window.parseFloat(control.attr("step")||1),inlineClass=(this.options.inline||control.jqmData("inline")==true)?" ui-slider-inline":"",miniClass=(this.options.mini||control.jqmData("mini"))?" ui-slider-mini":"",domHandle=document.createElement('a'),handle=$(domHandle),domSlider=document.createElement('div'),slider=$(domSlider),valuebg=control.jqmData("highlight")&&cType!="select"?(function(){var bg=document.createElement('div');bg.className='ui-slider-bg ui-btn-active ui-btn-corner-all';return $(bg).prependTo(slider);})():false,options;domHandle.setAttribute('href',"#");domSlider.setAttribute('role','application');domSlider.className=['ui-slider ',selectClass," ui-btn-down-",trackTheme,' ui-btn-corner-all',inlineClass,miniClass].join("");domHandle.className='ui-slider-handle';domSlider.appendChild(domHandle);handle.buttonMarkup({corners:true,theme:theme,shadow:true}).attr({"role":"slider","aria-valuemin":min,"aria-valuemax":max,"aria-valuenow":val(),"aria-valuetext":val(),"title":val(),"aria-labelledby":labelID});$.extend(this,{slider:slider,handle:handle,valuebg:valuebg,dragging:false,beforeStart:null,userModified:false,mouseMoved:false});if(cType=="select"){var wrapper=document.createElement('div');wrapper.className='ui-slider-inneroffset';for(var j=0,length=domSlider.childNodes.length;j<length;j++){wrapper.appendChild(domSlider.childNodes[j]);}
domSlider.appendChild(wrapper);handle.addClass("ui-slider-handle-snapping");options=control.find("option");for(var i=0,optionsCount=options.length;i<optionsCount;i++){var side=!i?"b":"a",sliderTheme=!i?" ui-btn-down-"+trackTheme:(" "+$.mobile.activeBtnClass),sliderLabel=document.createElement('div'),sliderImg=document.createElement('span');sliderImg.className=['ui-slider-label ui-slider-label-',side,sliderTheme," ui-btn-corner-all"].join("");sliderImg.setAttribute('role','img');sliderImg.appendChild(document.createTextNode(options[i].innerHTML));$(sliderImg).prependTo(slider);}
self._labels=$(".ui-slider-label",slider);}
label.addClass("ui-slider");control.addClass(cType==="input"?"ui-slider-input":"ui-slider-switch").change(function(){if(!self.mouseMoved){self.refresh(val(),true);}}).keyup(function(){self.refresh(val(),true,true);}).blur(function(){self.refresh(val(),true);});$(document).bind("vmousemove",function(event){if(self.dragging){self.mouseMoved=true;if(cType==="select"){handle.removeClass("ui-slider-handle-snapping");}
self.refresh(event);self.userModified=self.beforeStart!==control[0].selectedIndex;return false;}});slider.bind("vmousedown",function(event){self.dragging=true;self.userModified=false;self.mouseMoved=false;if(cType==="select"){self.beforeStart=control[0].selectedIndex;}
self.refresh(event);return false;}).bind("vclick",false);slider.add(document).bind("vmouseup",function(){if(self.dragging){self.dragging=false;if(cType==="select"){handle.addClass("ui-slider-handle-snapping");if(self.mouseMoved){if(self.userModified){self.refresh(self.beforeStart==0?1:0);}
else{self.refresh(self.beforeStart);}}
else{self.refresh(self.beforeStart==0?1:0);}}
self.mouseMoved=false;return false;}});slider.insertAfter(control);if(cType=='select'){this.handle.bind({focus:function(){slider.addClass($.mobile.focusClass);},blur:function(){slider.removeClass($.mobile.focusClass);}});}
this.handle.bind({vmousedown:function(){$(this).focus();},vclick:false,keydown:function(event){var index=val();if(self.options.disabled){return;}
switch(event.keyCode){case $.mobile.keyCode.HOME:case $.mobile.keyCode.END:case $.mobile.keyCode.PAGE_UP:case $.mobile.keyCode.PAGE_DOWN:case $.mobile.keyCode.UP:case $.mobile.keyCode.RIGHT:case $.mobile.keyCode.DOWN:case $.mobile.keyCode.LEFT:event.preventDefault();if(!self._keySliding){self._keySliding=true;$(this).addClass("ui-state-active");}
break;}
switch(event.keyCode){case $.mobile.keyCode.HOME:self.refresh(min);break;case $.mobile.keyCode.END:self.refresh(max);break;case $.mobile.keyCode.PAGE_UP:case $.mobile.keyCode.UP:case $.mobile.keyCode.RIGHT:self.refresh(index+step);break;case $.mobile.keyCode.PAGE_DOWN:case $.mobile.keyCode.DOWN:case $.mobile.keyCode.LEFT:self.refresh(index-step);break;}},keyup:function(event){if(self._keySliding){self._keySliding=false;$(this).removeClass("ui-state-active");}}});this.refresh(undefined,undefined,true);},refresh:function(val,isfromControl,preventInputUpdate){if(this.options.disabled||this.element.attr('disabled')){this.disable();}
var control=this.element,percent,cType=control[0].nodeName.toLowerCase(),min=cType==="input"?parseFloat(control.attr("min")):0,max=cType==="input"?parseFloat(control.attr("max")):control.find("option").length-1,step=(cType==="input"&&parseFloat(control.attr("step"))>0)?parseFloat(control.attr("step")):1;if(typeof val==="object"){var data=val,tol=8;if(!this.dragging||data.pageX<this.slider.offset().left-tol||data.pageX>this.slider.offset().left+this.slider.width()+tol){return;}
percent=Math.round(((data.pageX-this.slider.offset().left)/this.slider.width())*100);}else{if(val==null){val=cType==="input"?parseFloat(control.val()||0):control[0].selectedIndex;}
percent=(parseFloat(val)-min)/(max-min)*100;}
if(isNaN(percent)){return;}
if(percent<0){percent=0;}
if(percent>100){percent=100;}
var newval=(percent/100)*(max-min)+min;var valModStep=(newval-min)%step;var alignValue=newval-valModStep;if(Math.abs(valModStep)*2>=step){alignValue+=(valModStep>0)?step:(-step);}
newval=parseFloat(alignValue.toFixed(5));if(newval<min){newval=min;}
if(newval>max){newval=max;}
this.handle.css("left",percent+"%");this.handle.attr({"aria-valuenow":cType==="input"?newval:control.find("option").eq(newval).attr("value"),"aria-valuetext":cType==="input"?newval:control.find("option").eq(newval).getEncodedText(),title:cType==="input"?newval:control.find("option").eq(newval).getEncodedText()});this.valuebg&&this.valuebg.css("width",percent+"%");if(this._labels){var handlePercent=this.handle.width()/this.slider.width()*100,aPercent=percent&&handlePercent+(100-handlePercent)*percent/100,bPercent=percent===100?0:Math.min(handlePercent+100-aPercent,100);this._labels.each(function(){var ab=$(this).is(".ui-slider-label-a");$(this).width((ab?aPercent:bPercent)+"%");});}
if(!preventInputUpdate){var valueChanged=false;if(cType==="input"){valueChanged=control.val()!==newval;control.val(newval);}else{valueChanged=control[0].selectedIndex!==newval;control[0].selectedIndex=newval;}
if(!isfromControl&&valueChanged){control.trigger("change");}}},enable:function(){this.element.attr("disabled",false);this.slider.removeClass("ui-disabled").attr("aria-disabled",false);return this._setOption("disabled",false);},disable:function(){this.element.attr("disabled",true);this.slider.addClass("ui-disabled").attr("aria-disabled",true);return this._setOption("disabled",true);}});$(document).bind("pagecreate create",function(e){$.mobile.slider.prototype.enhanceWithin(e.target,true);});})(jQuery);(function($,undefined){$.widget("mobile.selectmenu",$.mobile.widget,{options:{theme:null,disabled:false,icon:"arrow-d",iconpos:"right",inline:false,corners:true,shadow:true,iconshadow:true,overlayTheme:"a",hidePlaceholderMenuItems:true,closeText:"Close",nativeMenu:true,preventFocusZoom:/iPhone|iPad|iPod/.test(navigator.platform)&&navigator.userAgent.indexOf("AppleWebKit")>-1,initSelector:"select:not(:jqmData(role='slider'))",mini:false},_button:function(){return $("<div/>");},_setDisabled:function(value){this.element.attr("disabled",value);this.button.attr("aria-disabled",value);return this._setOption("disabled",value);},_focusButton:function(){var self=this;setTimeout(function(){self.button.focus();},40);},_selectOptions:function(){return this.select.find("option");},_preExtension:function(){var classes="";if(!!~this.element[0].className.indexOf("ui-btn-left")){classes=" ui-btn-left";}
if(!!~this.element[0].className.indexOf("ui-btn-right")){classes=" ui-btn-right";}
this.select=this.element.wrap("<div class='ui-select"+classes+"'>");this.selectID=this.select.attr("id");this.label=$("label[for='"+this.selectID+"']").addClass("ui-select");this.isMultiple=this.select[0].multiple;if(!this.options.theme){this.options.theme=$.mobile.getInheritedTheme(this.select,"c");}},_create:function(){this._preExtension();this._trigger("beforeCreate");this.button=this._button();var self=this,options=this.options,selectedIndex=this.select[0].selectedIndex==-1?0:this.select[0].selectedIndex,button=this.button.text($(this.select[0].options.item(selectedIndex)).text()).insertBefore(this.select).buttonMarkup({theme:options.theme,icon:options.icon,iconpos:options.iconpos,inline:options.inline,corners:options.corners,shadow:options.shadow,iconshadow:options.iconshadow,mini:options.mini});if(options.nativeMenu&&window.opera&&window.opera.version){this.select.addClass("ui-select-nativeonly");}
if(this.isMultiple){this.buttonCount=$("<span>").addClass("ui-li-count ui-btn-up-c ui-btn-corner-all").hide().appendTo(button.addClass('ui-li-has-count'));}
if(options.disabled||this.element.attr('disabled')){this.disable();}
this.select.change(function(){self.refresh();});this.build();},build:function(){var self=this;this.select.appendTo(self.button).bind("vmousedown",function(){self.button.addClass($.mobile.activeBtnClass);}).bind("focus",function(){self.button.addClass($.mobile.focusClass);}).bind("blur",function(){self.button.removeClass($.mobile.focusClass);}).bind("focus vmouseover",function(){self.button.trigger("vmouseover");}).bind("vmousemove",function(){self.button.removeClass($.mobile.activeBtnClass);}).bind("change blur vmouseout",function(){self.button.trigger("vmouseout").removeClass($.mobile.activeBtnClass);}).bind("change blur",function(){self.button.removeClass("ui-btn-down-"+self.options.theme);});self.button.bind("vmousedown",function(){if(self.options.preventFocusZoom){$.mobile.zoom.disable(true);}}).bind("mouseup",function(){if(self.options.preventFocusZoom){$.mobile.zoom.enable(true);}});},selected:function(){return this._selectOptions().filter(":selected");},selectedIndices:function(){var self=this;return this.selected().map(function(){return self._selectOptions().index(this);}).get();},setButtonText:function(){var self=this,selected=this.selected();this.button.find(".ui-btn-text").text(function(){if(!self.isMultiple){return selected.text();}
return selected.length?selected.map(function(){return $(this).text();}).get().join(", "):self.placeholder;});},setButtonCount:function(){var selected=this.selected();if(this.isMultiple){this.buttonCount[selected.length>1?"show":"hide"]().text(selected.length);}},refresh:function(){this.setButtonText();this.setButtonCount();},open:$.noop,close:$.noop,disable:function(){this._setDisabled(true);this.button.addClass("ui-disabled");},enable:function(){this._setDisabled(false);this.button.removeClass("ui-disabled");}});$(document).bind("pagecreate create",function(e){$.mobile.selectmenu.prototype.enhanceWithin(e.target,true);});})(jQuery);(function($,undefined){var extendSelect=function(widget){var select=widget.select,selectID=widget.selectID,label=widget.label,thisPage=widget.select.closest(".ui-page"),screen=$("<div>",{"class":"ui-selectmenu-screen ui-screen-hidden"}).appendTo(thisPage),selectOptions=widget._selectOptions(),isMultiple=widget.isMultiple=widget.select[0].multiple,buttonId=selectID+"-button",menuId=selectID+"-menu",menuPage=$("<div data-"+$.mobile.ns+"role='dialog' data-"+$.mobile.ns+"theme='"+widget.options.theme+"' data-"+$.mobile.ns+"overlay-theme='"+widget.options.overlayTheme+"'>"+"<div data-"+$.mobile.ns+"role='header'>"+"<div class='ui-title'>"+label.getEncodedText()+"</div>"+"</div>"+"<div data-"+$.mobile.ns+"role='content'></div>"+"</div>"),listbox=$("<div>",{"class":"ui-selectmenu ui-selectmenu-hidden ui-overlay-shadow ui-corner-all ui-body-"+widget.options.overlayTheme+" "+$.mobile.defaultDialogTransition}).insertAfter(screen),list=$("<ul>",{"class":"ui-selectmenu-list","id":menuId,"role":"listbox","aria-labelledby":buttonId}).attr("data-"+$.mobile.ns+"theme",widget.options.theme).appendTo(listbox),header=$("<div>",{"class":"ui-header ui-bar-"+widget.options.theme}).prependTo(listbox),headerTitle=$("<h1>",{"class":"ui-title"}).appendTo(header),menuPageContent,menuPageClose,headerClose;if(widget.isMultiple){headerClose=$("<a>",{"text":widget.options.closeText,"href":"#","class":"ui-btn-left"}).attr("data-"+$.mobile.ns+"iconpos","notext").attr("data-"+$.mobile.ns+"icon","delete").appendTo(header).buttonMarkup();}
$.extend(widget,{select:widget.select,selectID:selectID,buttonId:buttonId,menuId:menuId,thisPage:thisPage,menuPage:menuPage,label:label,screen:screen,selectOptions:selectOptions,isMultiple:isMultiple,theme:widget.options.theme,listbox:listbox,list:list,header:header,headerTitle:headerTitle,headerClose:headerClose,menuPageContent:menuPageContent,menuPageClose:menuPageClose,placeholder:"",build:function(){var self=this;self.refresh();self.select.attr("tabindex","-1").focus(function(){$(this).blur();self.button.focus();});self.button.bind("vclick keydown",function(event){if(event.type=="vclick"||event.keyCode&&(event.keyCode===$.mobile.keyCode.ENTER||event.keyCode===$.mobile.keyCode.SPACE)){self.open();event.preventDefault();}});self.list.attr("role","listbox").bind("focusin",function(e){$(e.target).attr("tabindex","0").trigger("vmouseover");}).bind("focusout",function(e){$(e.target).attr("tabindex","-1").trigger("vmouseout");}).delegate("li:not(.ui-disabled, .ui-li-divider)","click",function(event){var oldIndex=self.select[0].selectedIndex,newIndex=self.list.find("li:not(.ui-li-divider)").index(this),option=self._selectOptions().eq(newIndex)[0];option.selected=self.isMultiple?!option.selected:true;if(self.isMultiple){$(this).find(".ui-icon").toggleClass("ui-icon-checkbox-on",option.selected).toggleClass("ui-icon-checkbox-off",!option.selected);}
if(self.isMultiple||oldIndex!==newIndex){self.select.trigger("change");}
if(!self.isMultiple){self.close();}
event.preventDefault();}).keydown(function(event){var target=$(event.target),li=target.closest("li"),prev,next;switch(event.keyCode){case 38:prev=li.prev().not(".ui-selectmenu-placeholder");if(prev.is(".ui-li-divider")){prev=prev.prev();}
if(prev.length){target.blur().attr("tabindex","-1");prev.addClass("ui-btn-down-"+widget.options.theme).find("a").first().focus();}
return false;break;case 40:next=li.next();if(next.is(".ui-li-divider")){next=next.next();}
if(next.length){target.blur().attr("tabindex","-1");next.addClass("ui-btn-down-"+widget.options.theme).find("a").first().focus();}
return false;break;case 13:case 32:target.trigger("click");return false;break;}});self.menuPage.bind("pagehide",function(){self.list.appendTo(self.listbox);self._focusButton();$.mobile._bindPageRemove.call(self.thisPage);});self.screen.bind("vclick",function(event){self.close();});if(self.isMultiple){self.headerClose.click(function(){if(self.menuType=="overlay"){self.close();return false;}});}
self.thisPage.addDependents(this.menuPage);},_isRebuildRequired:function(){var list=this.list.find("li"),options=this._selectOptions();return options.text()!==list.text();},refresh:function(forceRebuild,foo){var self=this,select=this.element,isMultiple=this.isMultiple,options=this._selectOptions(),selected=this.selected(),indicies=this.selectedIndices();if(forceRebuild||this._isRebuildRequired()){self._buildList();}
self.setButtonText();self.setButtonCount();self.list.find("li:not(.ui-li-divider)").removeClass($.mobile.activeBtnClass).attr("aria-selected",false).each(function(i){if($.inArray(i,indicies)>-1){var item=$(this);item.attr("aria-selected",true);if(self.isMultiple){item.find(".ui-icon").removeClass("ui-icon-checkbox-off").addClass("ui-icon-checkbox-on");}else{if(item.is(".ui-selectmenu-placeholder")){item.next().addClass($.mobile.activeBtnClass);}else{item.addClass($.mobile.activeBtnClass);}}}});},close:function(){if(this.options.disabled||!this.isOpen){return;}
var self=this;if(self.menuType=="page"){window.history.back();}else{self.screen.addClass("ui-screen-hidden");self.listbox.addClass("ui-selectmenu-hidden").removeAttr("style").removeClass("in");self.list.appendTo(self.listbox);self._focusButton();}
self.isOpen=false;},open:function(){if(this.options.disabled){return;}
var self=this,$window=$(window),selfListParent=self.list.parent(),menuHeight=selfListParent.outerHeight(),menuWidth=selfListParent.outerWidth(),activePage=$(".ui-page-active"),tScrollElem=activePage,scrollTop=$window.scrollTop(),btnOffset=self.button.offset().top,screenHeight=$window.height(),screenWidth=$window.width();self.button.addClass($.mobile.activeBtnClass);setTimeout(function(){self.button.removeClass($.mobile.activeBtnClass);},300);function focusMenuItem(){self.list.find("."+$.mobile.activeBtnClass+" a").focus();}
if(menuHeight>screenHeight-80||!$.support.scrollTop){self.menuPage.appendTo($.mobile.pageContainer).page();self.menuPageContent=menuPage.find(".ui-content");self.menuPageClose=menuPage.find(".ui-header a");self.thisPage.unbind("pagehide.remove");if(scrollTop==0&&btnOffset>screenHeight){self.thisPage.one("pagehide",function(){$(this).jqmData("lastScroll",btnOffset);});}
self.menuPage.one("pageshow",function(){focusMenuItem();self.isOpen=true;});self.menuType="page";self.menuPageContent.append(self.list);self.menuPage.find("div .ui-title").text(self.label.text());$.mobile.changePage(self.menuPage,{transition:$.mobile.defaultDialogTransition});}else{self.menuType="overlay";self.screen.height($(document).height()).removeClass("ui-screen-hidden");var roomtop=btnOffset-scrollTop,roombot=scrollTop+screenHeight-btnOffset,halfheight=menuHeight/2,maxwidth=parseFloat(self.list.parent().css("max-width")),newtop,newleft;if(roomtop>menuHeight/2&&roombot>menuHeight/2){newtop=btnOffset+(self.button.outerHeight()/2)-halfheight;}else{newtop=roomtop>roombot?scrollTop+screenHeight-menuHeight-30:scrollTop+30;}
if(menuWidth<maxwidth){newleft=(screenWidth-menuWidth)/2;}else{newleft=self.button.offset().left+self.button.outerWidth()/2-menuWidth/2;if(newleft<30){newleft=30;}else if((newleft+menuWidth)>screenWidth){newleft=screenWidth-menuWidth-30;}}
self.listbox.append(self.list).removeClass("ui-selectmenu-hidden").css({top:newtop,left:newleft}).addClass("in");focusMenuItem();self.isOpen=true;}},_buildList:function(){var self=this,o=this.options,placeholder=this.placeholder,needPlaceholder=true,optgroups=[],lis=[],dataIcon=self.isMultiple?"checkbox-off":"false";self.list.empty().filter(".ui-listview").listview("destroy");var $options=self.select.find("option"),numOptions=$options.length,select=this.select[0],dataPrefix='data-'+$.mobile.ns,dataIndexAttr=dataPrefix+'option-index',dataIconAttr=dataPrefix+'icon',dataRoleAttr=dataPrefix+'role',fragment=document.createDocumentFragment(),optGroup;for(var i=0;i<numOptions;i++){var option=$options[i],$option=$(option),parent=option.parentNode,text=$option.text(),anchor=document.createElement('a'),classes=[];anchor.setAttribute('href','#');anchor.appendChild(document.createTextNode(text));if(parent!==select&&parent.nodeName.toLowerCase()==="optgroup"){var optLabel=parent.getAttribute('label');if(optLabel!=optGroup){var divider=document.createElement('li');divider.setAttribute(dataRoleAttr,'list-divider');divider.setAttribute('role','option');divider.setAttribute('tabindex','-1');divider.appendChild(document.createTextNode(optLabel));fragment.appendChild(divider);optGroup=optLabel;}}
if(needPlaceholder&&(!option.getAttribute("value")||text.length==0||$option.jqmData("placeholder"))){needPlaceholder=false;if(o.hidePlaceholderMenuItems){classes.push("ui-selectmenu-placeholder");}
if(!placeholder){placeholder=self.placeholder=text;}}
var item=document.createElement('li');if(option.disabled){classes.push("ui-disabled");item.setAttribute('aria-disabled',true);}
item.setAttribute(dataIndexAttr,i);item.setAttribute(dataIconAttr,dataIcon);item.className=classes.join(" ");item.setAttribute('role','option');anchor.setAttribute('tabindex','-1');item.appendChild(anchor);fragment.appendChild(item);}
self.list[0].appendChild(fragment);if(!this.isMultiple&&!placeholder.length){this.header.hide();}else{this.headerTitle.text(this.placeholder);}
self.list.listview();},_button:function(){return $("<a>",{"href":"#","role":"button","id":this.buttonId,"aria-haspopup":"true","aria-owns":this.menuId});}});};$(document).bind("selectmenubeforecreate",function(event){var selectmenuWidget=$(event.target).data("selectmenu");if(!selectmenuWidget.options.nativeMenu){extendSelect(selectmenuWidget);}});})(jQuery);(function($,undefined){$.widget("mobile.fixedtoolbar",$.mobile.widget,{options:{visibleOnPageShow:true,disablePageZoom:true,transition:"slide",fullscreen:false,tapToggle:true,tapToggleBlacklist:"a, input, select, textarea, .ui-header-fixed, .ui-footer-fixed",hideDuringFocus:"input, textarea, select",updatePagePadding:true,trackPersistentToolbars:true,supportBlacklist:function(){var w=window,ua=navigator.userAgent,platform=navigator.platform,wkmatch=ua.match(/AppleWebKit\/([0-9]+)/),wkversion=!!wkmatch&&wkmatch[1],ffmatch=ua.match(/Fennec\/([0-9]+)/),ffversion=!!ffmatch&&ffmatch[1],operammobilematch=ua.match(/Opera Mobi\/([0-9]+)/),omversion=!!operammobilematch&&operammobilematch[1];if(((platform.indexOf("iPhone")>-1||platform.indexOf("iPad")>-1||platform.indexOf("iPod")>-1)&&wkversion&&wkversion<534)||(w.operamini&&({}).toString.call(w.operamini)==="[object OperaMini]")||(operammobilematch&&omversion<7458)||(ua.indexOf("Android")>-1&&wkversion&&wkversion<533)||(ffversion&&ffversion<6)||("palmGetResource"in window&&wkversion&&wkversion<534)||(ua.indexOf("MeeGo")>-1&&ua.indexOf("NokiaBrowser/8.5.0")>-1)){return true;}
return false;},initSelector:":jqmData(position='fixed')"},_create:function(){var self=this,o=self.options,$el=self.element,tbtype=$el.is(":jqmData(role='header')")?"header":"footer",$page=$el.closest(".ui-page");if(o.supportBlacklist()){self.destroy();return;}
$el.addClass("ui-"+tbtype+"-fixed");if(o.fullscreen){$el.addClass("ui-"+tbtype+"-fullscreen");$page.addClass("ui-page-"+tbtype+"-fullscreen");}
else{$page.addClass("ui-page-"+tbtype+"-fixed");}
self._addTransitionClass();self._bindPageEvents();self._bindToggleHandlers();},_addTransitionClass:function(){var tclass=this.options.transition;if(tclass&&tclass!=="none"){if(tclass==="slide"){tclass=this.element.is(".ui-header")?"slidedown":"slideup";}
this.element.addClass(tclass);}},_bindPageEvents:function(){var self=this,o=self.options,$el=self.element;$el.closest(".ui-page").bind("pagebeforeshow",function(){if(o.disablePageZoom){$.mobile.zoom.disable(true);}
if(!o.visibleOnPageShow){self.hide(true);}}).bind("webkitAnimationStart animationstart updatelayout",function(){if(o.updatePagePadding){self.updatePagePadding();}}).bind("pageshow",function(){self.updatePagePadding();if(o.updatePagePadding){$(window).bind("throttledresize."+self.widgetName,function(){self.updatePagePadding();});}}).bind("pagebeforehide",function(e,ui){if(o.disablePageZoom){$.mobile.zoom.enable(true);}
if(o.updatePagePadding){$(window).unbind("throttledresize."+self.widgetName);}
if(o.trackPersistentToolbars){var thisFooter=$(".ui-footer-fixed:jqmData(id)",this),thisHeader=$(".ui-header-fixed:jqmData(id)",this),nextFooter=thisFooter.length&&ui.nextPage&&$(".ui-footer-fixed:jqmData(id='"+thisFooter.jqmData("id")+"')",ui.nextPage),nextHeader=thisHeader.length&&ui.nextPage&&$(".ui-header-fixed:jqmData(id='"+thisHeader.jqmData("id")+"')",ui.nextPage);nextFooter=nextFooter||$();if(nextFooter.length||nextHeader.length){nextFooter.add(nextHeader).appendTo($.mobile.pageContainer);ui.nextPage.one("pageshow",function(){nextFooter.add(nextHeader).appendTo(this);});}}});},_visible:true,updatePagePadding:function(){var $el=this.element,header=$el.is(".ui-header");if(this.options.fullscreen){return;}
$el.closest(".ui-page").css("padding-"+(header?"top":"bottom"),$el.outerHeight());},_useTransition:function(notransition){var $win=$(window),$el=this.element,scroll=$win.scrollTop(),elHeight=$el.height(),pHeight=$el.closest(".ui-page").height(),viewportHeight=$.mobile.getScreenHeight(),tbtype=$el.is(":jqmData(role='header')")?"header":"footer";return!notransition&&(this.options.transition&&this.options.transition!=="none"&&((tbtype==="header"&&!this.options.fullscreen&&scroll>elHeight)||(tbtype==="footer"&&!this.options.fullscreen&&scroll+viewportHeight<pHeight-elHeight))||this.options.fullscreen);},show:function(notransition){var hideClass="ui-fixed-hidden",$el=this.element;if(this._useTransition(notransition)){$el.removeClass("out "+hideClass).addClass("in");}
else{$el.removeClass(hideClass);}
this._visible=true;},hide:function(notransition){var hideClass="ui-fixed-hidden",$el=this.element,outclass="out"+(this.options.transition==="slide"?" reverse":"");if(this._useTransition(notransition)){$el.addClass(outclass).removeClass("in").animationComplete(function(){$el.addClass(hideClass).removeClass(outclass);});}
else{$el.addClass(hideClass).removeClass(outclass);}
this._visible=false;},toggle:function(){this[this._visible?"hide":"show"]();},_bindToggleHandlers:function(){var self=this,o=self.options,$el=self.element;$el.closest(".ui-page").bind("vclick",function(e){if(o.tapToggle&&!$(e.target).closest(o.tapToggleBlacklist).length){self.toggle();}}).bind("focusin focusout",function(e){if(screen.width<500&&$(e.target).is(o.hideDuringFocus)&&!$(e.target).closest(".ui-header-fixed, .ui-footer-fixed").length){self[(e.type==="focusin"&&self._visible)?"hide":"show"]();}});},destroy:function(){this.element.removeClass("ui-header-fixed ui-footer-fixed ui-header-fullscreen ui-footer-fullscreen in out fade slidedown slideup ui-fixed-hidden");this.element.closest(".ui-page").removeClass("ui-page-header-fixed ui-page-footer-fixed ui-page-header-fullscreen ui-page-footer-fullscreen");}});$(document).bind("pagecreate create",function(e){if($(e.target).jqmData("fullscreen")){$($.mobile.fixedtoolbar.prototype.options.initSelector,e.target).not(":jqmData(fullscreen)").jqmData("fullscreen",true);}
$.mobile.fixedtoolbar.prototype.enhanceWithin(e.target);});})(jQuery);(function($,window){if(!(/iPhone|iPad|iPod/.test(navigator.platform)&&navigator.userAgent.indexOf("AppleWebKit")>-1)){return;}
var zoom=$.mobile.zoom,evt,x,y,z,aig;function checkTilt(e){evt=e.originalEvent;aig=evt.accelerationIncludingGravity;x=Math.abs(aig.x);y=Math.abs(aig.y);z=Math.abs(aig.z);if(!window.orientation&&(x>7||((z>6&&y<8||z<8&&y>6)&&x>5))){if(zoom.enabled){zoom.disable();}}
else if(!zoom.enabled){zoom.enable();}}
$(window).bind("orientationchange.iosorientationfix",zoom.enable).bind("devicemotion.iosorientationfix",checkTilt);}(jQuery,this));(function($,window,undefined){var $html=$("html"),$head=$("head"),$window=$(window);$(window.document).trigger("mobileinit");if(!$.mobile.gradeA()){return;}
if($.mobile.ajaxBlacklist){$.mobile.ajaxEnabled=false;}
$html.addClass("ui-mobile ui-mobile-rendering");setTimeout(hideRenderingClass,5000);var loaderClass="ui-loader",$loader=$("<div class='"+loaderClass+"'><span class='ui-icon ui-icon-loading'></span><h1></h1></div>");function fakeFixLoader(){var activeBtn=$("."+$.mobile.activeBtnClass).first();$loader.css({top:$.support.scrollTop&&$window.scrollTop()+$window.height()/2||activeBtn.length&&activeBtn.offset().top||100});}
function checkLoaderPosition(){var offset=$loader.offset(),scrollTop=$window.scrollTop(),screenHeight=$.mobile.getScreenHeight();if(offset.top<scrollTop||(offset.top-scrollTop)>screenHeight){$loader.addClass("ui-loader-fakefix");fakeFixLoader();$window.unbind("scroll",checkLoaderPosition).bind("scroll",fakeFixLoader);}}
function hideRenderingClass(){$html.removeClass("ui-mobile-rendering");}
$.extend($.mobile,{showPageLoadingMsg:function(theme,msgText,textonly){$html.addClass("ui-loading");if($.mobile.loadingMessage){var textVisible=textonly||$.mobile.loadingMessageTextVisible;theme=theme||$.mobile.loadingMessageTheme,$loader.attr("class",loaderClass+" ui-corner-all ui-body-"+(theme||"a")+" ui-loader-"+(textVisible?"verbose":"default")+(textonly?" ui-loader-textonly":"")).find("h1").text(msgText||$.mobile.loadingMessage).end().appendTo($.mobile.pageContainer);checkLoaderPosition();$window.bind("scroll",checkLoaderPosition);}},hidePageLoadingMsg:function(){$html.removeClass("ui-loading");if($.mobile.loadingMessage){$loader.removeClass("ui-loader-fakefix");}
$(window).unbind("scroll",fakeFixLoader);$(window).unbind("scroll",checkLoaderPosition);},initializePage:function(){var $pages=$(":jqmData(role='page'), :jqmData(role='dialog')");if(!$pages.length){$pages=$("body").wrapInner("<div data-"+$.mobile.ns+"role='page'></div>").children(0);}
$pages.each(function(){var $this=$(this);if(!$this.jqmData("url")){$this.attr("data-"+$.mobile.ns+"url",$this.attr("id")||location.pathname+location.search);}});$.mobile.firstPage=$pages.first();$.mobile.pageContainer=$pages.first().parent().addClass("ui-mobile-viewport");$window.trigger("pagecontainercreate");$.mobile.showPageLoadingMsg();hideRenderingClass();if(!$.mobile.hashListeningEnabled||!$.mobile.path.stripHash(location.hash)){$.mobile.changePage($.mobile.firstPage,{transition:"none",reverse:true,changeHash:false,fromHashChange:true});}
else{$window.trigger("hashchange",[true]);}}});$.mobile._registerInternalEvents();$(function(){window.scrollTo(0,1);$.mobile.defaultHomeScroll=(!$.support.scrollTop||$(window).scrollTop()===1)?0:1;if($.fn.controlgroup){$(document).bind("pagecreate create",function(e){$(":jqmData(role='controlgroup')",e.target).jqmEnhanceable().controlgroup({excludeInvisible:false});});}
if($.mobile.autoInitializePage){$.mobile.initializePage();}
$window.load($.mobile.silentScroll);});}(jQuery,this));}));(function(window,doc){var m=Math,dummyStyle=doc.createElement('div').style,vendor=(function(){var vendors='t,webkitT,MozT,msT,OT'.split(','),t,i=0,l=vendors.length;for(;i<l;i++){t=vendors[i]+'ransform';if(t in dummyStyle){return vendors[i].substr(0,vendors[i].length-1);}}
return false;})(),cssVendor=vendor?'-'+vendor.toLowerCase()+'-':'',transform=prefixStyle('transform'),transitionProperty=prefixStyle('transitionProperty'),transitionDuration=prefixStyle('transitionDuration'),transformOrigin=prefixStyle('transformOrigin'),transitionTimingFunction=prefixStyle('transitionTimingFunction'),transitionDelay=prefixStyle('transitionDelay'),isAndroid=(/android/gi).test(navigator.appVersion),isIDevice=(/iphone|ipad/gi).test(navigator.appVersion),isTouchPad=(/hp-tablet/gi).test(navigator.appVersion),has3d=prefixStyle('perspective')in dummyStyle,hasTouch='ontouchstart'in window&&!isTouchPad,hasTransform=vendor!==false,hasTransitionEnd=prefixStyle('transition')in dummyStyle,RESIZE_EV='onorientationchange'in window?'orientationchange':'resize',START_EV=hasTouch?'touchstart':'mousedown',MOVE_EV=hasTouch?'touchmove':'mousemove',END_EV=hasTouch?'touchend':'mouseup',CANCEL_EV=hasTouch?'touchcancel':'mouseup',TRNEND_EV=(function(){if(vendor===false)return false;var transitionEnd={'':'transitionend','webkit':'webkitTransitionEnd','Moz':'transitionend','O':'otransitionend','ms':'MSTransitionEnd'};return transitionEnd[vendor];})(),nextFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){return setTimeout(callback,1);};})(),cancelFrame=(function(){return window.cancelRequestAnimationFrame||window.webkitCancelAnimationFrame||window.webkitCancelRequestAnimationFrame||window.mozCancelRequestAnimationFrame||window.oCancelRequestAnimationFrame||window.msCancelRequestAnimationFrame||clearTimeout;})(),translateZ=has3d?' translateZ(0)':'',iScroll=function(el,options){var that=this,i;that.wrapper=typeof el=='object'?el:doc.getElementById(el);that.wrapper.style.overflow='hidden';that.scroller=that.wrapper.children[0];that.options={hScroll:true,vScroll:true,x:0,y:0,bounce:true,bounceLock:false,momentum:true,lockDirection:true,useTransform:true,useTransition:false,topOffset:0,checkDOMChanges:false,handleClick:true,hScrollbar:true,vScrollbar:true,fixedScrollbar:isAndroid,hideScrollbar:isIDevice,fadeScrollbar:isIDevice&&has3d,scrollbarClass:'',zoom:false,zoomMin:1,zoomMax:4,doubleTapZoom:2,wheelAction:'scroll',snap:false,snapThreshold:1,onRefresh:null,onBeforeScrollStart:function(e){e.preventDefault();},onScrollStart:null,onBeforeScrollMove:null,onScrollMove:null,onBeforeScrollEnd:null,onScrollEnd:null,onTouchEnd:null,onDestroy:null,onZoomStart:null,onZoom:null,onZoomEnd:null};for(i in options)that.options[i]=options[i];that.x=that.options.x;that.y=that.options.y;that.options.useTransform=hasTransform&&that.options.useTransform;that.options.hScrollbar=that.options.hScroll&&that.options.hScrollbar;that.options.vScrollbar=that.options.vScroll&&that.options.vScrollbar;that.options.zoom=that.options.useTransform&&that.options.zoom;that.options.useTransition=hasTransitionEnd&&that.options.useTransition;if(that.options.zoom&&isAndroid){translateZ='';}
that.scroller.style[transitionProperty]=that.options.useTransform?cssVendor+'transform':'top left';that.scroller.style[transitionDuration]='0';that.scroller.style[transformOrigin]='0 0';if(that.options.useTransition)that.scroller.style[transitionTimingFunction]='cubic-bezier(0.33,0.66,0.66,1)';if(that.options.useTransform)that.scroller.style[transform]='translate('+that.x+'px,'+that.y+'px)'+translateZ;else that.scroller.style.cssText+=';position:absolute;top:'+that.y+'px;left:'+that.x+'px';if(that.options.useTransition)that.options.fixedScrollbar=true;that.refresh();that._bind(RESIZE_EV,window);that._bind(START_EV);if(!hasTouch){if(that.options.wheelAction!='none'){that._bind('DOMMouseScroll');that._bind('mousewheel');}}
if(that.options.checkDOMChanges)that.checkDOMTime=setInterval(function(){that._checkDOMChanges();},500);};iScroll.prototype={enabled:true,x:0,y:0,steps:[],scale:1,currPageX:0,currPageY:0,pagesX:[],pagesY:[],aniTime:null,wheelZoomCount:0,handleEvent:function(e){var that=this;switch(e.type){case START_EV:if(!hasTouch&&e.button!==0)return;that._start(e);break;case MOVE_EV:that._move(e);break;case END_EV:case CANCEL_EV:that._end(e);break;case RESIZE_EV:that._resize();break;case'DOMMouseScroll':case'mousewheel':that._wheel(e);break;case TRNEND_EV:that._transitionEnd(e);break;}},_checkDOMChanges:function(){if(this.moved||this.zoomed||this.animating||(this.scrollerW==this.scroller.offsetWidth*this.scale&&this.scrollerH==this.scroller.offsetHeight*this.scale))return;this.refresh();},_scrollbar:function(dir){var that=this,bar;if(!that[dir+'Scrollbar']){if(that[dir+'ScrollbarWrapper']){if(hasTransform)that[dir+'ScrollbarIndicator'].style[transform]='';that[dir+'ScrollbarWrapper'].parentNode.removeChild(that[dir+'ScrollbarWrapper']);that[dir+'ScrollbarWrapper']=null;that[dir+'ScrollbarIndicator']=null;}
return;}
if(!that[dir+'ScrollbarWrapper']){bar=doc.createElement('div');if(that.options.scrollbarClass)bar.className=that.options.scrollbarClass+dir.toUpperCase();else bar.style.cssText='position:absolute;z-index:100;'+(dir=='h'?'height:7px;bottom:1px;left:2px;right:'+(that.vScrollbar?'7':'2')+'px':'width:7px;bottom:'+(that.hScrollbar?'7':'2')+'px;top:2px;right:1px');bar.style.cssText+=';pointer-events:none;'+cssVendor+'transition-property:opacity;'+cssVendor+'transition-duration:'+(that.options.fadeScrollbar?'350ms':'0')+';overflow:hidden;opacity:'+(that.options.hideScrollbar?'0':'1');that.wrapper.appendChild(bar);that[dir+'ScrollbarWrapper']=bar;bar=doc.createElement('div');if(!that.options.scrollbarClass){bar.style.cssText='position:absolute;z-index:100;background:rgba(0,0,0,0.5);border:1px solid rgba(255,255,255,0.9);'+cssVendor+'background-clip:padding-box;'+cssVendor+'box-sizing:border-box;'+(dir=='h'?'height:100%':'width:100%')+';'+cssVendor+'border-radius:3px;border-radius:3px';}
bar.style.cssText+=';pointer-events:none;'+cssVendor+'transition-property:'+cssVendor+'transform;'+cssVendor+'transition-timing-function:cubic-bezier(0.33,0.66,0.66,1);'+cssVendor+'transition-duration:0;'+cssVendor+'transform: translate(0,0)'+translateZ;if(that.options.useTransition)bar.style.cssText+=';'+cssVendor+'transition-timing-function:cubic-bezier(0.33,0.66,0.66,1)';that[dir+'ScrollbarWrapper'].appendChild(bar);that[dir+'ScrollbarIndicator']=bar;}
if(dir=='h'){that.hScrollbarSize=that.hScrollbarWrapper.clientWidth;that.hScrollbarIndicatorSize=m.max(m.round(that.hScrollbarSize*that.hScrollbarSize/that.scrollerW),8);that.hScrollbarIndicator.style.width=that.hScrollbarIndicatorSize+'px';that.hScrollbarMaxScroll=that.hScrollbarSize-that.hScrollbarIndicatorSize;that.hScrollbarProp=that.hScrollbarMaxScroll/that.maxScrollX;}else{that.vScrollbarSize=that.vScrollbarWrapper.clientHeight;that.vScrollbarIndicatorSize=m.max(m.round(that.vScrollbarSize*that.vScrollbarSize/that.scrollerH),8);that.vScrollbarIndicator.style.height=that.vScrollbarIndicatorSize+'px';that.vScrollbarMaxScroll=that.vScrollbarSize-that.vScrollbarIndicatorSize;that.vScrollbarProp=that.vScrollbarMaxScroll/that.maxScrollY;}
that._scrollbarPos(dir,true);},_resize:function(){var that=this;setTimeout(function(){that.refresh();},isAndroid?200:0);},_pos:function(x,y){if(this.zoomed)return;x=this.hScroll?x:0;y=this.vScroll?y:0;if(this.options.useTransform){this.scroller.style[transform]='translate('+x+'px,'+y+'px) scale('+this.scale+')'+translateZ;}else{x=m.round(x);y=m.round(y);this.scroller.style.left=x+'px';this.scroller.style.top=y+'px';}
this.x=x;this.y=y;this._scrollbarPos('h');this._scrollbarPos('v');},_scrollbarPos:function(dir,hidden){var that=this,pos=dir=='h'?that.x:that.y,size;if(!that[dir+'Scrollbar'])return;pos=that[dir+'ScrollbarProp']*pos;if(pos<0){if(!that.options.fixedScrollbar){size=that[dir+'ScrollbarIndicatorSize']+m.round(pos*3);if(size<8)size=8;that[dir+'ScrollbarIndicator'].style[dir=='h'?'width':'height']=size+'px';}
pos=0;}else if(pos>that[dir+'ScrollbarMaxScroll']){if(!that.options.fixedScrollbar){size=that[dir+'ScrollbarIndicatorSize']-m.round((pos-that[dir+'ScrollbarMaxScroll'])*3);if(size<8)size=8;that[dir+'ScrollbarIndicator'].style[dir=='h'?'width':'height']=size+'px';pos=that[dir+'ScrollbarMaxScroll']+(that[dir+'ScrollbarIndicatorSize']-size);}else{pos=that[dir+'ScrollbarMaxScroll'];}}
that[dir+'ScrollbarWrapper'].style[transitionDelay]='0';that[dir+'ScrollbarWrapper'].style.opacity=hidden&&that.options.hideScrollbar?'0':'1';that[dir+'ScrollbarIndicator'].style[transform]='translate('+(dir=='h'?pos+'px,0)':'0,'+pos+'px)')+translateZ;},_start:function(e){var that=this,point=hasTouch?e.touches[0]:e,matrix,x,y,c1,c2;if(!that.enabled)return;if(that.options.onBeforeScrollStart)that.options.onBeforeScrollStart.call(that,e);if(that.options.useTransition||that.options.zoom)that._transitionTime(0);that.moved=false;that.animating=false;that.zoomed=false;that.distX=0;that.distY=0;that.absDistX=0;that.absDistY=0;that.dirX=0;that.dirY=0;if(that.options.zoom&&hasTouch&&e.touches.length>1){c1=m.abs(e.touches[0].pageX-e.touches[1].pageX);c2=m.abs(e.touches[0].pageY-e.touches[1].pageY);that.touchesDistStart=m.sqrt(c1*c1+c2*c2);that.originX=m.abs(e.touches[0].pageX+e.touches[1].pageX-that.wrapperOffsetLeft*2)/2-that.x;that.originY=m.abs(e.touches[0].pageY+e.touches[1].pageY-that.wrapperOffsetTop*2)/2-that.y;if(that.options.onZoomStart)that.options.onZoomStart.call(that,e);}
if(that.options.momentum){if(that.options.useTransform){matrix=getComputedStyle(that.scroller,null)[transform].replace(/[^0-9\-.,]/g,'').split(',');x=+(matrix[12]||matrix[4]);y=+(matrix[13]||matrix[5]);}else{x=+getComputedStyle(that.scroller,null).left.replace(/[^0-9-]/g,'');y=+getComputedStyle(that.scroller,null).top.replace(/[^0-9-]/g,'');}
if(x!=that.x||y!=that.y){if(that.options.useTransition)that._unbind(TRNEND_EV);else cancelFrame(that.aniTime);that.steps=[];that._pos(x,y);if(that.options.onScrollEnd)that.options.onScrollEnd.call(that);}}
that.absStartX=that.x;that.absStartY=that.y;that.startX=that.x;that.startY=that.y;that.pointX=point.pageX;that.pointY=point.pageY;that.startTime=e.timeStamp||Date.now();if(that.options.onScrollStart)that.options.onScrollStart.call(that,e);that._bind(MOVE_EV,window);that._bind(END_EV,window);that._bind(CANCEL_EV,window);},_move:function(e){var that=this,point=hasTouch?e.touches[0]:e,deltaX=point.pageX-that.pointX,deltaY=point.pageY-that.pointY,newX=that.x+deltaX,newY=that.y+deltaY,c1,c2,scale,timestamp=e.timeStamp||Date.now();if(that.options.onBeforeScrollMove)that.options.onBeforeScrollMove.call(that,e);if(that.options.zoom&&hasTouch&&e.touches.length>1){c1=m.abs(e.touches[0].pageX-e.touches[1].pageX);c2=m.abs(e.touches[0].pageY-e.touches[1].pageY);that.touchesDist=m.sqrt(c1*c1+c2*c2);that.zoomed=true;scale=1/that.touchesDistStart*that.touchesDist*this.scale;if(scale<that.options.zoomMin)scale=0.5*that.options.zoomMin*Math.pow(2.0,scale/that.options.zoomMin);else if(scale>that.options.zoomMax)scale=2.0*that.options.zoomMax*Math.pow(0.5,that.options.zoomMax/scale);that.lastScale=scale/this.scale;newX=this.originX-this.originX*that.lastScale+this.x,newY=this.originY-this.originY*that.lastScale+this.y;this.scroller.style[transform]='translate('+newX+'px,'+newY+'px) scale('+scale+')'+translateZ;if(that.options.onZoom)that.options.onZoom.call(that,e);return;}
that.pointX=point.pageX;that.pointY=point.pageY;if(newX>0||newX<that.maxScrollX){newX=that.options.bounce?that.x+(deltaX/2):newX>=0||that.maxScrollX>=0?0:that.maxScrollX;}
if(newY>that.minScrollY||newY<that.maxScrollY){newY=that.options.bounce?that.y+(deltaY/2):newY>=that.minScrollY||that.maxScrollY>=0?that.minScrollY:that.maxScrollY;}
that.distX+=deltaX;that.distY+=deltaY;that.absDistX=m.abs(that.distX);that.absDistY=m.abs(that.distY);if(that.absDistX<6&&that.absDistY<6){return;}
if(that.options.lockDirection){if(that.absDistX>that.absDistY+5){newY=that.y;deltaY=0;}else if(that.absDistY>that.absDistX+5){newX=that.x;deltaX=0;}}
that.moved=true;that._pos(newX,newY);that.dirX=deltaX>0?-1:deltaX<0?1:0;that.dirY=deltaY>0?-1:deltaY<0?1:0;if(timestamp-that.startTime>300){that.startTime=timestamp;that.startX=that.x;that.startY=that.y;}
if(that.options.onScrollMove)that.options.onScrollMove.call(that,e);},_end:function(e){if(hasTouch&&e.touches.length!==0)return;var that=this,point=hasTouch?e.changedTouches[0]:e,target,ev,momentumX={dist:0,time:0},momentumY={dist:0,time:0},duration=(e.timeStamp||Date.now())-that.startTime,newPosX=that.x,newPosY=that.y,distX,distY,newDuration,snap,scale;that._unbind(MOVE_EV,window);that._unbind(END_EV,window);that._unbind(CANCEL_EV,window);if(that.options.onBeforeScrollEnd)that.options.onBeforeScrollEnd.call(that,e);if(that.zoomed){scale=that.scale*that.lastScale;scale=Math.max(that.options.zoomMin,scale);scale=Math.min(that.options.zoomMax,scale);that.lastScale=scale/that.scale;that.scale=scale;that.x=that.originX-that.originX*that.lastScale+that.x;that.y=that.originY-that.originY*that.lastScale+that.y;that.scroller.style[transitionDuration]='200ms';that.scroller.style[transform]='translate('+that.x+'px,'+that.y+'px) scale('+that.scale+')'+translateZ;that.zoomed=false;that.refresh();if(that.options.onZoomEnd)that.options.onZoomEnd.call(that,e);return;}
if(!that.moved){if(hasTouch){if(that.doubleTapTimer&&that.options.zoom){clearTimeout(that.doubleTapTimer);that.doubleTapTimer=null;if(that.options.onZoomStart)that.options.onZoomStart.call(that,e);that.zoom(that.pointX,that.pointY,that.scale==1?that.options.doubleTapZoom:1);if(that.options.onZoomEnd){setTimeout(function(){that.options.onZoomEnd.call(that,e);},200);}}else if(this.options.handleClick){that.doubleTapTimer=setTimeout(function(){that.doubleTapTimer=null;target=point.target;while(target.nodeType!=1)target=target.parentNode;if(target.tagName!='SELECT'&&target.tagName!='INPUT'&&target.tagName!='TEXTAREA'){ev=doc.createEvent('MouseEvents');ev.initMouseEvent('click',true,true,e.view,1,point.screenX,point.screenY,point.clientX,point.clientY,e.ctrlKey,e.altKey,e.shiftKey,e.metaKey,0,null);ev._fake=true;target.dispatchEvent(ev);}},that.options.zoom?250:0);}}
that._resetPos(400);if(that.options.onTouchEnd)that.options.onTouchEnd.call(that,e);return;}
if(duration<300&&that.options.momentum){momentumX=newPosX?that._momentum(newPosX-that.startX,duration,-that.x,that.scrollerW-that.wrapperW+that.x,that.options.bounce?that.wrapperW:0):momentumX;momentumY=newPosY?that._momentum(newPosY-that.startY,duration,-that.y,(that.maxScrollY<0?that.scrollerH-that.wrapperH+that.y-that.minScrollY:0),that.options.bounce?that.wrapperH:0):momentumY;newPosX=that.x+momentumX.dist;newPosY=that.y+momentumY.dist;if((that.x>0&&newPosX>0)||(that.x<that.maxScrollX&&newPosX<that.maxScrollX))momentumX={dist:0,time:0};if((that.y>that.minScrollY&&newPosY>that.minScrollY)||(that.y<that.maxScrollY&&newPosY<that.maxScrollY))momentumY={dist:0,time:0};}
if(momentumX.dist||momentumY.dist){newDuration=m.max(m.max(momentumX.time,momentumY.time),10);if(that.options.snap){distX=newPosX-that.absStartX;distY=newPosY-that.absStartY;if(m.abs(distX)<that.options.snapThreshold&&m.abs(distY)<that.options.snapThreshold){that.scrollTo(that.absStartX,that.absStartY,200);}
else{snap=that._snap(newPosX,newPosY);newPosX=snap.x;newPosY=snap.y;newDuration=m.max(snap.time,newDuration);}}
that.scrollTo(m.round(newPosX),m.round(newPosY),newDuration);if(that.options.onTouchEnd)that.options.onTouchEnd.call(that,e);return;}
if(that.options.snap){distX=newPosX-that.absStartX;distY=newPosY-that.absStartY;if(m.abs(distX)<that.options.snapThreshold&&m.abs(distY)<that.options.snapThreshold)that.scrollTo(that.absStartX,that.absStartY,200);else{snap=that._snap(that.x,that.y);if(snap.x!=that.x||snap.y!=that.y)that.scrollTo(snap.x,snap.y,snap.time);}
if(that.options.onTouchEnd)that.options.onTouchEnd.call(that,e);return;}
that._resetPos(200);if(that.options.onTouchEnd)that.options.onTouchEnd.call(that,e);},_resetPos:function(time){var that=this,resetX=that.x>=0?0:that.x<that.maxScrollX?that.maxScrollX:that.x,resetY=that.y>=that.minScrollY||that.maxScrollY>0?that.minScrollY:that.y<that.maxScrollY?that.maxScrollY:that.y;if(resetX==that.x&&resetY==that.y){if(that.moved){that.moved=false;if(that.options.onScrollEnd)that.options.onScrollEnd.call(that);}
if(that.hScrollbar&&that.options.hideScrollbar){if(vendor=='webkit')that.hScrollbarWrapper.style[transitionDelay]='300ms';that.hScrollbarWrapper.style.opacity='0';}
if(that.vScrollbar&&that.options.hideScrollbar){if(vendor=='webkit')that.vScrollbarWrapper.style[transitionDelay]='300ms';that.vScrollbarWrapper.style.opacity='0';}
return;}
that.scrollTo(resetX,resetY,time||0);},_wheel:function(e){var that=this,wheelDeltaX,wheelDeltaY,deltaX,deltaY,deltaScale;if('wheelDeltaX'in e){wheelDeltaX=e.wheelDeltaX/12;wheelDeltaY=e.wheelDeltaY/12;}else if('wheelDelta'in e){wheelDeltaX=wheelDeltaY=e.wheelDelta/12;}else if('detail'in e){wheelDeltaX=wheelDeltaY=-e.detail*3;}else{return;}
if(that.options.wheelAction=='zoom'){deltaScale=that.scale*Math.pow(2,1/3*(wheelDeltaY?wheelDeltaY/Math.abs(wheelDeltaY):0));if(deltaScale<that.options.zoomMin)deltaScale=that.options.zoomMin;if(deltaScale>that.options.zoomMax)deltaScale=that.options.zoomMax;if(deltaScale!=that.scale){if(!that.wheelZoomCount&&that.options.onZoomStart)that.options.onZoomStart.call(that,e);that.wheelZoomCount++;that.zoom(e.pageX,e.pageY,deltaScale,400);setTimeout(function(){that.wheelZoomCount--;if(!that.wheelZoomCount&&that.options.onZoomEnd)that.options.onZoomEnd.call(that,e);},400);}
return;}
deltaX=that.x+wheelDeltaX;deltaY=that.y+wheelDeltaY;if(deltaX>0)deltaX=0;else if(deltaX<that.maxScrollX)deltaX=that.maxScrollX;if(deltaY>that.minScrollY)deltaY=that.minScrollY;else if(deltaY<that.maxScrollY)deltaY=that.maxScrollY;if(that.maxScrollY<0){that.scrollTo(deltaX,deltaY,0);}},_transitionEnd:function(e){var that=this;if(e.target!=that.scroller)return;that._unbind(TRNEND_EV);that._startAni();},_startAni:function(){var that=this,startX=that.x,startY=that.y,startTime=Date.now(),step,easeOut,animate;if(that.animating)return;if(!that.steps.length){that._resetPos(400);return;}
step=that.steps.shift();if(step.x==startX&&step.y==startY)step.time=0;that.animating=true;that.moved=true;if(that.options.useTransition){that._transitionTime(step.time);that._pos(step.x,step.y);that.animating=false;if(step.time)that._bind(TRNEND_EV);else that._resetPos(0);return;}
animate=function(){var now=Date.now(),newX,newY;if(now>=startTime+step.time){that._pos(step.x,step.y);that.animating=false;if(that.options.onAnimationEnd)that.options.onAnimationEnd.call(that);that._startAni();return;}
now=(now-startTime)/step.time-1;easeOut=m.sqrt(1-now*now);newX=(step.x-startX)*easeOut+startX;newY=(step.y-startY)*easeOut+startY;that._pos(newX,newY);if(that.animating)that.aniTime=nextFrame(animate);};animate();},_transitionTime:function(time){time+='ms';this.scroller.style[transitionDuration]=time;if(this.hScrollbar)this.hScrollbarIndicator.style[transitionDuration]=time;if(this.vScrollbar)this.vScrollbarIndicator.style[transitionDuration]=time;},_momentum:function(dist,time,maxDistUpper,maxDistLower,size){var deceleration=0.0006,speed=m.abs(dist)/time,newDist=(speed*speed)/(2*deceleration),newTime=0,outsideDist=0;if(dist>0&&newDist>maxDistUpper){outsideDist=size/(6/(newDist/speed*deceleration));maxDistUpper=maxDistUpper+outsideDist;speed=speed*maxDistUpper/newDist;newDist=maxDistUpper;}else if(dist<0&&newDist>maxDistLower){outsideDist=size/(6/(newDist/speed*deceleration));maxDistLower=maxDistLower+outsideDist;speed=speed*maxDistLower/newDist;newDist=maxDistLower;}
newDist=newDist*(dist<0?-1:1);newTime=speed/deceleration;return{dist:newDist,time:m.round(newTime)};},_offset:function(el){var left=-el.offsetLeft,top=-el.offsetTop;while(el=el.offsetParent){left-=el.offsetLeft;top-=el.offsetTop;}
if(el!=this.wrapper){left*=this.scale;top*=this.scale;}
return{left:left,top:top};},_snap:function(x,y){var that=this,i,l,page,time,sizeX,sizeY;page=that.pagesX.length-1;for(i=0,l=that.pagesX.length;i<l;i++){if(x>=that.pagesX[i]){page=i;break;}}
if(page==that.currPageX&&page>0&&that.dirX<0)page--;x=that.pagesX[page];sizeX=m.abs(x-that.pagesX[that.currPageX]);sizeX=sizeX?m.abs(that.x-x)/sizeX*500:0;that.currPageX=page;page=that.pagesY.length-1;for(i=0;i<page;i++){if(y>=that.pagesY[i]){page=i;break;}}
if(page==that.currPageY&&page>0&&that.dirY<0)page--;y=that.pagesY[page];sizeY=m.abs(y-that.pagesY[that.currPageY]);sizeY=sizeY?m.abs(that.y-y)/sizeY*500:0;that.currPageY=page;time=m.round(m.max(sizeX,sizeY))||200;return{x:x,y:y,time:time};},_bind:function(type,el,bubble){(el||this.scroller).addEventListener(type,this,!!bubble);},_unbind:function(type,el,bubble){(el||this.scroller).removeEventListener(type,this,!!bubble);},destroy:function(){var that=this;that.scroller.style[transform]='';that.hScrollbar=false;that.vScrollbar=false;that._scrollbar('h');that._scrollbar('v');that._unbind(RESIZE_EV,window);that._unbind(START_EV);that._unbind(MOVE_EV,window);that._unbind(END_EV,window);that._unbind(CANCEL_EV,window);if(!that.options.hasTouch){that._unbind('DOMMouseScroll');that._unbind('mousewheel');}
if(that.options.useTransition)that._unbind(TRNEND_EV);if(that.options.checkDOMChanges)clearInterval(that.checkDOMTime);if(that.options.onDestroy)that.options.onDestroy.call(that);},refresh:function(){var that=this,offset,i,l,els,pos=0,page=0;if(that.scale<that.options.zoomMin)that.scale=that.options.zoomMin;that.wrapperW=that.wrapper.clientWidth||1;that.wrapperH=that.wrapper.clientHeight||1;that.minScrollY=-that.options.topOffset||0;that.scrollerW=m.round(that.scroller.offsetWidth*that.scale);that.scrollerH=m.round((that.scroller.offsetHeight+that.minScrollY)*that.scale);that.maxScrollX=that.wrapperW-that.scrollerW;that.maxScrollY=that.wrapperH-that.scrollerH+that.minScrollY;that.dirX=0;that.dirY=0;if(that.options.onRefresh)that.options.onRefresh.call(that);that.hScroll=that.options.hScroll&&that.maxScrollX<0;that.vScroll=that.options.vScroll&&(!that.options.bounceLock&&!that.hScroll||that.scrollerH>that.wrapperH);that.hScrollbar=that.hScroll&&that.options.hScrollbar;that.vScrollbar=that.vScroll&&that.options.vScrollbar&&that.scrollerH>that.wrapperH;offset=that._offset(that.wrapper);that.wrapperOffsetLeft=-offset.left;that.wrapperOffsetTop=-offset.top;if(typeof that.options.snap=='string'){that.pagesX=[];that.pagesY=[];els=that.scroller.querySelectorAll(that.options.snap);for(i=0,l=els.length;i<l;i++){pos=that._offset(els[i]);pos.left+=that.wrapperOffsetLeft;pos.top+=that.wrapperOffsetTop;that.pagesX[i]=pos.left<that.maxScrollX?that.maxScrollX:pos.left*that.scale;that.pagesY[i]=pos.top<that.maxScrollY?that.maxScrollY:pos.top*that.scale;}}else if(that.options.snap){that.pagesX=[];while(pos>=that.maxScrollX){that.pagesX[page]=pos;pos=pos-that.wrapperW;page++;}
if(that.maxScrollX%that.wrapperW)that.pagesX[that.pagesX.length]=that.maxScrollX-that.pagesX[that.pagesX.length-1]+that.pagesX[that.pagesX.length-1];pos=0;page=0;that.pagesY=[];while(pos>=that.maxScrollY){that.pagesY[page]=pos;pos=pos-that.wrapperH;page++;}
if(that.maxScrollY%that.wrapperH)that.pagesY[that.pagesY.length]=that.maxScrollY-that.pagesY[that.pagesY.length-1]+that.pagesY[that.pagesY.length-1];}
that._scrollbar('h');that._scrollbar('v');if(!that.zoomed){that.scroller.style[transitionDuration]='0';that._resetPos(400);}},scrollTo:function(x,y,time,relative){var that=this,step=x,i,l;that.stop();if(!step.length)step=[{x:x,y:y,time:time,relative:relative}];for(i=0,l=step.length;i<l;i++){if(step[i].relative){step[i].x=that.x-step[i].x;step[i].y=that.y-step[i].y;}
that.steps.push({x:step[i].x,y:step[i].y,time:step[i].time||0});}
that._startAni();},scrollToElement:function(el,time){var that=this,pos;el=el.nodeType?el:that.scroller.querySelector(el);if(!el)return;pos=that._offset(el);pos.left+=that.wrapperOffsetLeft;pos.top+=that.wrapperOffsetTop;pos.left=pos.left>0?0:pos.left<that.maxScrollX?that.maxScrollX:pos.left;pos.top=pos.top>that.minScrollY?that.minScrollY:pos.top<that.maxScrollY?that.maxScrollY:pos.top;time=time===undefined?m.max(m.abs(pos.left)*2,m.abs(pos.top)*2):time;that.scrollTo(pos.left,pos.top,time);},scrollToPage:function(pageX,pageY,time){var that=this,x,y;time=time===undefined?400:time;if(that.options.onScrollStart)that.options.onScrollStart.call(that);if(that.options.snap){pageX=pageX=='next'?that.currPageX+1:pageX=='prev'?that.currPageX-1:pageX;pageY=pageY=='next'?that.currPageY+1:pageY=='prev'?that.currPageY-1:pageY;pageX=pageX<0?0:pageX>that.pagesX.length-1?that.pagesX.length-1:pageX;pageY=pageY<0?0:pageY>that.pagesY.length-1?that.pagesY.length-1:pageY;that.currPageX=pageX;that.currPageY=pageY;x=that.pagesX[pageX];y=that.pagesY[pageY];}else{x=-that.wrapperW*pageX;y=-that.wrapperH*pageY;if(x<that.maxScrollX)x=that.maxScrollX;if(y<that.maxScrollY)y=that.maxScrollY;}
that.scrollTo(x,y,time);},disable:function(){this.stop();this._resetPos(0);this.enabled=false;this._unbind(MOVE_EV,window);this._unbind(END_EV,window);this._unbind(CANCEL_EV,window);},enable:function(){this.enabled=true;},stop:function(){if(this.options.useTransition)this._unbind(TRNEND_EV);else cancelFrame(this.aniTime);this.steps=[];this.moved=false;this.animating=false;},zoom:function(x,y,scale,time){var that=this,relScale=scale/that.scale;if(!that.options.useTransform)return;that.zoomed=true;time=time===undefined?200:time;x=x-that.wrapperOffsetLeft-that.x;y=y-that.wrapperOffsetTop-that.y;that.x=x-x*relScale+that.x;that.y=y-y*relScale+that.y;that.scale=scale;that.refresh();that.x=that.x>0?0:that.x<that.maxScrollX?that.maxScrollX:that.x;that.y=that.y>that.minScrollY?that.minScrollY:that.y<that.maxScrollY?that.maxScrollY:that.y;that.scroller.style[transitionDuration]=time+'ms';that.scroller.style[transform]='translate('+that.x+'px,'+that.y+'px) scale('+scale+')'+translateZ;that.zoomed=false;},isReady:function(){return!this.moved&&!this.zoomed&&!this.animating;}};function prefixStyle(style){if(vendor==='')return style;style=style.charAt(0).toUpperCase()+style.substr(1);return vendor+style;}
dummyStyle=null;if(typeof exports!=='undefined')exports.iScroll=iScroll;else window.iScroll=iScroll;})(window,document);var chatScroll,lobbyScroll,chatroomScroll,woScroll,baseurl="/dento-chat/";;document.addEventListener('DOMContentLoaded',loaded,false);var chatMessageCount=0;(function($){$.mobilewebapp=(function(){var currentChatboxId=0;var onlineScroll;var hideWebBar;var keyboardOpen=0;var landscapeMode=0;var buddyListName={};var buddyListAvatar={};var buddyListMessages={};var detectTimer;return{playSound:function(){var snd=new Audio("mp3/beep.mp3");snd.play();},detect:function(keyboard){var baseHeight=$(window).height();var baseHeight=window.innerHeight;var headerHeight=$("#chatheader").outerHeight();var footerHeight=$("#chatfooter").outerHeight();var crheaderHeight=$("#chatroomheader").outerHeight();var crfooterHeight=$("#chatroomfooter").outerHeight();var contentPadding=30;$('body').css('height',(baseHeight)+'px');$('body').css('min-height',(baseHeight)+'px');$('body').css('max-height',(baseHeight)+'px');$("body").css('width',(window.innerWidth)+'px');$("#chatcontent").css('width',(window.innerWidth-30)+'px');$("#chatroomcontent").css('width',(window.innerWidth-30)+'px');$("#chatcontent").css('height',(baseHeight-headerHeight-footerHeight-contentPadding+2)+'px');$("#chatcontent").css('min-height',(baseHeight-headerHeight-footerHeight-contentPadding+2)+'px');$("#chatcontent").css('max-height',(baseHeight-headerHeight-footerHeight-contentPadding+2)+'px');$("#chatroomcontent").css('height',(baseHeight-crheaderHeight-crfooterHeight-contentPadding)+'px');$("#chatroomcontent").css('min-height',(baseHeight-crheaderHeight-crfooterHeight-contentPadding)+'px');$("#chatroomcontent").css('max-height',(baseHeight-crheaderHeight-crfooterHeight-contentPadding)+'px');$("#chat").css('height',(baseHeight)+'px');$("#chat").css('min-height',(baseHeight)+'px');$("#chat").css('max-height',(baseHeight)+'px');$("#chatcontent").css('max-height',(parseInt($("#chat").css('height'))-120)+'px');$("#chatroomusercontent").css('max-height',(parseInt($("#chat").css('height')))+'px');$("#chatroomusercontent").css('margin-top','13px');$("#chatroom").css('height',(baseHeight)+'px');$("#chatroom").css('min-height',(baseHeight)+'px');$("#chatroom").css('max-height',(baseHeight)+'px');$("#chatroomcontent").css('max-height',(parseInt($("#chatroom").css('height'))-120)+'px');$("#lobbycontent").css('width',(window.innerWidth-30)+'px');$("#wocontent").css('width',(window.innerWidth-30)+'px');clearTimeout(detectTimer);detectTimer=setTimeout(function(){jqcc.mobilewebapp.detect();},1000);setTimeout(function(){chatroomScroll.refresh();chatScroll.refresh();lobbyScroll.refresh();woScroll.refresh();},500);},init:function(){jqcc.mobilewebapp.detect();window.addEventListener('onorientationchange'in window?'orientationchange':'resize',function(){jqcc.mobilewebapp.detect();},false);document.addEventListener('touchmove',function(e){e.preventDefault();},false);},updateBuddyList:function(data){var buddylist='';var buddylisttemp={};buddylisttemp['available']='';buddylisttemp['busy']='';buddylisttemp['offline']='';buddylisttemp['away']='';$.each(data,function(i,buddy){longname=buddy.n;buddyListName[buddy.id]=buddy.n;buddyListAvatar[buddy.id]=buddy.a;if(!buddyListMessages[buddy.id]){buddyListMessages[buddy.id]=0;}
buddylisttemp[buddy.s]+='<li id="onlinelist_'+buddy.id+'" class="ui-li ui-li-static ui-body-c ui-li-has-count ui-li-has-icon" onclick="javascript:jqcc.mobilewebapp.loadPanel(\''+buddy.id+'\')" data-filtertext="'+longname+'"><img src="images/cleardot.gif" class="ui-li-icon status status-'+buddy.s+' "><span class="longname">'+longname+'</span><span class="ui-li-aside"><img src="'+buddy.a+'" class=" avatarimage"/></span><span class="newmessages ui-li-count">'+buddyListMessages[buddy.id]+'</span></li>';$('#onlinelist_'+buddy.id).remove();});buddylist=buddylisttemp['available']+buddylisttemp['busy']+buddylisttemp['away']+buddylisttemp['offline'];if(buddylist==''){buddylist+='<li class="onlinelist ui-li ui-li-static ui-body-c ui-li-has-count ui-li-has-icon" id="nousersonline">'+jqcc.cometchat.getLanguage(14)+'</li>';$('#wolist').html(buddylist);}
else{$('#wolist').html(buddylist);$('#wolist').append('<li class="onlinelist ui-li ui-li-static ui-body-c ui-li-has-count ui-li-has-icon" id="wolast" style="background:none !important;"></li>');}},loggedOut:function(){alert('Sorry you have logged out');location.href=jqcc.cometchat.getBaseUrl()+'../';},chatWith:function(id){if(chatwith()){jqcc.mobilewebapp.loadPanel(id);}},sendMessage:function(id){var message=$('#chatmessage').val();if($.trim(message)!=""){jqcc.cometchat.sendMessage(id,message);$('#chatmessage').focus();fromname='Me';selfstyle='selfmessage';var ts=Math.round(new Date().getTime()/1000)+''+Math.floor(Math.random()*1000000);var temp=(('<li><div class="cometchat_chatboxmessage '+selfstyle+' me" id="cometchat_message_'+ts+'"><span class="cometchat_chatboxmessagecontent">'+message+'</span>'+'</div><div style="clear:both;"></div></li>'));if(currentChatboxId==id){$('#cwlist').append(temp);setTimeout(function(){scrollToBottom();},500);}}
$('#chatmessage').val('');return false;},newMessage:function(incoming){if(!buddyListName[incoming.from]){jqcc.cometchat.getUserDetails(incoming.from);}
fromname=buddyListName[incoming.from];if(fromname.indexOf(" ")!=-1){fromname=fromname.slice(0,fromname.indexOf(" "));}
var ts=Math.round(new Date().getTime()/1000)+''+Math.floor(Math.random()*1000000);var atleastOneNewMessage=0;if(incoming.self==0){var temp=(('<li><div class="cometchat_chatboxmessage you" id="cometchat_message_'+ts+'"><span class="cometchat_chatboxmessagecontent">'+incoming.message+'</span>'+'</div><div style="clear:both;"></div></li>'));atleastOneNewMessage++;}
if(currentChatboxId==incoming.from){$('#cwlist').append(temp);setTimeout(function(){scrollToBottom();},500);}else{if(buddyListMessages[incoming.from]){buddyListMessages[incoming.from]+=1;}else{buddyListMessages[incoming.from]=1;}
$('#onlinelist_'+incoming.from+' .newmessages').html(buddyListMessages[incoming.from]);jqcc.mobilewebapp.notification();}
if(atleastOneNewMessage){jqcc.mobilewebapp.playSound();}},loadUserData:function(id,data){buddyListName[id]=data.n;buddyListAvatar[id]=data.a;if(!buddyListMessages[id]){buddyListMessages[id]=0;}
if(data.n.length>longNameLength){longname=data.n.substr(0,longNameLength)+'...';}else{longname=data.n;}
var buddylist='<li id="onlinelist_'+data.id+'" onclick="javascript:jqcc.mobilewebapp.loadPanel(\''+data.id+'\')" data-filtertext="'+longname+'"><img src="images/cleardot.gif" class="ui-li-icon status status-'+data.s+' "><span class="longname">'+longname+'</span><span class="ui-li-aside"><img src="'+buddy.a+'" class=" avatarimage"/></span><span class="newmessages ui-li-count">0</span></li>';$('#nousersonline').css('display','none');$('#permanent').prepend(buddylist);},joinChatroom:function(roomid,inviteid,roomname){javascript:chatroom(roomid,roomname,1,inviteid,1);loadChatroom();},newMessages:function(data){var temp='';var atleastOneNewMessage=0;$.each(data,function(i,incoming){if(!buddyListName[incoming.from]){jqcc.cometchat.getUserDetails(incoming.from);}
fromname=buddyListName[incoming.from];if(fromname.indexOf(" ")!=-1){fromname=fromname.slice(0,fromname.indexOf(" "));}
var ts=Math.round(new Date().getTime()/1000)+''+Math.floor(Math.random()*1000000);if(incoming.self==0){var temp=(('<li><div class="cometchat_chatboxmessage you" id="cometchat_message_'+ts+'"><span class="cometchat_chatboxmessagecontent">'+incoming.message+'</span>'+'</div><div style="clear:both;"></div></li>'));atleastOneNewMessage++;if(currentChatboxId==incoming.from){$('#cwlist').append(temp);setTimeout(function(){scrollToBottom();},500);}else{if(buddyListMessages[incoming.from]){buddyListMessages[incoming.from]+=1;}else{buddyListMessages[incoming.from]=1;}
$('#onlinelist_'+incoming.from+' .newmessages').html(buddyListMessages[incoming.from]);jqcc.mobilewebapp.notification();}}});if(atleastOneNewMessage){jqcc.mobilewebapp.playSound();}},loadPanel:function(id,name){buddyListMessages[id]=0;$('#onlinelist_'+id+' .newmessages').html('0');var userName=buddyListName[id];var flag=0;if(userName===undefined){if(!isNaN(id)){$.ajax({url:baseurl+"cometchat_getid.php",data:{userid:id},dataType:"jsonp",type:"get",async:"false",timeout:"10000",cache:false,success:function(data){if(data){userName=data.n;flag=1;}},error:function(){}});}}else{flag=1;}
var refreshIntervalId=setInterval(function(){if(flag==1){clearInterval(refreshIntervalId);$('#chatheader h1').html(userName);$('#scroller').html('<ul id="cwlist"></ul>');$('#chatmessageForm').attr('onsubmit','return jqcc.mobilewebapp.sendMessage(\''+id+'\')');loadChatbox();}},100);jqcc.mobilewebapp.detect();currentChatboxId=id;$('#chatmessage').blur(function(){keyboardOpen=0;jqcc.mobilewebapp.detect();});jqcc.cometchat.getRecentData(id);setTimeout(function(){scrollToBottom();},500);document.cookie='cc_chat='+urlencode(id+':'+urlencode(userName));},loadData:function(id,data){$.each(data,function(type,item){if(type=='messages'){var temp='';$.each(item,function(i,incoming){var self;var selfstyle='';var messagefrom='';if(incoming.self==1){fromname='Me';selfstyle='selfmessage';}else{fromname=buddyListName[id];}
var ts=new Date(incoming.sent*1000);if(fromname.indexOf(" ")!=-1){fromname=fromname.slice(0,fromname.indexOf(" "));}
if(selfstyle==''){self='you';}else{self='me';}
temp+=('<li><div class="cometchat_chatboxmessage '+selfstyle+' '+self+'" id="cometchat_message_'+incoming.id+'">'+messagefrom+'<span class="cometchat_chatboxmessagecontent'+selfstyle+'">'+incoming.message+'</span>'+'</div><div style="clear:both;"></div>');});if(currentChatboxId==id){setTimeout(function(){$('#cwlist').append(temp);setTimeout(function(){scrollToBottom();},500);},200)}}});},getChatCookie:function(){var cookieName='cc_'+'chat';var cookieData=getCookieInfo(cookieName);if(cookieData!=""){var cDetails=urldecode(cookieData).split(":")
var id=cDetails[0];setTimeout(function(){jqcc.mobilewebapp.loadPanel(id);},500);}
else{loadChatboxReverse();}},back:function(){document.cookie='cc_chat=';currentChatboxId=0;},notification:function(){chatMessageCount=0;$.each(buddyListMessages,function(i,j){chatMessageCount=chatMessageCount+j;});$('.chatlink  .notifier').html(chatMessageCount);}};})();})(jqcc);var listener=function(e){e.preventDefault();};window.onload=function(){getChatroomCookie();jqcc.mobilewebapp.getChatCookie();document.cookie='cc_chat=';document.cookie='cc_chatroom=';jqcc.mobilewebapp.init();}
$('#buddy').live('pageshow',function(){jqcc.mobilewebapp.notification();});var chatroomMessageCount=0;var timestamp=0;var currentroom=0;var currentp='';var currentroomcode='';var ch='';var uh='';var apiAccess=0;var myid=0;var token='4b399989eca5ff10dd2d37511f930fa412252005';var heartbeatTimer;var heartbeatCount=1;var minHeartbeat=3000;var maxHeartbeat=12000;var heartbeatTime=minHeartbeat;var autoLoginFlag=0;var todaysDate=new Date();var todaysDay=todaysDate.getDate();var messageBeep=1;var armyTime=0;var specialChars=/([^\x00-\x80]+)|([&][#])+/;var fullName=1;var newMessages=0;var users={};var usersName={};var initializeRoom=0;var hideEnterExit=0;var prepend=0;var currentroomname='';function chatHeartbeat(forceUpdate,chatroommessageno){$.ajax({url:baseurl+"modules/chatrooms/chatrooms.php?action=heartbeat",data:{timestamp:timestamp,currentroom:currentroom,clh:ch,ulh:uh,currentp:currentp,popout:apiAccess,force:forceUpdate,token:token,},type:"post",timeout:"10000",cache:false,async:false,error:function(data){clearTimeout(heartbeatTimer);heartbeatTime=minHeartbeat;heartbeatTimer=setTimeout(function(){chatHeartbeat();},heartbeatTime);},success:function(data)
{if(data){var fetchedUsers=0;$.each(data,function(type,item){if(type=='logout'){}
if(type=='chatrooms'){var temp='';$.each(item,function(i,room){longname=room.name;shortname=room.name;if(room.status=='available'){onlineNumber++;}
var selected='';if(currentroom==room.id){selected=' cometchat_chatroomselected';}
roomtype='';roomowner='';if(room.type!=0){roomtype='<img src="lock.png" />';}
if(room.s!=0){roomowner='<img src="user.png" />';}
temp+='<li id="lobbylist_'+room.id+'" class="ui-li ui-li-static ui-body-c" onclick="javascript:chatroom(\''+room.id+'\',\''+urlencode(shortname)+'\',\''+room.type+'\',\''+room.i+'\',\''+room.s+'\');" data-filtertext="'+longname+'">'+'<span class="lobby_room_1">'+longname+'</span><span class="lobby_room_2">'+room.online+' online</span><span class="lobby_room_3">'+roomtype+'</span><span class="lobby_room_4">'+roomowner+'</span><span class="lobby_room_5 ui-li-count">0</span><div style="clear:both"></div>'+'</li>';});if(temp!=''){$("#lobbylist").html(temp);$("#lobbylist").append('<li id="lobbylist_last" class="ui-li ui-li-static ui-body-c" style="border-style:none !important;background:none !important;" ></li>');}}
if(type=='clh'){ch=item;}
if(type=='ulh'){uh=item;}
if(type=='prepend'){prepend=item;}
if(type=='messages'){var temp='';var beepNewMessages=0;$.each(item,function(i,incoming){timestamp=incoming.id;var fromname=incoming.from;var bannedKicked=incoming.message;var bannedOrKicked=bannedKicked.split('_');if(bannedOrKicked[1]=='kicked'||bannedOrKicked[1]=='banned'){if(myid==bannedOrKicked[2]){if(bannedOrKicked[1]=='kicked'){kickUser(bannedOrKicked[1],incoming.id);alert('You have been kicked from this chatroom.');leaveChatroom();loadLobbyReverse();}
if(bannedOrKicked[1]=='banned'){banUser(bannedOrKicked[1],incoming.id);alert('Sorry, you are banned from this chatroom.');leaveChatroom(1);loadLobbyReverse();}}
$("#cometchat_userlist_"+bannedOrKicked[2]).remove();}
else{if($("#cometchat_message_"+incoming.id).length>0){$("#cometchat_message_"+incoming.id+' .cometchat_chatboxmessagecontent').html(incoming.message);}else{var ts=new Date(incoming.sent*1000);if(!fullName&&fromname.indexOf(" ")!=-1){fromname=fromname.slice(0,fromname.indexOf(" "));}
if(incoming.fromid!=myid){temp+=('<div class="cometchat_chatboxmessage you" id="cometchat_message_'+incoming.id+'"><span class="cometchat_chatboxmessagefrom"><strong>');temp+=('<a href="javascript:void(0)" onclick="javascript:parent.jqcc.mobilewebapp.chatWith(\''+incoming.fromid+'\');">'+fromname+'</a>');temp+=(':</strong></span><div class="userSeperator"></div><span class="cometchat_chatboxmessagecontent">'+incoming.message+'</span>'+getTimeDisplay(ts)+'</div><div style="clear:both;"></div>');newMessages++;beepNewMessages++;chatroomMessageCount++;}else{temp+=('<div class="cometchat_chatboxmessage me" id="cometchat_message_'+incoming.id+'"><span class="cometchat_chatboxmessagefrom"><strong>'+fromname+':</strong></span><div class="userSeperator"></div><span class="cometchat_chatboxmessagecontent">'+incoming.message+'</span>'+getTimeDisplay(ts)+'</div><div style="clear:both;"></div>');}}}});heartbeatCount=1;heartbeatTime=minHeartbeat;if(beepNewMessages>0&&fetchedUsers==0){jqcc.mobilewebapp.playSound();}
if(temp!=''){if(prepend==0){$("#currentroom_convotext").append(temp);setTimeout(function(){crscrollToBottom();},500);}else{$("#currentroom_convotext").prepend(temp);setTimeout(function(){crscrollToTop();},500);}}}
if(type=='users'){var temp='';var newUsers={};var newUsersName={};fetchedUsers=1;$.each(item,function(i,user){longname=user.n;if(users[user.id]!=1&&initializeRoom==0&&hideEnterExit==0){var ts=new Date();$("#currentroom_convotext").append('<div class="cometchat_chatboxalert" id="cometchat_message_0">'+user.n+' has joined the chatroom'+getTimeDisplay(ts)+'</div><div style="clear:both;"></div>');setTimeout(function(){crscrollToBottom();},500);}
newUsers[user.id]=1;newUsersName[user.id]=user.n;if(user.id==0){temp+='<li class="chatroomuser ui-li ui-li-static ui-body-c"><div id="cometchat_userlist_'+user.id+'" class="cometchat_userlist"><span class="cometchat_userscontentname">'+user.n+'</span><span style="float:right;"><img src="user.png" /></span></div></li>';}
else{temp+='<li class="chatroomuser ui-li ui-li-static ui-body-c"><div id="cometchat_userlist_'+user.id+'" class="cometchat_userlist" onclick="javascript:parent.jqcc.mobilewebapp.chatWith(\''+user.id+'\');" ><span class="cometchat_userscontentname">'+user.n+'</span><span class="list-arrow ui-icon ui-icon-arrow-r ui-icon-shadow"></span></div></li>';}});for(user in users){if(users.hasOwnProperty(user)){if(newUsers[user]!=1&&initializeRoom==0&&hideEnterExit==0){var ts=new Date();$("#currentroom_convotext").append('<div class="cometchat_chatboxalert" id="cometchat_message_0">'+usersname[user]+' has left the chatroom'+getTimeDisplay(ts)+'</div><div style="clear:both;"></div>');setTimeout(function(){crscrollToBottom();},500);}}}
$("#currentroom_users").html(temp);users=newUsers;usersname=newUsersName;initializeRoom=0;}});}
heartbeatCount++;if(heartbeatCount>4){heartbeatTime*=2;heartbeatCount=1;}
if(heartbeatTime>maxHeartbeat){heartbeatTime=maxHeartbeat;}
clearTimeout(heartbeatTimer);heartbeatTimer=setTimeout(function(){chatHeartbeat();},heartbeatTime);}});}
function chatboxKeydown(event,chatboxtextarea,force){if((event.keyCode==13&&event.shiftKey==0)||force==1){event.preventDefault();var message=$(chatboxtextarea).val();message=message.replace(/^\s+|\s+$/g,"");if(currentroom!=0){$(chatboxtextarea).val('');if(message!=''){$.post(baseurl+"modules/chatrooms/chatrooms.php?action=sendmessage",{message:message,currentroom:currentroom,token:token},function(data){if(data){addMessage('1',message,'1','1',data,1,Math.floor(new Date().getTime()/1000));}});}
setTimeout(function(){crscrollToBottom();},500);}}}
function addMessage(id,incomingmessage,self,old,incomingid,selfadded,sent){fromname='Me';separator=':  ';if($("#cometchat_message_"+incomingid).length>0){$("#cometchat_message_"+incomingid+' .cometchat_chatboxmessagecontent').html(incomingmessage);}
else{sentdata='';if(sent!=null){var ts=new Date(sent*1000);sentdata=getTimeDisplay(ts);}
if(!fullName&&fromname.indexOf(" ")!=-1){fromname=fromname.slice(0,fromname.indexOf(" "));}
$("#currentroom_convotext").append('<div class="cometchat_chatboxmessage me" id="cometchat_message_'+incomingid+'"><span class="cometchat_chatboxmessagefrom"><strong>'+fromname+'</strong>'+separator+'</span><div class="userSeperator"></div><span class="cometchat_chatboxmessagecontent">'+incomingmessage+'</span>'+sentdata+'</div><div style="clear:both;"></div>');setTimeout(function(){crscrollToBottom();},500);}}
function addRawMessage(incomingid,incomingmessage,fromname,sent){separator=':  ';var bannedKicked=incomingmessage;var bannedOrKicked=bannedKicked.split('_');if(bannedOrKicked[1]=='kicked'||bannedOrKicked[1]=='banned'){if(myid==bannedOrKicked[2]){if(bannedOrKicked[1]=='kicked'){kickUser(bannedOrKicked[1],incomingid);alert('You have been kicked from this chatroom.');leaveChatroom();loadLobbyReverse();}
if(bannedOrKicked[1]=='banned'){banUser(bannedOrKicked[1],incomingid);alert('Sorry, you are banned from this chatroom.');leaveChatroom(bannedOrKicked[2]);loadLobbyReverse();}}
$("#cometchat_userlist_"+bannedOrKicked[2]).remove();}else{if($("#cometchat_message_"+incomingid).length>0){$("#cometchat_message_"+incomingid+' .cometchat_chatboxmessagecontent').html(incomingmessage);}else{sentdata='';if(sent!=null){var ts=new Date(sent*1000);sentdata=getTimeDisplay(ts);}
if(!fullName&&fromname.indexOf(" ")!=-1){fromname=fromname.slice(0,fromname.indexOf(" "));}
$("#currentroom_convotext").append('<div class="cometchat_chatboxmessage me" id="cometchat_message_'+incomingid+'"><span class="cometchat_chatboxmessagefrom"><strong>'+fromname+'</strong>'+separator+'</span><div class="userSeperator"></div><span class="cometchat_chatboxmessagecontent">'+incomingmessage+'</span>'+sentdata+'</div><div style="clear:both;"></div>');setTimeout(function(){crscrollToBottom();},500);jqcc.mobilewebapp.playSound();}}}
function checkDropDown(dropdown){var id=$('#type').val();if(id==1){$("#chatroomPassword").css('display','block');}
else{$("#chatroomPassword").css('display','none');}}
function loadRoom(){document.cookie='cc_chatroom='+urlencode(currentroom+':'+currentp+':'+urlencode(currentroomname));setTimeout(function(){crscrollToBottom();},500);}
function createChatroomSubmit(){var name=$('#name').val();var type=$('#type').val();var password=$('#password').val();if(name!=''&&name!=null){name=name.replace(/^\s+|\s+$/g,"");if(type==1&&password==''){alert('Please enter a password');return false;}
if(type==0){password='';}
$.post(baseurl+"modules/chatrooms/chatrooms.php?action=createchatroom",{name:name,type:type,password:password,token:token},function(data){if(data!=0){currentp=SHA1(password);name=urlencode(name);chatroom(data,name,type,currentp,1);loadChatroom(1);}else{alert('This room name is not available.');}});chatHeartbeat(1);}
return false;}
function leaveChatroom(id){var flag=0;if(id)
flag=1;$.post(baseurl+"modules/chatrooms/chatrooms.php?action=leavechatroom",{currentroom:currentroom,token:token,flag:flag},function(data){if(data){currentp='';currentroomname='';currentroom=0;document.cookie='cc_chatroom=';}});}
function getChatroomCookie(){var cookieName='cc_'+'chatroom';var cookieData=getCookieInfo(cookieName);if(cookieData!=""){var crDetails=urldecode(cookieData).split(":");var id=crDetails[0];var name=crDetails[2];var invite=crDetails[1];setTimeout(function(){chatroom(id,name,null,invite,1);},500);}
else{loadLobbyReverse();}}
function chatroom(id,name,type,invite,silent){name=urldecode(name);if(currentroom!=id){password='';if(invite!=''){password=invite;}
if((type==1||type==2)){if(silent!=1){var temp=prompt('Please enter the chatroom password','')
if(temp){password=SHA1(temp);}else{return;}}}
$.ajax({url:baseurl+"modules/chatrooms/chatrooms.php?action=checkpassword",data:{password:password,id:id,token:token},type:'post',cache:false,async:false,timeout:10000,success:function(data){if(data){if(data!=0&&data!='2'){var splitdata=data.split('^');currentp=password;myid=parseInt(splitdata[2]);initializeRoom=1;currentroom=id;uh='';timestamp=0;currentroomname=name;$('#chatroomName').html(currentroomname);$('#chatroomUserName').html(currentroomname);$('#crscroller').html('<div id="currentroom_convotext"></div>');$('#chatroomusercontent').html('<ul id="currentroom_users"></ul>');loadRoom();clearTimeout(heartbeatTimer);loadChatroom();chatHeartbeat();}else{if(data==2){alert('Sorry, you are banned from this chatroom.');loadLobbyReverse();exit;}else{alert('Incorrect password. Please try again.');}}}}});}else{loadRoom();clearTimeout(heartbeatTimer);loadChatroom();chatHeartbeat();}
setTimeout(function(){crscrollToBottom();},500);}
function kickUser(kickid,kick){$.ajax({url:baseurl+"modules/chatrooms/chatrooms.php?action=kickUser",type:"POST",data:{kickid:kickid,currentroom:currentroom,kick:kick},success:function(s){$("#chatroom_userlist_"+kickid).remove();}});}
function banUser(banid,ban){$.ajax({url:baseurl+"modules/chatrooms/chatrooms.php?action=banUser",type:"POST",data:{banid:banid,currentroom:currentroom,ban:ban},success:function(s){$("#chatroom_userlist_"+banid).remove();}});}
$(document).ready(function(){chatHeartbeat(1);$("#chatroom").live('pageshow',function(){chatroomMessageCount=0;})
$("#lobby").live('pageshow',function(){var cookieName='cc_'+'chatroom';var cookieData=getCookieInfo(cookieName);if(!cookieData){cookieData='';}
if(autoLoginFlag==0&&cookieData==''){var autoLogin='0';var name='';if(autoLogin!=0){chatroom(autoLogin,name);loadChatroom();}
autoLoginFlag=1;}});});function playsound(){try{getFlashMovie("cometchatbeep").beep();}catch(error){messageBeep=0;}}
function getFlashMovie(movieName){var isIE=navigator.appName.indexOf("Microsoft")!=-1;return(isIE)?window[movieName]:document[movieName];}
function getTimeDisplay(ts){var ap="";var hour=ts.getHours();var minute=ts.getMinutes();var date=ts.getDate();var month=ts.getMonth();if(armyTime!=1){if(hour>11){ap="pm";}else{ap="am";}
if(hour>12){hour=hour-12;}
if(hour==0){hour=12;}}else{if(hour<10){hour="0"+hour;}}
if(minute<10){minute="0"+minute;}
var months=['Jan','Feb','Mar','Apr','May','Jun','Jul','Aug','Sep','Oct','Nov','Dec'];var type='th';if(date==1||date==21||date==31){type='st';}
else if(date==2||date==22){type='nd';}
else if(date==3||date==23){type='rd';}
if(date!=todaysDay){return'<span class="cometchat_ts">('+hour+":"+minute+ap+' '+date+type+' '+months[month]+')</span>';}else{return'<span class="cometchat_ts">('+hour+":"+minute+ap+')</span>';}}
function replaceHtml(el,html){var oldEl=typeof el==="string"?document.getElementById(el):el;var newEl=oldEl.cloneNode(false);newEl.innerHTML=html;oldEl.parentNode.replaceChild(newEl,oldEl);return newEl;};function SHA1(e){function rotate_left(n,s){var a=(n<<s)|(n>>>(32-s));return a};function lsb_hex(a){var b="";var i;var c;var d;for(i=0;i<=6;i+=2){c=(a>>>(i*4+4))&0x0f;d=(a>>>(i*4))&0x0f;b+=c.toString(16)+d.toString(16)}return b};function cvt_hex(a){var b="";var i;var v;for(i=7;i>=0;i--){v=(a>>>(i*4))&0x0f;b+=v.toString(16)}return b};function Utf8Encode(a){a=a.replace(/\r\n/g,"\n");var b="";for(var n=0;n<a.length;n++){var c=a.charCodeAt(n);if(c<128){b+=String.fromCharCode(c)}else if((c>127)&&(c<2048)){b+=String.fromCharCode((c>>6)|192);b+=String.fromCharCode((c&63)|128)}else{b+=String.fromCharCode((c>>12)|224);b+=String.fromCharCode(((c>>6)&63)|128);b+=String.fromCharCode((c&63)|128)}}return b};var f;var i,j;var W=new Array(80);var g=0x67452301;var h=0xEFCDAB89;var k=0x98BADCFE;var l=0x10325476;var m=0xC3D2E1F0;var A,B,C,D,E;var o;e=Utf8Encode(e);var p=e.length;var q=new Array();for(i=0;i<p-3;i+=4){j=e.charCodeAt(i)<<24|e.charCodeAt(i+1)<<16|e.charCodeAt(i+2)<<8|e.charCodeAt(i+3);q.push(j)}switch(p%4){case 0:i=0x080000000;break;case 1:i=e.charCodeAt(p-1)<<24|0x0800000;break;case 2:i=e.charCodeAt(p-2)<<24|e.charCodeAt(p-1)<<16|0x08000;break;case 3:i=e.charCodeAt(p-3)<<24|e.charCodeAt(p-2)<<16|e.charCodeAt(p-1)<<8|0x80;break}q.push(i);while((q.length%16)!=14)q.push(0);q.push(p>>>29);q.push((p<<3)&0x0ffffffff);for(f=0;f<q.length;f+=16){for(i=0;i<16;i++)W[i]=q[f+i];for(i=16;i<=79;i++)W[i]=rotate_left(W[i-3]^W[i-8]^W[i-14]^W[i-16],1);A=g;B=h;C=k;D=l;E=m;for(i=0;i<=19;i++){o=(rotate_left(A,5)+((B&C)|(~B&D))+E+W[i]+0x5A827999)&0x0ffffffff;E=D;D=C;C=rotate_left(B,30);B=A;A=o}for(i=20;i<=39;i++){o=(rotate_left(A,5)+(B^C^D)+E+W[i]+0x6ED9EBA1)&0x0ffffffff;E=D;D=C;C=rotate_left(B,30);B=A;A=o}for(i=40;i<=59;i++){o=(rotate_left(A,5)+((B&C)|(B&D)|(C&D))+E+W[i]+0x8F1BBCDC)&0x0ffffffff;E=D;D=C;C=rotate_left(B,30);B=A;A=o}for(i=60;i<=79;i++){o=(rotate_left(A,5)+(B^C^D)+E+W[i]+0xCA62C1D6)&0x0ffffffff;E=D;D=C;C=rotate_left(B,30);B=A;A=o}g=(g+A)&0x0ffffffff;h=(h+B)&0x0ffffffff;k=(k+C)&0x0ffffffff;l=(l+D)&0x0ffffffff;m=(m+E)&0x0ffffffff}var o=cvt_hex(g)+cvt_hex(h)+cvt_hex(k)+cvt_hex(l)+cvt_hex(m);return o.toLowerCase()}
function MD5(j){function RotateLeft(a,b){return(a<<b)|(a>>>(32-b))}function AddUnsigned(a,b){var c,lY4,lX8,lY8,lResult;lX8=(a&0x80000000);lY8=(b&0x80000000);c=(a&0x40000000);lY4=(b&0x40000000);lResult=(a&0x3FFFFFFF)+(b&0x3FFFFFFF);if(c&lY4){return(lResult^0x80000000^lX8^lY8)}if(c|lY4){if(lResult&0x40000000){return(lResult^0xC0000000^lX8^lY8)}else{return(lResult^0x40000000^lX8^lY8)}}else{return(lResult^lX8^lY8)}}function F(x,y,z){return(x&y)|((~x)&z)}function G(x,y,z){return(x&z)|(y&(~z))}function H(x,y,z){return(x^y^z)}function I(x,y,z){return(y^(x|(~z)))}function FF(a,b,c,d,x,s,e){a=AddUnsigned(a,AddUnsigned(AddUnsigned(F(b,c,d),x),e));return AddUnsigned(RotateLeft(a,s),b)};function GG(a,b,c,d,x,s,e){a=AddUnsigned(a,AddUnsigned(AddUnsigned(G(b,c,d),x),e));return AddUnsigned(RotateLeft(a,s),b)};function HH(a,b,c,d,x,s,e){a=AddUnsigned(a,AddUnsigned(AddUnsigned(H(b,c,d),x),e));return AddUnsigned(RotateLeft(a,s),b)};function II(a,b,c,d,x,s,e){a=AddUnsigned(a,AddUnsigned(AddUnsigned(I(b,c,d),x),e));return AddUnsigned(RotateLeft(a,s),b)};function ConvertToWordArray(a){var b;var c=a.length;var d=c+8;var e=(d-(d%64))/64;var f=(e+1)*16;var g=Array(f-1);var h=0;var i=0;while(i<c){b=(i-(i%4))/4;h=(i%4)*8;g[b]=(g[b]|(a.charCodeAt(i)<<h));i++}b=(i-(i%4))/4;h=(i%4)*8;g[b]=g[b]|(0x80<<h);g[f-2]=c<<3;g[f-1]=c>>>29;return g};function WordToHex(a){var b="",WordToHexValue_temp="",lByte,lCount;for(lCount=0;lCount<=3;lCount++){lByte=(a>>>(lCount*8))&255;WordToHexValue_temp="0"+lByte.toString(16);b=b+WordToHexValue_temp.substr(WordToHexValue_temp.length-2,2)}return b};function Utf8Encode(a){a=a.replace(/\r\n/g,"\n");var b="";for(var n=0;n<a.length;n++){var c=a.charCodeAt(n);if(c<128){b+=String.fromCharCode(c)}else if((c>127)&&(c<2048)){b+=String.fromCharCode((c>>6)|192);b+=String.fromCharCode((c&63)|128)}else{b+=String.fromCharCode((c>>12)|224);b+=String.fromCharCode(((c>>6)&63)|128);b+=String.fromCharCode((c&63)|128)}}return b};var x=Array();var k,AA,BB,CC,DD,a,b,c,d;var l=7,S12=12,S13=17,S14=22;var m=5,S22=9,S23=14,S24=20;var o=4,S32=11,S33=16,S34=23;var p=6,S42=10,S43=15,S44=21;j=Utf8Encode(j);x=ConvertToWordArray(j);a=0x67452301;b=0xEFCDAB89;c=0x98BADCFE;d=0x10325476;for(k=0;k<x.length;k+=16){AA=a;BB=b;CC=c;DD=d;a=FF(a,b,c,d,x[k+0],l,0xD76AA478);d=FF(d,a,b,c,x[k+1],S12,0xE8C7B756);c=FF(c,d,a,b,x[k+2],S13,0x242070DB);b=FF(b,c,d,a,x[k+3],S14,0xC1BDCEEE);a=FF(a,b,c,d,x[k+4],l,0xF57C0FAF);d=FF(d,a,b,c,x[k+5],S12,0x4787C62A);c=FF(c,d,a,b,x[k+6],S13,0xA8304613);b=FF(b,c,d,a,x[k+7],S14,0xFD469501);a=FF(a,b,c,d,x[k+8],l,0x698098D8);d=FF(d,a,b,c,x[k+9],S12,0x8B44F7AF);c=FF(c,d,a,b,x[k+10],S13,0xFFFF5BB1);b=FF(b,c,d,a,x[k+11],S14,0x895CD7BE);a=FF(a,b,c,d,x[k+12],l,0x6B901122);d=FF(d,a,b,c,x[k+13],S12,0xFD987193);c=FF(c,d,a,b,x[k+14],S13,0xA679438E);b=FF(b,c,d,a,x[k+15],S14,0x49B40821);a=GG(a,b,c,d,x[k+1],m,0xF61E2562);d=GG(d,a,b,c,x[k+6],S22,0xC040B340);c=GG(c,d,a,b,x[k+11],S23,0x265E5A51);b=GG(b,c,d,a,x[k+0],S24,0xE9B6C7AA);a=GG(a,b,c,d,x[k+5],m,0xD62F105D);d=GG(d,a,b,c,x[k+10],S22,0x2441453);c=GG(c,d,a,b,x[k+15],S23,0xD8A1E681);b=GG(b,c,d,a,x[k+4],S24,0xE7D3FBC8);a=GG(a,b,c,d,x[k+9],m,0x21E1CDE6);d=GG(d,a,b,c,x[k+14],S22,0xC33707D6);c=GG(c,d,a,b,x[k+3],S23,0xF4D50D87);b=GG(b,c,d,a,x[k+8],S24,0x455A14ED);a=GG(a,b,c,d,x[k+13],m,0xA9E3E905);d=GG(d,a,b,c,x[k+2],S22,0xFCEFA3F8);c=GG(c,d,a,b,x[k+7],S23,0x676F02D9);b=GG(b,c,d,a,x[k+12],S24,0x8D2A4C8A);a=HH(a,b,c,d,x[k+5],o,0xFFFA3942);d=HH(d,a,b,c,x[k+8],S32,0x8771F681);c=HH(c,d,a,b,x[k+11],S33,0x6D9D6122);b=HH(b,c,d,a,x[k+14],S34,0xFDE5380C);a=HH(a,b,c,d,x[k+1],o,0xA4BEEA44);d=HH(d,a,b,c,x[k+4],S32,0x4BDECFA9);c=HH(c,d,a,b,x[k+7],S33,0xF6BB4B60);b=HH(b,c,d,a,x[k+10],S34,0xBEBFBC70);a=HH(a,b,c,d,x[k+13],o,0x289B7EC6);d=HH(d,a,b,c,x[k+0],S32,0xEAA127FA);c=HH(c,d,a,b,x[k+3],S33,0xD4EF3085);b=HH(b,c,d,a,x[k+6],S34,0x4881D05);a=HH(a,b,c,d,x[k+9],o,0xD9D4D039);d=HH(d,a,b,c,x[k+12],S32,0xE6DB99E5);c=HH(c,d,a,b,x[k+15],S33,0x1FA27CF8);b=HH(b,c,d,a,x[k+2],S34,0xC4AC5665);a=II(a,b,c,d,x[k+0],p,0xF4292244);d=II(d,a,b,c,x[k+7],S42,0x432AFF97);c=II(c,d,a,b,x[k+14],S43,0xAB9423A7);b=II(b,c,d,a,x[k+5],S44,0xFC93A039);a=II(a,b,c,d,x[k+12],p,0x655B59C3);d=II(d,a,b,c,x[k+3],S42,0x8F0CCC92);c=II(c,d,a,b,x[k+10],S43,0xFFEFF47D);b=II(b,c,d,a,x[k+1],S44,0x85845DD1);a=II(a,b,c,d,x[k+8],p,0x6FA87E4F);d=II(d,a,b,c,x[k+15],S42,0xFE2CE6E0);c=II(c,d,a,b,x[k+6],S43,0xA3014314);b=II(b,c,d,a,x[k+13],S44,0x4E0811A1);a=II(a,b,c,d,x[k+4],p,0xF7537E82);d=II(d,a,b,c,x[k+11],S42,0xBD3AF235);c=II(c,d,a,b,x[k+2],S43,0x2AD7D2BB);b=II(b,c,d,a,x[k+9],S44,0xEB86D391);a=AddUnsigned(a,AA);b=AddUnsigned(b,BB);c=AddUnsigned(c,CC);d=AddUnsigned(d,DD)}var q=WordToHex(a)+WordToHex(b)+WordToHex(c)+WordToHex(d);return q.toLowerCase()}function base64_encode(a){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var c,o2,o3,h1,h2,h3,h4,bits,i=0,ac=0,enc="",tmp_arr=[];if(!a){return a}a=this.utf8_encode(a+'');do{c=a.charCodeAt(i++);o2=a.charCodeAt(i++);o3=a.charCodeAt(i++);bits=c<<16|o2<<8|o3;h1=bits>>18&0x3f;h2=bits>>12&0x3f;h3=bits>>6&0x3f;h4=bits&0x3f;tmp_arr[ac++]=b.charAt(h1)+b.charAt(h2)+b.charAt(h3)+b.charAt(h4)}while(i<a.length);enc=tmp_arr.join('');switch(a.length%3){case 1:enc=enc.slice(0,-2)+'==';break;case 2:enc=enc.slice(0,-1)+'=';break}return enc}function base64_decode(a){var b="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=";var c,o2,o3,h1,h2,h3,h4,bits,i=0,ac=0,dec="",tmp_arr=[];if(!a){return a}a+='';do{h1=b.indexOf(a.charAt(i++));h2=b.indexOf(a.charAt(i++));h3=b.indexOf(a.charAt(i++));h4=b.indexOf(a.charAt(i++));bits=h1<<18|h2<<12|h3<<6|h4;c=bits>>16&0xff;o2=bits>>8&0xff;o3=bits&0xff;if(h3==64){tmp_arr[ac++]=String.fromCharCode(c)}else if(h4==64){tmp_arr[ac++]=String.fromCharCode(c,o2)}else{tmp_arr[ac++]=String.fromCharCode(c,o2,o3)}}while(i<a.length);dec=tmp_arr.join('');dec=this.utf8_decode(dec);return dec}function utf8_decode(a){var b=[],i=0,ac=0,c1=0,c2=0,c3=0;a+='';while(i<a.length){c1=a.charCodeAt(i);if(c1<128){b[ac++]=String.fromCharCode(c1);i++}else if((c1>191)&&(c1<224)){c2=a.charCodeAt(i+1);b[ac++]=String.fromCharCode(((c1&31)<<6)|(c2&63));i+=2}else{c2=a.charCodeAt(i+1);c3=a.charCodeAt(i+2);b[ac++]=String.fromCharCode(((c1&15)<<12)|((c2&63)<<6)|(c3&63));i+=3}}return b.join('')}function utf8_encode(a){var b=(a+'');var c="";var d,end;var e=0;d=end=0;e=b.length;for(var n=0;n<e;n++){var f=b.charCodeAt(n);var g=null;if(f<128){end++}else if(f>127&&f<2048){g=String.fromCharCode((f>>6)|192)+String.fromCharCode((f&63)|128)}else{g=String.fromCharCode((f>>12)|224)+String.fromCharCode(((f>>6)&63)|128)+String.fromCharCode((f&63)|128)}if(g!==null){if(end>d){c+=b.substring(d,end)}c+=g;d=end=n+1}}if(end>d){c+=b.substring(d,b.length)}return c}
function urlencode(string){return base64_encode(string);}
function urldecode(string){return base64_decode(string);}
jqcc.cookie=function(a,b,c){if(typeof b!='undefined'){c=c||{};if(b===null){b='';c.expires=-1}var d='';if(c.expires&&(typeof c.expires=='number'||c.expires.toUTCString)){var e;if(typeof c.expires=='number'){e=new Date();e.setTime(e.getTime()+(c.expires*24*60*60*1000))}else{e=c.expires}d='; expires='+e.toUTCString()}var f=c.path?'; path='+(c.path):'';var g=c.domain?'; domain='+(c.domain):'';var h=c.secure?'; secure':'';document.cookie=[a,'=',encodeURIComponent(b),d,f,g,h].join('')}else{var j=null;if(document.cookie&&document.cookie!=''){var k=document.cookie.split(';');for(var i=0;i<k.length;i++){var l=jqcc.trim(k[i]);if(l.substring(0,a.length+1)==(a+'=')){j=decodeURIComponent(l.substring(a.length+1));break}}}return j}};if(typeof deconcept=="undefined"){var deconcept=new Object();}if(typeof deconcept.util=="undefined"){deconcept.util=new Object();}if(typeof deconcept.SWFObjectCCUtil=="undefined"){deconcept.SWFObjectCCUtil=new Object();}deconcept.SWFObjectCC=function(_1,id,w,h,_5,c,_7,_8,_9,_a){if(!document.getElementById){return;}this.DETECT_KEY=_a?_a:"detectflash";this.skipDetect=deconcept.util.getRequestParameter(this.DETECT_KEY);this.params=new Object();this.variables=new Object();this.attributes=new Array();if(_1){this.setAttribute("swf",_1);}if(id){this.setAttribute("id",id);}if(w){this.setAttribute("width",w);}if(h){this.setAttribute("height",h);}if(_5){this.setAttribute("version",new deconcept.PlayerVersion(_5.toString().split(".")));}this.installedVer=deconcept.SWFObjectCCUtil.getPlayerVersion();if(!window.opera&&document.all&&this.installedVer.major>7){deconcept.SWFObjectCC.doPrepUnload=true;}if(c){this.addParam("bgcolor",c);}var q=_7?_7:"high";this.addParam("quality",q);this.setAttribute("useExpressInstall",false);this.setAttribute("doExpressInstall",false);var _c=(_8)?_8:window.location;this.setAttribute("xiRedirectUrl",_c);this.setAttribute("redirectUrl","");if(_9){this.setAttribute("redirectUrl",_9);}};deconcept.SWFObjectCC.prototype={useExpressInstall:function(_d){this.xiSWFPath=!_d?"expressinstall.swf":_d;this.setAttribute("useExpressInstall",true);},setAttribute:function(_e,_f){this.attributes[_e]=_f;},getAttribute:function(_10){return this.attributes[_10];},addParam:function(_11,_12){this.params[_11]=_12;},getParams:function(){return this.params;},addVariable:function(_13,_14){this.variables[_13]=_14;},getVariable:function(_15){return this.variables[_15];},getVariables:function(){return this.variables;},getVariablePairs:function(){var _16=new Array();var key;var _18=this.getVariables();for(key in _18){_16[_16.length]=key+"="+_18[key];}return _16;},getSWFHTML:function(){var _19="";if(navigator.plugins&&navigator.mimeTypes&&navigator.mimeTypes.length){if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","PlugIn");this.setAttribute("swf",this.xiSWFPath);}_19="<embed type=\"application/x-shockwave-flash\" src=\""+this.getAttribute("swf")+"\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\" style=\""+this.getAttribute("style")+"\"";_19+=" id=\""+this.getAttribute("id")+"\" name=\""+this.getAttribute("id")+"\" ";var _1a=this.getParams();for(var key in _1a){_19+=[key]+"=\""+_1a[key]+"\" ";}var _1c=this.getVariablePairs().join("&");if(_1c.length>0){_19+="flashvars=\""+_1c+"\"";}_19+="/>";}else{if(this.getAttribute("doExpressInstall")){this.addVariable("MMplayerType","ActiveX");this.setAttribute("swf",this.xiSWFPath);}_19="<object id=\""+this.getAttribute("id")+"\" classid=\"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000\" width=\""+this.getAttribute("width")+"\" height=\""+this.getAttribute("height")+"\" style=\""+this.getAttribute("style")+"\">";_19+="<param name=\"movie\" value=\""+this.getAttribute("swf")+"\" />";var _1d=this.getParams();for(var key in _1d){_19+="<param name=\""+key+"\" value=\""+_1d[key]+"\" />";}var _1f=this.getVariablePairs().join("&");if(_1f.length>0){_19+="<param name=\"flashvars\" value=\""+_1f+"\" />";}_19+="</object>";}return _19;},write:function(_20){if(this.getAttribute("useExpressInstall")){var _21=new deconcept.PlayerVersion([6,0,65]);if(this.installedVer.versionIsValid(_21)&&!this.installedVer.versionIsValid(this.getAttribute("version"))){this.setAttribute("doExpressInstall",true);this.addVariable("MMredirectURL",escape(this.getAttribute("xiRedirectUrl")));document.title=document.title.slice(0,47)+" - Flash Player Installation";this.addVariable("MMdoctitle",document.title);}}if(this.skipDetect||this.getAttribute("doExpressInstall")||this.installedVer.versionIsValid(this.getAttribute("version"))){var n=(typeof _20=="string")?document.getElementById(_20):_20;n.innerHTML=this.getSWFHTML();return true;}else{if(this.getAttribute("redirectUrl")!=""){document.location.replace(this.getAttribute("redirectUrl"));}}return false;}};deconcept.SWFObjectCCUtil.getPlayerVersion=function(){var _23=new deconcept.PlayerVersion([0,0,0]);if(navigator.plugins&&navigator.mimeTypes.length){var x=navigator.plugins["Shockwave Flash"];if(x&&x.description){_23=new deconcept.PlayerVersion(x.description.replace(/([a-zA-Z]|\s)+/,"").replace(/(\s+r|\s+b[0-9]+)/,".").split("."));}}else{if(navigator.userAgent&&navigator.userAgent.indexOf("Windows CE")>=0){var axo=1;var _26=3;while(axo){try{_26++;axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash."+_26);_23=new deconcept.PlayerVersion([_26,0,0]);}catch(e){axo=null;}}}else{try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.7");}catch(e){try{var axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash.6");_23=new deconcept.PlayerVersion([6,0,21]);axo.AllowScriptAccess="always";}catch(e){if(_23.major==6){return _23;}}try{axo=new ActiveXObject("ShockwaveFlash.ShockwaveFlash");}catch(e){}}if(axo!=null){_23=new deconcept.PlayerVersion(axo.GetVariable("$version").split(" ")[1].split(","));}}}return _23;};deconcept.PlayerVersion=function(_29){this.major=_29[0]!=null?parseInt(_29[0]):0;this.minor=_29[1]!=null?parseInt(_29[1]):0;this.rev=_29[2]!=null?parseInt(_29[2]):0;};deconcept.PlayerVersion.prototype.versionIsValid=function(fv){if(this.major<fv.major){return false;}if(this.major>fv.major){return true;}if(this.minor<fv.minor){return false;}if(this.minor>fv.minor){return true;}if(this.rev<fv.rev){return false;}return true;};deconcept.util={getRequestParameter:function(_2b){var q=document.location.search||document.location.hash;if(_2b==null){return q;}if(q){var _2d=q.substring(1).split("&");for(var i=0;i<_2d.length;i++){if(_2d[i].substring(0,_2d[i].indexOf("="))==_2b){return _2d[i].substring((_2d[i].indexOf("=")+1));}}}return"";}};deconcept.SWFObjectCCUtil.cleanupSWFs=function(){var _2f=document.getElementsByTagName("OBJECT");for(var i=_2f.length-1;i>=0;i--){_2f[i].style.display="none";for(var x in _2f[i]){if(typeof _2f[i][x]=="function"){_2f[i][x]=function(){};}}}};if(deconcept.SWFObjectCC.doPrepUnload){if(!deconcept.unloadSet){deconcept.SWFObjectCCUtil.prepUnload=function(){__flash_unloadHandler=function(){};__flash_savedUnloadHandler=function(){};window.attachEvent("onunload",deconcept.SWFObjectCCUtil.cleanupSWFs);};window.attachEvent("onbeforeunload",deconcept.SWFObjectCCUtil.prepUnload);deconcept.unloadSet=true;}}if(!document.getElementById&&document.all){document.getElementById=function(id){return document.all[id];};}var getQueryParamValue=deconcept.util.getRequestParameter;var FlashObject=deconcept.SWFObjectCC;var SWFObjectCC=deconcept.SWFObjectCC;$.mobile.transitionFallbacks.slide="none";function loaded(){setTimeout(function(){document.addEventListener('touchmove',function(e){e.preventDefault();},false);chatScroll=new iScroll('chatcontent');chatroomScroll=new iScroll('chatroomcontent');lobbyScroll=new iScroll('lobbycontent',{onBeforeScrollStart:function(e){var target=e.target;while(target.nodeType!=1)target=target.parentNode;if(target.tagName!='SELECT'&&target.tagName!='INPUT'&&target.tagName!='TEXTAREA')
e.preventDefault();}});woScroll=new iScroll('wocontent',{onBeforeScrollStart:function(e){var target=e.target;while(target.nodeType!=1)target=target.parentNode;if(target.tagName!='SELECT'&&target.tagName!='INPUT'&&target.tagName!='TEXTAREA')
e.preventDefault();}});},200);}
$(document).ready(function(){$('#buddy, #lobby').live('pagebeforeshow',function(event){setTimeout(function(){lobbyScroll.refresh();woScroll.refresh();},200);$('#'+$(this).attr('id')+'_link').addClass('ui-btn-active');});setInterval(function(){$('.notifier').each(function(){if($(this).html()==0){$(this).css('display','none');}
else{$(this).css('display','block');}});},100);$('#buddy').live('pageinit',function(){$('.chatlink .ui-icon').html('<span class="notifier">0</span>');});$('#lobby').live('pageinit',function(){$('.chatlink .ui-icon').html('<span class="notifier">0</span>');});$('#chatroommessage').live('keydown',function(event){return chatboxKeydown(event,this);});$('#chatmessage').live('click',function(event){setTimeout(function(){scrollToBottom();},500);});$('#chatroommessage').live('click',function(event){setTimeout(function(){crscrollToBottom();},500);});$('#chatroom').live("pageinit",function(){getChatroomCookie();});$('#chat').live("pageinit",function(){jqcc.mobilewebapp.getChatCookie();});});function scrollToBottom(){if($('#scroller').height()>$('#chatcontent').height()){setTimeout(function(){chatScroll.scrollToElement('#cwlist li:last-child',100);},500);}}
function crscrollToBottom(){if($('#crscroller').height()>$('#chatroomcontent').height()){setTimeout(function(){chatroomScroll.scrollToElement('#currentroom_convotext div:last-child',100);},500);}}
function refreshLists(id){$('#'+id).listview("refresh");}
function loadChatbox(){$.mobile.changePage("#chat",{transition:"none"});}
function loadChatboxReverse(){$.mobile.changePage("#buddy",{transition:"none",reverse:true});jqcc.mobilewebapp.back();}
function loadChatroom(){$.mobile.changePage("#chatroom",{transition:"none"});}
function loadChatroomReverse(){$.mobile.changePage("#chatroom",{transition:"none",reverse:true});}
function loadLobbyReverse(){$.mobile.changePage("#lobby",{transition:"none",reverse:true});}
function showChatroomUser(){$.mobile.changePage("#chatroomuser",{transition:"none"});}
function chatwith(){$.mobile.changePage("#chat",{transition:"none"});return true;}
function createChatroom(){$.mobile.changePage("#createChatroom",{transition:"none"});}
function refreshPage(){location.reload();}
function getCookieInfo(cookieName){var i,x,y,ARRcookies=document.cookie.split(";");for(i=0;i<ARRcookies.length;i++)
{x=ARRcookies[i].substr(0,ARRcookies[i].indexOf("="));y=ARRcookies[i].substr(ARRcookies[i].indexOf("=")+1);x=x.replace(/^\s+|\s+$/g,"");if(x==cookieName)
{return unescape(y);}}}